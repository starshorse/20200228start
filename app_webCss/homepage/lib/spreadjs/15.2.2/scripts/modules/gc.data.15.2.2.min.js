/*!
 * 
 * SpreadJS Library 15.2.2
 * 
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the SpreadJS Commercial License.
 * us.sales@grapecity.com
 * http://www.grapecity.com/en/licensing/grapecity/
 * 
 * 
 */
var GC="object"==typeof GC?GC:{};GC.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="/assets/",c(c.s="./node_modules_local/@grapecity/js-data-manager/index.js")}({"./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js":function(a,b,c){var d="object"==typeof d?d:{};d.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s="./dist/src/dataManager.entry.js")}({"./dist/src/calculation/calcSource.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerCalcSource=b.DataManagerReference=void 0,d=c("CalcEngine"),e=function(){function a(){this.row=[],this.field=[]}return a.prototype.parseRowIndex=function(a,b,c){var d=b.num;return b.relative||(b.num===-1?d=a-1:d--),c*b.relative+d},a.prototype.getValueImp=function(a){var b,c,e,f,g,h,i,j=this.table.length();if(this.field.x4c&&this.field.x4c[this.rowString])return this.field.x4c[this.rowString];if(b=[],0===this.row.length)for(c=0;c<j;c++)b.push(this.field.getValue(c));for(e=0;e<this.row.length;e++)if(f=this.row[e],2===f.length)for(g=this.parseRowIndex(j,f[0],a),h=this.parseRowIndex(j,f[1],a),i=g;i<=h;i++)b.push(this.field.getValue(i));else if(f.type)if("key"===f.type)c=this.table.y4c(f.value),b=b.concat(this.field.getValues(c));else for(i="odd"===f.type?1:0;i<j;i+=2)b.push(this.field.getValue(i));else c=this.parseRowIndex(j,f,a),b.push(this.field.getValue(c));if(1===b.length)b=b[0];else if(0===b.length)return null;return b instanceof Array&&(b=b[0]instanceof Array?new d.CalcArray(b):new d.CalcArray([b])),this.z4c||(this.field.x4c=this.field.x4c||{},this.field.x4c[this.rowString]=b),b},a.prototype.getValuesImp=function(a,b){var c=this.field.getValues(a,b);return c[0]instanceof Array?new d.CalcArray(c):new d.CalcArray([c])},a.prototype.getValue=function(a,b){this.egd();var c=a instanceof Array?this.getValuesImp(a,b):this.getValueImp(a);return c},a.prototype.egd=function(){this.field=this.table.C4c(this.HL)},a}(),b.DataManagerReference=e,f=function(a){g(b,a);function b(b,c){var d=a.call(this,b)||this;return d.sj=c,d}return b.prototype.CUc=function(){return this._allFieldNames},b.prototype.A4c=function(a){this.B4c=a},b.prototype.L$a=function(a,b){this.xc=a,this.oI=b},b.prototype.getField=function(a){var b=this.xc,c=this.oI;return a.getValue(b,c)},b}(d.CalcSource),b.DataManagerCalcSource=f},"./dist/src/calculation/functions/functions.entry.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.addCustomFunctions=void 0;var d=c("./dist/src/calculation/functions/scope.js");function e(){d.addScopeCustomFunctions()}b.addCustomFunctions=e},"./dist/src/calculation/functions/scope.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.addScopeCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="CALCULATE",g="REMOVEFILTERS";function h(){function a(){}a.prototype=new d.Functions.Function(f,2,2),a.prototype.isContextSensitive=function(){return!0},a.prototype.isReverseArgs=function(){return!0},a.prototype.evaluate=function(a,b,c){return a.source.oI=b.start,a.source.xc=b.context,c},d.Functions.defineGlobalCustomFunction(f,new a);function b(){}b.prototype=new d.Functions.Function(g,0,255),b.prototype.isContextSensitive=function(){return!0},b.prototype.evaluate=function(a){var b,c,d,e=[];for(b=1;b<arguments.length;b++)e[b-1]=arguments[b];return c={start:a.source.oI,context:a.source.xc},d=a.source.B4c,a.source.oI=0,a.source.xc=i(d,e),c},d.Functions.defineGlobalCustomFunction(g,new b)}b.addScopeCustomFunctions=h;function i(a,b){var c=j(a.groupOptions.slice(0,a.path.length),b);return k(a.path,c)?a.entireScope:l(a.path,c)}function j(a,b){var c,d;if(b&&b.length>0){for(c=-1,a=a.reverse(),d=0;d<a.length;d++)if(a[d].field!==b[d]){e.isNullOrUndefined(b[d])&&b.length<=d&&(c=a.length-d-1);break}return c}return-1}function k(a,b){return b===-1||a.length-1<=b}function l(a,b){var c=a[b],d=[];return m(c,d),d}function m(a,b){var c,d,e,f,g,h,i=b.length,j=a.recordIndexes;if(j)for(c=0,d=j.length;c<d;c++)b[i+c]=j[c];else for(e=a.children,f=0,g=e;f<g.length;f++)h=g[f],m(h,b)}},"./dist/src/calculation/queryFunctionResolver.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.QueryFunctionSolver=void 0,d=c("Common"),e=null,f=d.Common.u.kb,g=function(){function a(){}return a.parseParam=function(b,c,d,g){var h,i=Object.keys(g.tables),j=new a,k=function(a){var h,k,l,m,n=i[a];b===n?(j.getValue=function(a){return a.fNb(e,e,c,d)},j.table=g.tables[n]):f(b,n)&&(j.table=g.tables[n],h=b[n.length],k=b.substr(n.length+1),"#"===h?(l=parseInt(k,10),j.getValue=function(a){var b=[];return b.push(a.G4c(l,c||a._dataSource.U,d)),b}):"/"===h?j.getValue=function(a){var b=[];return b.push(a.G4c(a.y4c(k),c||a._dataSource.U,d)),b}:"?"===h?(m=k.split("=",2),1===m.length?j.getValue=function(a){var b=[];return b.push(a.G4c(a.y4c(k),c||a._dataSource.U,d)),b}:j.getValue=function(a){return a.fNb(m[1],m[0],c,d)}):delete j.table)};for(h=0;h<i.length;h++)k(h);return j},a}(),b.QueryFunctionSolver=g},"./dist/src/calculation/tokenResolver.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerTokenResolver=void 0,d=c("CalcEngine"),e=c("./dist/src/calculation/calcSource.js"),f=c("./dist/src/dataSource/utils.js"),g=function(a){i(b,a);function b(b){var c=a.call(this,14)||this;return c.value=b,c}return b.prototype.gmb=function(a,b){if(this.value instanceof e.DataManagerReference){var c=this.value.table;c.d9c(a,this.value.HL[0],b)}},b}(d.Expression),h=function(a){i(b,a);function b(b){return a.call(this,b)||this}return b.prototype.resolveToken=function(a,b,c,d,f){var h,i,j,k=c[d],l=k.ni,m=a.source,n=m&&m.sj;if(n&&0===k.Nc&&"["===l[0]&&"]"===l[l.length-1]){if(h=new e.DataManagerReference,i=this.DUc(h,l,1),i===-1)return;if(h.rowString=l.substring(1,i),i=this.EUc(h,l,i),i===-1)return;return h.table=n,h.HL=h.field,h.field=n.C4c(h.field),j=new g(h),{expr:j,index:d+1}}},b.prototype.DUc=function(a,b,c){var d,e,g,h,i=!1;function j(a,c){for(var d=c?a+1:a;b[d]>="0"&&b[d]<="9";)d++;for(;" "===b[d];)d++;return{value:parseInt(b.substring(a,d),10),end:d}}function k(a){for(var c=a;c<b.length&&"["!==b[c]&&"]"!==b[c]&&","!==b[c];)c++;return{type:"key",value:b.substring(a,c).trim(),end:c}}function l(a){var c,d,e=b[a],f=b[a+1];return"@"===e?(i=!0,"+"===f||"-"===f?(c=j(a+1,!0),c.end<=a+1?-1:{num:c.value,end:c.end,relative:!0}):{num:0,end:a+1,relative:!0}):"#"===e?(c=j(a+1),c.end>a+1?{num:c.value,end:c.end,relative:!1}:"last"===b.substr(a+1,4)?{num:-1,end:a+5,relative:!1}:"odd"===b.substr(a+1,3)?{type:"odd",end:a+4}:"even"===b.substr(a+1,4)?{type:"even",end:a+5}:-1):"$"===e?(d=k(a+1),d.end>=b.length?-1:d):-1}for(d=null;c<b.length&&(e=b[c],"["!==e&&"]"!==e);)if(d||"@"!==e&&"#"!==e&&"$"!==e)if(","===e&&d)d=!1,c++;else{if(" "!==e)break;c++}else{if(g=l(c),g===-1)return-1;if(":"!==b[g.end]||f.isNullOrUndefined(g.num))a.row.push(g),c=g.end;else{for(c=g.end+1;" "===b[c];)c++;if(h=l(c),h===-1||f.isNullOrUndefined(h.num))return-1;a.row.push([g,h]),c=h.end}d=!0}return a.z4c=i,d===!1?-1:c},b.prototype.EUc=function(a,b,c){var d,e,f;function g(a){for(var c=a;"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}function h(a){for(var c=a;"."!==b[c]&&"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}for(d=null;c<b.length;)if(e=b[c],"["!==e||d){if("]"===e)break;if(" "===e)c++;else if("."===e&&d)c++,d=!1;else{if("."===e||d)return-1;f=h(c),a.field.push(f.str),c=f.end,d=!0}}else{if(f=g(c+1),f.end<=c+1)return-1;a.field.push(f.str),c=f.end+1,d=!0}return c===b.length-1?c:-1},b.prototype.unparse=function(){return!1},b}(d.TokenResolver),b.DataManagerTokenResolver=h},"./dist/src/dataManager.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/dataSource/dataSource.entry.js"),b),e(c("./dist/src/table/table.entry.js"),b),e(c("./dist/src/viewField/viewField.entry.js"),b),e(c("./dist/src/view/view.entry.js"),b),e(c("./dist/src/interfaces/interface.js"),b),e(c("./dist/src/interfaces/styleOptions.js"),b),e(c("./dist/src/interfaces/validatorOptions.js"),b),e(c("./dist/src/interfaces/conditionalFormatOptions.js"),b),e(c("./dist/src/dataManager.js"),b)},"./dist/src/dataManager.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o;Object.defineProperty(b,"__esModule",{value:!0}),b.isView=b.DataManager=void 0,d=c("CalcEngine"),e=c("./dist/src/table/table.js"),f=c("./dist/src/view/view.js"),g=c("./dist/src/dataSource/utils.js"),h=c("./dist/src/dataSource/dataSource.js"),i=c("./dist/src/calculation/functions/functions.entry.js"),j=c("./dist/src/calculation/tokenResolver.js"),k=c("./dist/src/calculation/queryFunctionResolver.js"),l=c("./dist/src/relationship.js"),m=null,n=d.Convert.Fh,o=function(){function a(a){this.V6c={},this.tables={},this.relationships=[],this.E4c={},a||(a=new d.CalcService),this.updateCalcService(a),i.addCustomFunctions()}return a.prototype.addTable=function(a,b){var c=new e.Table(a,b);return this.tables[a]=c,c.IUc(this),c},a.prototype.removeTable=function(a){var b,c=this.tables[a],d=this.relationships;for(b=d.length-1;b>=0;b--)d[b].sourceTable!==c&&d[b].targetTable!==c||(d[b].Fb(),d.splice(b,1));c.IUc(m),delete this.tables[a]},a.prototype.addRelationship=function(a,b,c,d,e,f){var g=new l.Relationship(a,b,c,d,e,f);return this.relationships.push(g),g},a.prototype.removeRelationship=function(a){var b,c=this.relationships;for(b=0;b<c.length;b++)if(c[b].sourceRelationshipName===a){c[b].Fb(),c.splice(b,1);break}},a.prototype.updateCalcService=function(a){var b,c,d,e=a.getResolvers(),f=!0;for(b=0,c=e;b<c.length;b++)if(d=c[b],d instanceof j.DataManagerTokenResolver){f=!1;break}f&&a.addResolver(new j.DataManagerTokenResolver(8e3)),this.Wu=a},a.prototype.fgd=function(a,b,c){var d,e;return n(a)?a=a.getValueByIndex(0):g.isString(a)||(a=""+a),g.isString(b)?b=[b]:n(b)?b=b.toArray(0,!0):b&&b.array&&(b=b.array[0]),d=a+"-"+(b&&b.join(",")),e=this.E4c[d],e||(e=this.E4c[d]=k.QueryFunctionSolver.parseParam(a,b,c,this)),e},a.prototype.E1c=function(a,b,c,d){var e,f=this.fgd(a,b,c);function g(){d(),f.table._dataSource.unbind(h.ONCHANGE,g)}return d&&f.table&&f.table._dataSource.bind(h.ONCHANGE,g),e=f.getValue?f.getValue(f.table):[[]],0===e.length&&(e=[[]]),e},a.prototype.toJSON=function(){var a,b,c=this.tables,d=[];for(a in c)c.hasOwnProperty(a)&&d.push(c[a].toJSON());return b=this.relationships.map(function(a){return{sourceTableName:a.sourceTable.name,sourceFieldName:a.sourceFieldName,sourceRelationshipName:a.sourceRelationshipName,targetTableName:a.targetTable.name,targetFieldName:a.targetFieldName,targetRelationshipName:a.targetRelationshipName}}),{tables:d,relationships:b}},a.prototype.fromJSON=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this.tables={},q=a.tables;for(b=0,c=q;b<c.length;b++){if(d=c[b],e=d.dataSourceOption.schema,f=e&&e.columns,f)for(g in f)f.hasOwnProperty(g)&&(h=f[g],h&&"date"===h.dataType&&Array.isArray(h.lookup)&&(h.lookup=h.lookup.map(function(a){return new Date(a)})));i=this.addTable(d.name,d.dataSourceOption),i.F4c=!0,i.fromJSON(d)}for(this.relationships=[],j=a.relationships,k=0,l=j;k<l.length;k++)m=l[k],n=p[m.sourceTableName],o=p[m.targetTableName],this.addRelationship(n,m.sourceFieldName,m.sourceRelationshipName,o,m.targetFieldName,m.targetRelationshipName)},a}(),b.DataManager=o;function p(a){return a instanceof f.View}b.isView=p},"./dist/src/dataSource/dataReader/BasicReader.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.BasicReader=void 0,d=c("./dist/src/dataSource/utils.js"),e=void 0,f=function(){function a(a){var b,c,f,g=this;g.i6=a,d.isNullOrUndefined(a)||(g.HL=a.HL,b=a.dataPath,c=a.countPath,f=a.parse,d.isFunction(b)?g.JUc=b:g.JUc=function(a){return d.isString(b)&&b?d.LL(a,b):a},d.isFunction(c)?g.KUc=c:g.KUc=function(a){return d.isString(c)&&c?parseInt(d.LL(a,c),10):e},d.isFunction(f)&&(g.parse=f))}return a.prototype.parse=function(a){return this.LUc=a,Promise.resolve(a)},a.prototype.read=function(a){return Promise.resolve(this.JUc(a))},a.prototype.total=function(a){return this.KUc(a)},a}(),b.BasicReader=f},"./dist/src/dataSource/dataReader/ColumnJsonReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.ColumnJsonReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.JUc=f:d.JUc=function(a){var b,c,g,h,i,j,k,l;for(a=e.isString(f)?e.LL(a,f):a,b=d.HL=d.HL||e.keys(a),c=d.LUc=[],g=a[b[0]].length,h=0;h<g;h++){for(i={},j=0,k=b;j<k.length;j++)l=k[j],i[l]=a[l][h];c.push(i)}return c},c}return b.prototype.parse=function(a){var b=this;return new Promise(function(c,d){var f,g;e.isNullOrUndefined(a)&&d("value cannot be null or empty"),f=b.HL=b.HL||e.keys(a),g=e.reduce(f,function(b,c){return b&&e.isArray(a[c])},!0),g||d("The value of each property in column JSON should be an array"),c(a)})},b}(d.BasicReader),b.ColumnJsonReader=f},"./dist/src/dataSource/dataReader/CsvReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CsvReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this;return c.MUc=b.delimiter||['"'],c.vua=b.separator||",",c}return b.prototype.parse=function(a){for(var b,c,d,f,g=this,h=g.MUc,i=g.vua,j=a.split(""),k=0,l=j.length,m=[];k<l;){for(d=[];k<l&&"\r"!==j[k]&&"\n"!==j[k];){if(b=c=k,e.indexOf(h,j[k])>-1){for(++k,b=c=k;k<l;){if(e.indexOf(h,j[k])>-1){if(e.indexOf(h,j[k+1])===-1)break;++k,j[k]=""}++k,c=k}for(e.indexOf(h,j[k])>-1&&++k;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k}else for(;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k,c=k;d.push(j.slice(b,c).join("")),i===j[k]&&++k}"\r"!==j[k]&&"\n"!==j[k]||++k,d.length>0&&m.push(d)}return f=m.shift(),g.LUc=e.isNullOrUndefined(g.HL)?e.map(m,function(a){return e.zipObject(f,a)}):e.map(m,function(a){return e.pick(e.zipObject(f,a),g.HL)}),g.HL=g.HL||f,Promise.resolve(g.LUc)},b}(d.BasicReader),b.CsvReader=f},"./dist/src/dataSource/dataReader/JsonReader.js":function(a,b,c){"use strict";var d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.JsonReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=function(a){f(b,a);function b(b){return a.call(this,b)||this}return b}(d.BasicReader),b.JsonReader=e},"./dist/src/dataSource/dataReader/XmlReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.XmlReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.JUc=f:d.JUc=function(a){if(a=e.isString(f)?e.LL(a,f):a,e.isNullOrUndefined(a))return a;var b=d.HL;return b?a=a.map(function(a){return e.pick(a,b)}):c.HL=e.keys(a[0]),a},c}return b.prototype.parse=function(a){var b=new DOMParser,c=b.parseFromString(a.trim(),"text/xml"),d=this.documentToJSObject(c);return Promise.resolve(d)},b.prototype.documentToJSObject=function(a){var b,c,d={},e=a.children;for(b=0,c=e.length;b<c;b++)this.elementToJSObject(e[b],d);return d},b.prototype.elementToJSObject=function(a,b){var c,d,e,f,g,h=a.children,i=h.length,j=a.nodeName;if(0===i)b[j]=a.textContent;else{for(c={},d=b[j],void 0!==d?Array.isArray(d)?b[j].push(c):b[j]=[d,c]:b[j]=c,e=a.attributes,f=0;f<e.length;f++)g=e[f],c[g.nodeName]=g.nodeValue;for(f=0;f<i;f++)this.elementToJSObject(h[f],c)}},b}(d.BasicReader),b.XmlReader=f},"./dist/src/dataSource/dataSource.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/dataSource/dataSource.js"),b),e(c("./dist/src/dataSource/dataSource.interface.js"),b),e(c("./dist/src/dataSource/utils.js"),b)},"./dist/src/dataSource/dataSource.interface.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0})},"./dist/src/dataSource/dataSource.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__assign||function(){return u=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},u.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.DataSource=b.ONCHANGE=b.DELETE=b.UPDATE=b.INSERT=b.CREATE=void 0,d=c("./dist/src/dataSource/dataTransport/localDataTransport.js"),e=c("./dist/src/dataSource/dataTransport/remoteDataTransport.js"),f=c("./dist/src/dataSource/event.js"),g=c("./dist/src/dataSource/dataReader/JsonReader.js"),h=c("./dist/src/dataSource/dataReader/ColumnJsonReader.js"),i=c("./dist/src/dataSource/dataReader/CsvReader.js"),j=c("./dist/src/dataSource/dataReader/XmlReader.js"),k=c("./dist/src/dataSource/utils.js"),l=c("Common"),m=null,n=void 0,b.CREATE="create",b.INSERT="insert",b.UPDATE="update",b.DELETE="delete",o="onBeforeSend",p="onFailed",q="onBeforeEnd",r="onReady",s="user cancel the request at step ",b.ONCHANGE="onChange";function v(a,b){var c=b;return"odata"!==a&&"odata4"!==a||!b.value?"graphql"!==a&&"rest"!==a||!b.data||(c=b.data):c=b.value,c}function w(a,b){var c,d,e={};for(c in a)a.hasOwnProperty(c)&&(d=b[c],e[c]=k.isNullOrUndefined(d)?a[c]:d);return e}function x(a,b){var c,d,e,f,g;if(k.isNullOrUndefined(a)||k.isNullOrUndefined(b))return a===b;if(c=Object.keys(a),d=Object.keys(b),c.length!==d.length)return!1;for(e=0,f=c;e<f.length;e++)if(g=f[e],a[g]!==b[g])return!1;return!0}function y(a,b){var c,d,e,f=[];for(c=0;c<b;c++){d={};for(e in a)a.hasOwnProperty(e)&&(d[e]=a[e].data[c]);f[c]=d}return f}function z(a){return"xml"===a?"xml":"csv"===a?"text":"json"}function A(a){var b,c,d,e,f,g,h=null===(b=a.schema)||void 0===b?void 0:b.type,i=a.remote;h&&i&&(c=i.read,c&&"object"==typeof c&&(c.dataType=z(h)),d=i.update,d&&"object"==typeof d&&(d.dataType=z(h)),e=i.delete,e&&"object"==typeof e&&(e.dataType=z(h)),f=i.create,f&&"object"==typeof f&&(f.dataType=z(h)),g=i.batch,g&&"object"==typeof g&&(g.dataType=z(h)))}t=function(){function a(a){this.H4c={};var c=this;Object.defineProperty(this,"options",{get:function(){return c.i6},set:function(a){var b,d,e,f,g,h,i,j;A(a),b=c.i6,c.i6=a,d=b&&b.remote&&b.remote.read&&b.remote.read.url,e=a&&a.remote&&a.remote.read&&a.remote.read.url,f=d!==e,c.I4c(a.remote,a.data),g=b&&b.schema,h=a&&a.schema,i=g&&h&&(g.type!==h.type||g.dataPath!==h.dataPath||g.countPath!==h.countPath),i&&c.J4c(a.schema),j=c.K4c,j&&(f||i)&&(c.L4c(),c.load())}}),c._events={},c.options=u({data:m,batch:!1},a),this.I4c(a.remote,a.data),c.bind([o,q,r,b.ONCHANGE,p],a),this.J4c(a.schema),c.L4c()}return a.prototype.I4c=function(a,b){this.NUc=a?new e.RemoteDataTransport(a):new d.LocalDataTransport({data:b||[]})},a.prototype.J4c=function(a){var b,c;a=a||{},c=a.type||"json","json"===c?b=new g.JsonReader(a):"columnJson"===c?b=new h.ColumnJsonReader(a):"csv"===c?b=new i.CsvReader(a):"xml"===c&&(b=new j.XmlReader(a)),this.OUc=b},a.prototype.L4c=function(){this._data={},this.M4c=0,this.U=[]},a.prototype.N4c=function(a,b,c){var d,e,f,g=this,h={};for(d in g._data)g._data.hasOwnProperty(d)&&(e=g._data[d],0!==b?(f=e.data.splice(a,b),h[d]={data:f}):a>=e.data.length?e.data[a]=c[d]:e.data.splice(a,0,c[d]));return g.M4c=g.M4c-b,c&&g.M4c++,y(h,b)},a.prototype.O4c=function(a,b){var c,d,e=this,f={};for(c in e._data)e._data.hasOwnProperty(c)&&(d=e._data[c],f[c]={data:d.data.slice(a,b)});return y(f,b-a)},a.prototype.P4c=function(a,b,c){var d,e;if(!k.isNullOrUndefined(b))if(d=this,c)for(e in b)Object.prototype.hasOwnProperty.call(d._data,e)&&(d._data[e].data[a]=b[e]);else for(e in d._data)d._data.hasOwnProperty(e)&&(d._data[e].data[a]=b[e])},a.prototype.ojb=function(a){var b,c=this,d={};for(b in c._data)c._data.hasOwnProperty(b)&&(d[b]=c._data[b].data[a]);return d},a.prototype.PUc=function(a){var b,c,d;return!(!a||!a.reload)||(b=this,c=this.QUc,d=b.M4c,0===d||(k.isNullOrUndefined(c)||d!==c,!1))},a.prototype.gBa=function(a,b){var c,d=this.H4c;return d[a]||(c=void 0,b?c=l.Common.l.Qa(a,b):(c=new Date(a),isNaN(c)&&(c=new Date(a.replace(" ","T")))),d[a]=c),d[a]},a.prototype.Q4c=function(a,b){return b?0===b.split("|").indexOf(a):!!a},a.prototype.R4c=function(a,b){return b&&(a=a.replace(b,".")),a=a.replace(/,/g,""),+a||0},a.prototype.S4c=function(a,b,c,d){if(d){if(!b||"number"===b)return a;a+=""}return"date"===b?"NULL"===a?null:this.gBa(a,c):"boolean"===b?this.Q4c(a,c):"number"===b?this.R4c(a,c):a},a.prototype.ggd=function(a,b){var c="number"==typeof a;return k.isNullOrUndefined(b)||k.isNullOrUndefined(a)||"string"!=typeof a&&!c?a:this.S4c(a,b.dataType,b.dataPattern,c)},a.prototype.T4c=function(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)&&(d=a[c])){if(e=b[c],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f)continue;b[c]=this.S4c(e,d.dataType,d.dataPattern,f)}},a.prototype.U4c=function(a,b,c){var d,e,f,g=this._data[a].data;for(d=0;d<g.length;d++)e=g[d],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f||(g[d]=this.S4c(e,b,c,f))},a.prototype.hgd=function(a,b){var c,d;a===b||k.isNullOrEmpty(b)||(c=this,c._data[b]=c._data[a],delete c._data[a],d=c.igd(a),c.jgd(a,k.isNullOrEmpty(d)?a:d,b))},a.prototype.igd=function(a){var b=this,c=b.i6.schema,d,e,f;if(!(k.isNullOrUndefined(c)||k.isNullOrUndefined(c.columns)||(d=c.columns,e=d[a],k.isNullOrUndefined(e)||(f=e.dataName,k.isNullOrEmpty(f)))))return f},a.prototype.jgd=function(a,b,c){var d=this,e=d.i6.schema,f,g;k.isNullOrUndefined(e)&&(d.i6.schema=e={}),f=e.columns,k.isNullOrUndefined(f)&&(e.columns=f={}),g=f[a],k.isNullOrUndefined(g)&&(f[a]=g={}),k.isNullOrEmpty(g.dataName)&&(g.dataName=b),k.isNullOrEmpty(c)||(f[c]=f[a],delete f[a])},a.prototype.kgd=function(a,b){var c,d,e,f,g,h,i;if(b=b||{},c=this,d=c.i6.schema,e=b.isServerToClient,f=b.isClone,!k.isNullOrUndefined(a)&&!k.isNullOrUndefined(d)&&!k.isNullOrUndefined(d.columns)){g=d.columns,h=[];for(i in g)k.isNullOrUndefined(g[i].dataName)||h.push(e?[g[i].dataName,i]:[i,g[i].dataName]);h.length>0&&(a=f?k.clone(a,!0):a,k.isArray(a)?a.forEach(function(a){c.lgd(h,a)}):k.isObject(a)&&c.lgd(h,a))}return a},a.prototype.lgd=function(a,b){a.forEach(function(a){var c=a[0],d=a[1];b[d]=b[c],delete b[c]})},a.prototype.mgd=function(){var a,b,c,d,e=this,f=e.i6.schema;if(!k.isNullOrUndefined(f)&&!k.isNullOrUndefined(f.columns)){a=f.columns,b={},c={};for(d in a)a.hasOwnProperty(d)&&(k.isNullOrUndefined(a[d].dataName)||(b[a[d].dataName]=d),(a[d].dataType||a[d].dataPattern)&&(c[d]={dataType:a[d].dataType,dataPattern:a[d].dataPattern}));return[b,c]}return[{},{}]},a.prototype.load=function(a){var c=this,d=c.options,e=d.remote,f=d.schema,g=c.RUc(a);return c.PUc(g)?(c.K4c=!0,c.Vpb(g).then(function(a){var b={type:"read",data:e&&e.read&&!k.isFunction(e.read)?v(e.read.adapter,a):a};return c.Wq(q,b)?Promise.reject({cancel:!0,type:"read",step:o}):c.OUc.parse(b.data)}).then(function(a){return c.QUc=c.OUc.total(a),c.OUc.read(a)}).then(function(a){var d,e,f,h,i,j,l,m;if(c._data=c._data||{},c.M4c=c.M4c||0,c.U=c.U||[],a){for(a=k.isArray(a)?a:[a],d=0,e=c.mgd(),f=e[0],h=e[1],i=0,j=a.length;i<j;i++)for(l in a[i])m=a[i][l],l=f[l]||l,c._data[l]||(c._data[l]={data:[]},c.U.push(l)),c._data[l].data[d+i]=c.ggd(m,h[l]);c.M4c=d+a.length,a=c.TUc(g).data,c.Wq(b.ONCHANGE,{action:b.INSERT,index:d,items:a})}return c.QUc=c.M4c,c.Wq(r,{type:"read",success:!0,items:a}),a}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:c.UUc(a);return c.Wq(r,{type:"read",success:!1,reason:b}),Promise.reject(b)})):Promise.resolve(c.TUc(g).data)},a.prototype.length=function(){return"number"==typeof this.QUc?this.QUc:this.M4c},a.prototype.setLength=function(a){var b=this,c=b._data,d=b.QUc;d?this.QUc=a:c&&(this.M4c=a)},a.prototype.TUc=function(a){var b,c=this,d=c.VUc(),e=0,f=c.M4c,g=d?c.WUc(e):0,h=c.XUc||[];for(d||(h=[]),b=[];f>0&&g<c.M4c;)h[g]||(b.push(c.ojb(g)),f--),g++;return{data:b}},a.prototype.V4c=function(a,b){var c,d,e=this,f=e.VUc(),g=0,h=e.M4c,i=f?e.WUc(g):0,j=e.XUc||[];for(f||(j=[]),c=[],d=0;h>0&&i<e.M4c;)j[i]||(a.indexOf(d)>-1&&(c[d]=e.ojb(i)),d++,h--),i++;return{data:c}},a.prototype.YUc=function(a){return a?this.V4c(a).data:this.TUc().data},a.prototype.cancelChanges=function(){var a,c,d,e,f=this,g=f.getHeldActions();g&&0!==g.length&&(a=f.ZUc,c=f.XUc||[],d=f.$Uc||[],e=[],k.forEach(g,function(g){var h=g.sourceIndex,i=g.type;i===b.UPDATE?(f.P4c(h,a[h]),d[h]=[!!d[h]&&d[h][0],!1]):i===b.DELETE?(c[h]=n,d[h]&&d[h][0]?e.push(h):d[h]&&d[h][1]&&(f.P4c(h,a[h]),d[h]=[!1,!1]),k.isNullOrUndefined(f.QUc)||(f.QUc+=1)):i===b.INSERT&&e.push(h)}),k.forEachRight(e,function(a){f.N4c(a,1),d.splice(a,1),k.isNullOrUndefined(f.QUc)||(f.QUc-=1)}),f.clearBatchCache_())},a.prototype.getChanges=function(){return this.ngd(!1)},a.prototype.isDataLengthChanged=function(){return this.getChanges().some(function(a){return"delete"===a.type||"insert"===a.type})},a.prototype.submitChanges=function(a){var c,d,e,f,g,h,i=this;return i.hasCachedActions()?(c=i.ZUc,d=i.XUc||[],e=i.$Uc||[],f=i.getHeldActions(),g=[],h=b.UPDATE,k.isNullOrUndefined(f)||f.forEach(function(a){i.kgd(a.dataItem),i.kgd(a.oldDataItem)}),i._Uc({body:f},"batch").then(function(j){var l,m,o,r={type:h,batch:!0,data:j};return i.Wq(q,r)?Promise.reject({cancel:!0,type:h,batch:!0,step:q}):(l=r.data,(l||[]).forEach(function(a){a.succeed&&a.data&&i.kgd(a.data,{isServerToClient:!0})}),l.length!==f.length,m=[],k.forEach(f,function(a,d){var f=l[d];f.succeed?a.type===b.UPDATE?(c&&(c[a.sourceIndex]=n),e[a.sourceIndex][1]=n):a.type===b.INSERT?(e[a.sourceIndex]=[],c[a.sourceIndex]=n,f.data&&i.P4c(a.sourceIndex,f.data)):a.type===b.DELETE&&g.push(a.sourceIndex):m.push({localAction:a,response:f})}),k.forEachRight(g,function(a){d.splice(a,1),i.N4c(a,1),c&&c.splice(a,1),e.splice(a,1)}),m.length>0?(o={type:h,errorData:m},i.Wq(p,{type:o})||(i.Aid=[],k.forEach(m,function(c,e){var f=c.response,g=c.localAction,h=g.sourceIndex;g.type===b.DELETE&&(d[h]=n),i.Bid(h,{type:g.type,success:!1,reason:f.reason}),a(h,f.reason,g.type)}))):delete i.Aid,Promise.resolve(i.TUc()))}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:i.UUc(a),c={type:h,reason:b};i.Wq(p,{type:c})})):Promise.resolve()},a.prototype.getHeldActions=function(){var a=this;return a.hasCachedActions()?a.ngd(!0):m},a.prototype.ngd=function(a){var c,d,e,f,g,h,i=this,j=[],k=i.$Uc||[],l=i.XUc||[],m=i.ZUc;for(e=0;e<i.M4c;e++){if(c=k[e],d=null,l[e]===!0)d={type:b.DELETE,dataItem:i.ojb(e)};else if(c&&c[0])d={type:b.INSERT,dataItem:i.ojb(e)};else if(c&&c[1]){if(f=m[e],g=i.ojb(e),!a){f=u({},f);for(h in f)f.hasOwnProperty(h)&&f[h]===g[h]&&(delete f[h],delete g[h])}d={type:b.UPDATE,dataItem:g,oldDataItem:f}}d&&(a?d.sourceIndex=e:d.index=this.ogd(e),j.push(d))}return j},a.prototype.clearBatchCache_=function(){var a=this;delete a.XUc,delete a.ZUc,delete a.Aid},a.prototype.hasCachedActions=function(){var a,b,c,d,e,f,g,h,i=this;if(!i.VUc())return!1;if(a=i.$Uc,b=i.XUc,!a&&!b)return!1;if(b)for(c=0,d=b;c<d.length;c++)if(e=d[c])return!0;if(a)for(f=0,g=a;f<g.length;f++)if(h=g[f],h&&(h[0]===!0||h[1]===!0))return!0;return!1},a.prototype.bind=function(a,b){var c,d,e,g,h,i,j=this;if(b)for(c=k.isArray(a)?a:[a],d=0,e=c;d<e.length;d++)g=e[d],h=k.isFunction(b)?b:b[g],h&&(i=j._events[g]=j._events[g]||new f.Event,i.addHandler(h,j))},a.prototype.unbind=function(a,b){var c,d=this;return k.isNullOrUndefined(a)?(k.forEach(d._events,function(a){a.removeAllHandlers()}),void(d._events={})):(c=d._events[a],void(c&&(b?c.removeHandler(b,d):c.removeAllHandlers())))},a.prototype.Wq=function(a,b){
var c=this,d=c._events[a];return!!d&&(b=b||{},b.cancel=!1,b.eventName=a,d.raise(c,b),b.cancel)},a.prototype.k9c=function(a){var b=this;return b._events.hasOwnProperty(a)&&b._events[a].hasHandlers},a.prototype.RUc=function(a){return a=u({},a)},a.prototype.aVc=function(a){return a},a.prototype.getDirtyIndexes=function(){var a=this,b=a.$Uc||[];return Object.keys(b).map(function(a){return parseInt(a,10)})},a.prototype.W4c=function(a){var b=this,c=b.$Uc||[];return a=b.WUc(a),c[a]||[]},a.prototype.isInserted=function(a){return this.W4c(a)[0]},a.prototype.isUpdated=function(a){return this.W4c(a)[1]},a.prototype.getErrorInfo=function(a){var b=this,c=b.Aid;if(!k.isNullOrUndefined(c))return a=b.WUc(a),c[a]},a.prototype.Bid=function(a,b){var c=this,d=c.Aid=c.Aid||[];d[a]=b},a.prototype.pgd=function(){this.$Uc=n,this.XUc=n,this.ZUc=n,this.Aid=n},a.prototype.X4c=function(a){var b=this,c=b.ZUc=b.ZUc||[];return c[a]},a.prototype.insertItem=function(a,c,d,e){var f=this;f.Y4c({action:b.INSERT,index:a,item:c}),d&&d({type:b.CREATE,success:!0})},a.prototype.updateItem=function(a,c,d,e){var f=this;f.Y4c({action:b.UPDATE,index:a,item:c}),d&&d({type:b.UPDATE,success:!0})},a.prototype.updateItemValues=function(a,c,d,e){var f=this;f.Y4c({action:b.UPDATE,index:a,item:c,l9c:!0}),d&&d({type:b.UPDATE,success:!0})},a.prototype.resetItem=function(a,c,d){var e=this,f=e.ZUc=e.ZUc||[];a=e.WUc(a),e.P4c(a,f[a]),e.clearChangedStatus(a),e.Bid(a),c&&c({type:b.UPDATE,success:!0})},a.prototype.saveItem=function(a,c,d){var e,f,g,h,i=this;a=i.WUc(a),e=i.$Uc||[],f=e[a]||[],g=f[0],h=f[1],f.length>0&&(g||h)&&i.Z4c(a,i.ojb(a),g?b.INSERT:b.UPDATE,c,d)},a.prototype.Z4c=function(a,c,d,e,f){var g=this,h=d===b.INSERT,i=h?b.CREATE:b.UPDATE,j=g.VUc(),k=g.cVc(i),l=g.SUc();return j||!k||l?void(l&&(g.$Uc[a]=[],g.ZUc[a]=n,e&&e({type:i,success:!0}))):(c=g.kgd(c,{isClone:!0}),void g._Uc({body:c},h?b.CREATE:b.UPDATE).then(function(b){var d,f={type:i,data:w(c,b)};return g.Wq(q,f)?Promise.reject({cancel:!0,type:i,step:q}):(g.kgd(f.data,{isServerToClient:!0}),g.P4c(a,f.data),g.$Uc[a]=[],g.ZUc[a]=n,g.Bid(a),d={type:i,success:!0,items:[f.data]},e&&e(d),g.Wq(r,d),n)}).catch(function(b){var c=b&&b.cancel===!0?s+b.step:g.UUc(b),d={type:i,success:!1,reason:c};g.Bid(a,d),g.Wq(p,{type:d}),f(d)}))},a.prototype.Y4c=function(a){var c,d,e,f,g,h,i,j,l=this,m=l.VUc(),o=l.ZUc=l.ZUc||[];m&&(c=l.XUc=l.XUc||[]),d=a.action,e=a.index,f=a.item,g=a.l9c,e=l.WUc(e),l.$Uc=l.$Uc||[],h=l.$Uc,d===b.INSERT?(0===l.M4c&&0===l.U.length&&l.G6c(),l.M4c<e&&(l.M4c=e),i=e,k.isNullOrUndefined(i)&&(i=l.M4c),l.N4c(i,0,f),o.length>=e?o.splice(e,0,u({},f)):o[e]=u({},f),m&&(c.length>=e?c.splice(e,0,n):c[e]=n),h.length>=e?h.splice(e,0,[!0]):h[e]=[!0],k.isNullOrUndefined(l.QUc)||(l.QUc+=1),l.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item]})):d===b.UPDATE&&(j=l.ojb(e),o[e]||(o[e]=u({},j)),l.P4c(e,f,g),l.$Uc[e]?l.$Uc[e]=[l.$Uc[e][0],!0]:l.$Uc[e]=[!1,!0],x(f,o[e])&&l.clearChangedStatus(e),l.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item],oldItems:[j]}))},a.prototype.clearChangedStatus=function(a){var b=this;b.$Uc[a][1]=!1,b.$Uc[a][0]!==!0&&(b.ZUc[a]=n)},a.prototype.get=function(a){var b,c,d,e,f=this,g=f._data;if(a=f.WUc(a),g&&a<f.M4c){for(b={},c=0,d=f.U;c<d.length;c++)e=d[c],b[e]=g[e].data[a];return b}return n},a.prototype.getFieldValue=function(a,b){var c=this,d=c._data;return b=c.WUc(b),d&&d[a]&&b<c.M4c?d[a].data[b]:n},a.prototype.getFieldOriginalValue=function(a,b){var c,d=this,e=d._data;return b=d.WUc(b),e&&e[a]&&b<d.M4c?(c=d.X4c(b),k.isNullOrUndefined(c)?e[a].data[b]:c[a]):n},a.prototype.remove=function(a,c,d,e){var f,g,h,i=this;a<0||a>=i.length()||(f=b.DELETE,i.VUc()||!i.cVc(b.DELETE)||i.SUc()||i.isInserted(a)?(i.aW(a,c),g={type:f,success:!0},d&&d(g)):(h=i.O4c(a,a+c),i.kgd(h),i._Uc({body:h},b.DELETE).then(function(b){if(i.Wq(q,{type:f,data:h}))return Promise.reject({cancel:!0,type:f,step:q});i.aW(a,c),i.kgd(h,{isServerToClient:!0}),i.Bid(a);var e={type:f,success:!0,items:[h]};return d&&d(e),i.Wq(r,e),n}).catch(function(b){var c=b&&b.cancel===!0?s+b.step:i.UUc(b),d={type:f,success:!1,reason:c};i.Bid(a,d),i.Wq(p,{type:d}),e(d)})))},a.prototype.aW=function(a,c){var d,e,f,g,h,i,j,l=this,m=l.VUc(),n=l.$Uc||[],o=l.ZUc||[];if(m){for(e=void 0,f=l.XUc=l.XUc||[],g=c,h=[],d=[],e=l.WUc(a),i=e;i<l.M4c&&(f[i]!==!0&&d.length<c&&(d.push(l.ojb(i)),h.push(i),f[i]=!0,g-=1),0!==g);i++);k.forEachRight(h,function(a){n[a]&&n[a][0]&&(f.splice(a,1),n.splice(a,1),o.splice(a,1),l.N4c(a,1))})}else d=l.N4c(a,c),n.splice(a,c),o.splice(a,c);j=d.length,k.isNullOrUndefined(l.QUc)||(l.QUc-=j,l.QUc=Math.max(l.QUc,0)),l.Wq(b.ONCHANGE,{action:b.DELETE,items:d})},a.prototype.G6c=function(){var a,b,c=this,d=null===(a=c.options.schema)||void 0===a?void 0:a.columns;if(d)for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&(c._data[b]={data:[]},c.U.push(b))},a.prototype.SUc=function(){return k.isNullOrUndefined(this.options.remote)},a.prototype.VUc=function(){var a=this.options;return(a.batch||!1)&&!this.SUc()},a.prototype.cVc=function(a){var b=this,c=b.options,d=b.NUc;return!!c.autoSync&&!k.isNullOrUndefined(d.i6[a])},a.prototype._Uc=function(a,c){var d=this,e=c||b.UPDATE;return a=d.NUc.setupRequestOptions(a,c||b.UPDATE),a?d.Wq(o,{type:e,requestParams:a})?Promise.reject({cancel:!0,type:e,step:o}):d.NUc.postData(a):Promise.reject({cancel:!0,type:e,step:o})},a.prototype.Vpb=function(a){var b=this;return a=b.aVc(a),a=b.NUc.setupRequestOptions(a,"read"),a?b.Wq(o,{type:"read",requestParams:a})?Promise.reject({cancel:!0,type:"read",step:o}):b.NUc.getData(a):Promise.reject({cancel:!0,type:"read",step:o})},a.prototype.UUc=function(a){return k.isString(a)?a:a instanceof Error?a.message:"some error happened"},a.prototype.WUc=function(a){var b,c,d,e,f=this.XUc;if(k.isNullOrUndefined(f)||0===f.length)return a;for(b=0,c=0,d=0,e=f.length;d<=e;d++)if(f[d])c+=1;else{if(b===a)break;b+=1}return a+c},a.prototype.ogd=function(a){var b,c,d=this.XUc;if(k.isNullOrUndefined(d)||0===d.length)return a;for(b=0,c=Math.min(d.length,a);b<=c;b++)d[b]&&(a-=1);return a},a}(),b.DataSource=t},"./dist/src/dataSource/dataTransport/localDataTransport.js":function(a,b,c){"use strict";var d,e=this&&this.__assign||function(){return e=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},e.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.LocalDataTransport=void 0,d=function(){function a(a){a&&(this._data=a.data,this.i6=e({},a))}return a.prototype.getData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.postData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.setupRequestOptions=function(a,b){return{}},a}(),b.LocalDataTransport=d},"./dist/src/dataSource/dataTransport/remoteDataTransport.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__assign||function(){return o=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},o.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.RemoteDataTransport=void 0,c("./node_modules/whatwg-fetch/fetch.js"),d=c("./node_modules/fetch-jsonp/build/fetch-jsonp.js"),e=c("./dist/src/dataSource/utils.js"),f=null,g=void 0,h="jsonp",i="read",j="create",k="update",l="delete",m="Content-Type",n=function(){function a(a){var b=this;b.i6=o({},a)}return a.prototype.getData=function(a){var b=this,c=this,f=c.i6[a.requestType],i=a.dataType,j=i===h?d:fetch;return a.requestData=g,a.requestType=g,e.isFunction(f)?f(a):j(a.url,a).then(function(a){if(!a.ok)throw a;return b.dVc(i)?a.json():a.text()})},a.prototype.postData=function(a){var b=this,c=this,d=c.i6[a.requestType],f=a.dataType,h=a.requestData;return a.requestData=g,a.requestType=g,e.isFunction(d)?d(h,a):fetch(a.url,a).then(function(a){if(!a.ok)throw a;return b.dVc(f)?a.json():a.text()})},a.prototype.dVc=function(a){return void 0===a||"json"===a||a===h},a.prototype.setupRequestOptions=function(a,b){var c,d,e,f,g,n,p,q;if(a=a||{},c=this,d=c.i6[b],d)return e=d.body,f=a.body,f?(a.headers=a.headers||{},c.i6.dataConverter?(a.body=f=c.i6.dataConverter(f,b||i),a.headers[m]="application/plain;"):(a.body="string"==typeof f?f:JSON.stringify(f),a.headers[m]="application/json; charset=utf-8")):e&&(a.body="string"==typeof e?e:JSON.stringify(e),a.headers={},a.headers[m]="application/json; charset=utf-8"),p=d.method,b===i?(d.dataType===h&&(g={mode:"no-cors"}),n={method:p||"GET"}):b===j||b===k||"batch"===b?n={method:p||"POST"}:b===l&&(n={method:p||"DELETE"}),q=o(o(o(o(o({},d),n),g),a),{requestType:b,requestData:f})},a}(),b.RemoteDataTransport=n},"./dist/src/dataSource/event.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.Event=b.EventHandler=void 0,d=function(){function a(a,b,c){var d=this;d.handler=a,d.owner=b,d.priority=c}return a}(),b.EventHandler=d,e=null,f=function(){function a(){this.qwa=[]}return Object.defineProperty(a.prototype,"hasHandlers",{get:function(){return this.qwa.length>0},enumerable:!1,configurable:!0}),a.prototype.addHandler=function(a,b,c){void 0===c&&(c=1);var e=this,f=new d(a,b,c);e.qwa.push(f),e.sortHandlers()},a.prototype.removeHandler=function(a,b){var c,d,e=this,f=e.qwa,g=f.length;for(c=0;c<g;c++)if(d=f[c],d.handler===a&&d.owner===b){e.qwa.splice(c,1);break}},a.prototype.sortHandlers=function(){this.qwa.sort(function(a,b){var c=a.priority,d=b.priority;return c<d?1:c>d?-1:0})},a.prototype.removeHandlersByPriority=function(a){var b,c,d=this,f=d.qwa,g=f.length,h=e,i=e;for(b=0;b<g;b++)if(c=f[b],c.priority===a)h===e&&(h=b),i=b;else if(h!==e)break;h!==e&&i!==e&&d.qwa.splice(h,i-h+1)},a.prototype.removeAllHandlers=function(){this.qwa.length=0},a.prototype.raise=function(a,b){var c,d,f,g,h,i=!1,j=function(){i=!0};for(b===e?b={stopPropagation:j}:b.stopPropagation=j,c=this,d=c.qwa.length,f=c.qwa.slice(0,d),g=0;g<d&&!i;g++)h=f[g],h.handler.call(h.owner,a,b)},a}(),b.Event=f},"./dist/src/dataSource/utils.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.getUniqueArray=b.LL=b.format=b.swapArrayItems=b.getActualType=b.isNullOrEmpty=b.isNullOrUndefined=b.isNull=b.isUndefined=b.map=b.pick=b.isString=b.zipObject=b.clone=b.findIndex=b.indexOf=b.reduce=b.keys=b.forEachRight=b.forEach=b.isBoolean=b.isNumber=b.isFunction=b.isObject=b.isArray=void 0,d=c("Common"),e=c("CalcEngine"),f=d.Common.CultureManager,g=d.Common.o,h=d.Common.l,b.isArray=Array.isArray;function j(a){return a&&!b.isArray(a)&&"object"==typeof a}b.isObject=j;function k(a){return"function"==typeof a}b.isFunction=k;function l(a){return"number"==typeof a}b.isNumber=l;function m(a){return"boolean"==typeof a}b.isBoolean=m;function n(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=0;d<a.length;d++)c(a[d],d,a);else for(e=Object.keys(a),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEach=n;function o(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=a.length-1;d>=0;d--)c(a[d],d,a);else for(e=Object.keys(a),e.reverse(),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEachRight=o;function p(a){return Object.keys(a)}b.keys=p;function q(a,c,d){if(b.isArray(a))return a.reduce(c,d);throw Error("NOT SUPPORT")}b.reduce=q;function r(a,b,c){return void 0===c&&(c=0),a.indexOf(b,c)}b.indexOf=r;function s(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c],c,a))return c;return-1}b.findIndex=s;function t(a,b){var c,d,e,f,g,h,i;if(void 0===b&&(b=!1),a&&a instanceof Array)return a.map(function(a){return t(a,b)});if(a&&"object"==typeof a){for(c={},d=p(a),e=0,f=d;e<f.length;e++)g=f[e],h=a[g],b?(i=C(h),"object"===i||"array"===i?c[g]=t(h,b):c[g]=h):c[g]=h;return c}return a}b.clone=t;function u(a,b){var c,d,e;for(void 0===a&&(a=[]),void 0===b&&(b=[]),c={},d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e];return c}b.zipObject=u;function v(a){return"string"==typeof a}b.isString=v;function w(a,b){var c,d,e,f;if(v(b))return a[b];for(c={},d=0,e=b;d<e.length;d++)f=e[d],c[f]=a[f];return c}b.pick=w;function x(a,c){if(b.isArray(a))return a.map(c);throw Error("NOT SUPPORT")}b.map=x;function y(a){return void 0===a}b.isUndefined=y;function z(a){return null===a}b.isNull=z;function A(a){return y(a)||z(a)}b.isNullOrUndefined=A;function B(a){return""===a||A(a)}b.isNullOrEmpty=B;function C(a){var b=Object.prototype.toString.call(a);return b.match(/\[\w+\s(\w+)\]/)[1].toLowerCase()}b.getActualType=C;function D(a,b,c,d){b<0||b>a.length||c<0||c>a.length||b===c||d<=0||a.splice.apply(a,i([c-(b<c?d-1:0),0],a.splice(b,d)))}b.swapArrayItems=D;function E(a){return"string"==typeof a&&("="===a.charAt(0)||a.indexOf("{{")>=0&&a.indexOf("}}")>=0)}function F(a,b){var c,i,j,k,l;if(A(a)||""===a)return"";if(c=E(b),!b||"General"===b||c)return"boolean"==typeof a||a instanceof Boolean?(e&&(a=a?e.getBoolean().boolean_true:e.getBoolean().boolean_false),(""+a).toUpperCase()):a instanceof Date?(i=f.q4(f.culture()).DateTimeFormat,j=i.shortDatePattern,0===a.getHours()&&0===a.getMinutes()&&0===a.getSeconds()&&0===a.getMilliseconds()||(j=i.defaultDatePattern),h.Vb(a,j)):("number"==typeof a&&(a=g.nb(""+a)),""+a);try{return k=d.Formatter&&d.Formatter.GeneralFormatter,k?(l=null,l="string"==typeof b?new k(b):b,l.format(a,{})):""+a}catch(b){return""+a}}b.format=F;function G(a,b){var c,d;if(A(a)||A(b))return a;for(c=b.split(".");c.length>0;)d=c.shift(),a=a[d];return a}b.LL=G;function H(a){var b,c,d,e,f;if(a&&a.length>0){for(b={},c=[],d=0,e=a;d<e.length;d++)f=e[d],b[f]||(b[f]=!0,c.push(f));return c}return a}b.getUniqueArray=H},"./dist/src/interfaces/conditionalFormatOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.c=void 0,b.c=0},"./dist/src/interfaces/interface.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.RelationshipMap=b.RowColumnStates=b.StateRuleDirection=b.DEFAULT_VIEW_NAME=void 0,b.DEFAULT_VIEW_NAME="defaultView",function(a){a[a.none=0]="none",a[a.row=1]="row",a[a.column=2]="column",a[a.both=3]="both"}(d=b.StateRuleDirection||(b.StateRuleDirection={})),function(a){a[a.hover=1]="hover",a[a.readonly=4]="readonly",a[a.active=16]="active",a[a.selected=32]="selected",a[a.dirty=64]="dirty",a[a.inserted=128]="inserted",a[a.updated=256]="updated"}(e=b.RowColumnStates||(b.RowColumnStates={})),function(a){a[a.OneToOne=0]="OneToOne",a[a.OneToMany=1]="OneToMany"}(f=b.RelationshipMap||(b.RelationshipMap={}))},"./dist/src/interfaces/styleOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.s=void 0,b.s=0},"./dist/src/interfaces/validatorOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.v=void 0,b.v=0},"./dist/src/relationship.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.Relationship=void 0,d=c("./dist/src/interfaces/interface.js"),e=c("./dist/src/dataSource/utils.js"),f=void 0,g=function(){function a(a,b,c,d,e,f){this.sourceTable=a,this.sourceFieldName=b,this.sourceRelationshipName=c,this.targetTable=d,this.targetFieldName=e,this.targetRelationshipName=f,c&&(this.sourceField=a.FUc(b,c,d,e,this)),f&&(this.targetField=d.FUc(e,f,a,b,this))}return a.prototype.e9c=function(a){return a===this.targetRelationshipName},a.prototype.Fb=function(){this.sourceTable&&this.sourceTable.QWc(this),this.targetTable&&this.targetTable.QWc(this)},a.prototype.f9c=function(a){return this.relationshipMap===d.RelationshipMap.OneToMany&&a===this.sourceRelationshipName?d.RelationshipMap.OneToOne:this.relationshipMap},a.prototype.g9c=function(){var a=this.sourceTable,b=this.sourceFieldName;if(a.h9c())return a.yVc(b)&&!a.i9c()?d.RelationshipMap.OneToOne:d.RelationshipMap.OneToMany},a.prototype.j9c=function(a){var b=this.relationshipMap;return e.isNullOrUndefined(b)&&(b=this.relationshipMap=this.g9c()),e.isNullOrUndefined(b)?a:b===d.RelationshipMap.OneToOne?{Nc:"object"}:{Nc:"array"}},a.prototype.GUc=function(){var a,b,c,d,f,g,h,i,j;function k(a,b,c){a[b]?(a[b].push(c),a.Nc="array"):a[b]=[c]}for(a=this.sourceField.HUc={Nc:"object"},b=this.targetField.HUc=this.j9c({}),c=this.j9c({Nc:"object"}),d=this.sourceTable.getDataSync(),f=this.targetTable.getDataSync(),g=0;g<d.length;g++)h=d[g][this.sourceFieldName],e.isNullOrUndefined(h)||k(c,h,g);for(i=function(d){var g=f[d][j.targetFieldName];e.isNullOrUndefined(g)||c[g]&&(b[d]=c[g],c[g].forEach(function(b){k(a,b,d)}))},j=this,g=0;g<f.length;g++)i(g);this.targetField.type=c.Nc,this.sourceField.type=a.Nc},a.prototype.Nm=function(){this.sourceField.HUc=f,this.targetField.HUc=f,this.targetTable.D4c(),this.sourceTable.D4c()},a}(),b.Relationship=g},"./dist/src/table/calcField.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CalcField=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b,c){var d,e=a.call(this)||this;e.calcSource=c.bSc,e.calcService=e.calcSource.getCalcService(),e.rOa=b;try{d=e.expression=e.calcService.parse(e.calcSource,b,0,0),e.calcService&&d&&(e.ah=e.calcService.getGlobalSourceModel(),e.ah.Ig(e,0,0,d,d,!0))}catch(a){}return e.Xm=[],e}return b.prototype.getKey=function(){var a=this;return"T:"+a.calcSource.sj.name+":"+a.rOa},b.prototype.fh=function(){this.ZAb().pg(this,3)},b.prototype.ZAb=function(){return this.calcService},b.prototype.Ik=function(){this.QV()},b.prototype.QV=function(){this.Xm=[]},b.prototype.getValue=function(a){if(!this.expression)return"Invalid Formula";var b=this.Xm[a];return e.isUndefined(b)?(this.calcSource.L$a(a),b=this.Xm[a]=this.calcService.evaluateExpression(this.calcSource,this.expression,{row:a,col:0})):b},b.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},b}(d.BaseCalc),b.CalcField=f},"./dist/src/table/table.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/table/tableEvents.js"),b),e(c("./dist/src/table/table.js"),b)},"./dist/src/table/table.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n;Object.defineProperty(b,"__esModule",{value:!0}),b.Table=b.updateFilterIndexesCacheOnRemove=b.updateFilterIndexesCacheOnUpdate=b.updateFilterIndexesCacheOnInsert=b.generateFilterIndexCache=void 0,d=c("./dist/src/dataSource/dataSource.js"),e=c("./dist/src/calculation/calcSource.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/view/view.js"),h=c("./dist/src/interfaces/interface.js"),i=c("./dist/src/table/tableEvents.js"),j=c("./dist/src/table/calcField.js"),k=c("./dist/src/table/tableField.js"),l=null,m=void 0;function o(a,b,c){var d={syncDone:!1,asyncCount:0,args:void 0,succeededArgs:void 0,failedArgs:void 0,onSucceeded:a,onFailed:b,onEnd:c,invoke:function a(){0===d.asyncCount&&d.syncDone&&(d.failedArgs?d.onFailed&&d.onFailed(d.failedArgs):d.onSucceeded&&d.onSucceeded(d.succeededArgs),d.onEnd&&d.onEnd(d.succeededArgs||d.failedArgs))},execute:function a(b){b&&(d.onEnd=b),d.syncDone=!0,d.invoke()},suspend:function a(){return d.asyncCount++,{succeed:function a(b){d.succeededArgs=b,d.resume()},fail:function a(b){d.failedArgs=b,d.resume()}}},resume:function a(){d.asyncCount--,d.invoke()}};return d}function p(a){return new Promise(function(b,c){a.then(function(a){b(a)}).catch(function(a){c(a)})})}function q(a){return void 0===a&&(a=0),new Promise(function(b,c){setTimeout(function(){b("timeout")},a)})}function r(a){var b=a.callback,c=a.timeout,d=void 0===c?5e3:c,e=a.retryCount,f=void 0===e?1:e;return Promise.race([b(),q(d)]).then(function(a){if("timeout"===a){if(f>0)return r({callback:b,retryCount:--f});throw"timeout"}return Promise.resolve(a)})}function s(a,b){return t(a.map(function(a){return function(){return new Promise(a)}}),b)}function t(a,b){var c=[];return a.reduce(function(a,d){return a.then(function(a){return c.push(Promise.resolve(a)),p(b?r({callback:d,timeout:b.timeout,retryCount:b.retryCount}):d())})},Promise.resolve({})).then(function(a){return c.shift(),c.push(Promise.resolve(a)),Promise.all(c)})}function u(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)){d=a[c];for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],d===f&&d.OG))return!0}}function v(a,b){return u(b.views,a.t9c)}function w(a,b,c,d){var e,g,h,i,j,k,l;if(0!==b){for(h=c&&c.dataType,i=c&&c.dataMap,j=!!h,k=0;k<b;k++)l=d(k),i&&!f.isNullOrUndefined(i[l])&&(l=i[l]),j||f.isNullOrUndefined(l)||(g=l,j=!0),l instanceof Date&&(l=l.toISOString()),e||(e={}),e[l]||(e[l]=[]),e[l]&&e[l].push(k);return h?e.CL=h:e.CL=j?typeof g:"object",e}}b.generateFilterIndexCache=w;function x(a,b,c,d){var e,g,h,i,j;for(e in a)a.hasOwnProperty(e)&&(g=a[e],h=d&&d[e],i=h&&h.dataMap,g&&(j=c[e],i&&!f.isNullOrUndefined(i[j])&&(j=i[j]),j instanceof Date&&(j=j.toISOString()),g[j]?g[j].push(b):g[j]=[b]))}b.updateFilterIndexesCacheOnInsert=x;function y(a,b,c,d,e,g){var h,i=a[c],j=g&&g.dataMap;i&&e!==d&&(j&&(f.isNullOrUndefined(j[d])||(d=j[d]),f.isNullOrUndefined(j[e])||(e=j[e])),d instanceof Date&&(d=d.toISOString()),e instanceof Date&&(e=e.toISOString()),h=i[d],h&&(h.length>1?h.splice(h.indexOf(b),1):delete i[d],i[e]?i[e].push(b):i[e]=[b]))}b.updateFilterIndexesCacheOnUpdate=y;function z(a,b,c){var d,e,g,h,i;for(d in a)if(a.hasOwnProperty(d)&&(e=a[d]))for(g in e)if(e.hasOwnProperty(g)&&f.isArray(e[g])&&(h=e[g],f.isArray(h))){for(i=0;i<h.length;i++)h[i]>=b+c?h[i]-=c:h[i]>=b&&h[i]<b+c&&(h.splice(i,1),i--);0===h.length&&delete e[g]}}b.updateFilterIndexesCacheOnRemove=z,n=function(){function a(a,b){this.jVc={},this.$4c={},this.u9c=0,Object.defineProperty(this,"name",{get:function(){return this.Cj},set:function(a){var b,c,d,e,f=this.Cj;if(this.Cj=a,b=this.nVc){for(c in this.t9c)this.t9c.hasOwnProperty(c)&&(d=this.t9c[c],d.v9c(f,a));e=b.tables,delete e[f],e[a]=this}}}),Object.defineProperty(this,"options",{get:function(){return this._dataSource.options},set:function(a){this.mVc=!0,this._dataSource.options=a}}),this.name=a;var c;c=b instanceof d.DataSource?b:new d.DataSource(b),this._dataSource=c,this.views={},this.t9c={},this.HL=[],this.kVc={},this.lVc=[],this.mVc=!0,this.Ze={}}return a.prototype.d9c=function(a,b,c){var d,e,g;(f.isNullOrUndefined(b)||""===b)&&(b="*"),"="===b[0]?(d=this.C4c(b),d.gmb(0,a,c)):(e=this.Ze[b],e||(e=this.Ze[b]={}),g=a.getKey(),c?e[g]=a:delete e[g])},a.prototype.Bg=function(a){var b,c,d;a.indexOf(".")>-1&&(a=a.split(".")[0]),b=this.Ze[a];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh());b=this.Ze["*"];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh())},a.prototype.IUc=function(a){var b,c;if(this.nVc=a,a)this.bSc=new e.DataManagerCalcSource(a.Wu,this);else{this.bSc=l;for(b in this.t9c)this.t9c.hasOwnProperty(b)&&(c=this.t9c[b],c.w9c(this))}},a.prototype.Ofd=function(a,b,c){var d=this.bSc;return d.getCalcService().parse(d,a,b||0,c||0)},a.prototype.Pfd=function(a,b,c){var d=this.bSc;return d.L$a(b),d.getCalcService().evaluateExpression(d,a,{row:b||0,col:c||0})},a.prototype.getDataSync=function(a){return this._dataSource.YUc(a)},a.prototype.Pid=function(a,b){var c,d,e,f,g,h=this;if(a){if(a.indexOf(h)>=0)return l}else{if(h.ehd)return h.ehd;c=!0,a=[],b=[]}for(a.push(h),b.push(new Promise(function(a){return h.mVc?h.fetch().then(a):void a(null)})),d=h.HL,e=0;e<d.length;e++)f=d[e],g=f.targetTable,g&&g.Pid(a,b);if(c)return h.ehd=Promise.all(b),h.ehd},a.prototype.fetch=function(a){var b,c,d=this;return d.F4c&&(b=d.columns),c=d.length(),d._dataSource.load({reload:a}).then(function(a){var e,g,h,i,j,k,l,n,o,p=d._dataSource.options.schema;if(d.mVc&&(e=d.get(0),f.isNullOrUndefined(e)&&p&&p.columns&&(e=p.columns),e&&(g=f.keys(e),h=d.columns={},i=d.HL,g.forEach(function(a){var c=b&&b[a];h[a]=d._4c(a,c),i.push({name:a})})),d.mVc=!1),p&&p.columns){j=p.columns,k=[];for(l in j)j[l]&&j[l].indexed&&k.push(l);d.t4c(k)}if(d.createIndexes(d.lVc),d.F4c=!1,c!==d.length()){n=d.views;for(o in n)n.hasOwnProperty(o)&&(n[o].QVc=m)}return d._dataSource.pgd(),Promise.resolve(a)})},a.prototype._4c=function(a,b){var c,d,e=this,g={name:a,value:a};if(!f.isNullOrUndefined(b)){b.value=void 0,b.name=void 0;for(d in b)b.hasOwnProperty(d)&&!f.isNullOrUndefined(b[d])&&(g[d]=b[d]);c=b.ny,delete b.ny}return Object.defineProperty(g,"dataType",{get:function(){return c},set:function(a){if(c!==a){c=a,e._dataSource.U4c(this.name,this.dataType,this.dataPattern);var b=this.value;e.Nm(b),e.a5c(b)}}}),Object.defineProperty(g,"mappedName",{get:function(){return this.value},set:function(a){if(this.value!==a&&!f.isNullOrEmpty(a)){var b=this.value;e._dataSource.hgd(b,a),e.Nm(b),e.a5c(a),e.qgd(b,a),e.rgd(b,a),e.HL.forEach(function(c){c.name===b&&(c.name=a)}),e.lVc=e.lVc.map(function(c){return c===b?a:c}),e.columns[a]=e.columns[b],delete e.columns[b],this.name=this.value=a}}}),Object.defineProperty(g,"relationship",{get:function(){var a,b,c,d=e.nVc.relationships;for(a=0,b=d;a<b.length;a++){if(c=b[a],c.sourceTable===e&&c.sourceFieldName===this.value)return{table:c.targetTable,field:c.targetFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName};if(c.targetTable===e&&c.targetFieldName===this.value)return{table:c.sourceTable,field:c.sourceFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName}}},set:function(a){var b,c,d,f=e.nVc.relationships;for(b=0,c=f;b<c.length;b++)if(d=c[b],d.sourceRelationshipName===a.sourceName){e.nVc.removeRelationship(d.sourceRelationshipName);break}a.table&&a.field&&e.nVc.addRelationship(e,this.value,a.sourceName,a.table,a.field,a.targetName)}}),g},a.prototype.length=function(){return this._dataSource.length()},a.prototype.getDirtyIndexes=function(){return this._dataSource.getDirtyIndexes()},a.prototype.isInserted=function(a){return this._dataSource.isInserted(a)},a.prototype.isUpdated=function(a){return this._dataSource.isUpdated(a)||this.x9c(a)},a.prototype.getErrorInfo=function(a){return this._dataSource.getErrorInfo(a)},a.prototype.x9c=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.u9c++,b=0;b<j.length;b++)if(c=j[b],d=c.targetTable,e=c.HUc,d&&v(d,i)&&e&&e[a]&&!d.u9c)for(f=0,g=e[a];f<g.length;f++)if(h=g[f],d.isUpdated(h))return i.u9c--,!0;i.u9c--},a.prototype.insertItem=function(a,b,c,d){var e=this,f={index:a,data:b};this.Wq(i.Events.ItemInserting,f),this._dataSource.insertItem(a,b,function(d){e.qVc(a,b),e.g5c(a,b),e.Nm(),e.Wq(i.Events.ItemInserted,f),c&&c(d)},d)},a.prototype.updateItem=function(a,b,c,d){this._dataSource.updateItem(a,b,c,d)},a.prototype.Skc=function(a,b,c,d,e,f){var g=this,h=b[c],j={index:a,data:b,field:c,originalValue:d,newValue:h};this.Wq(i.Events.ItemUpdating,j),this._dataSource.updateItem(a,b,function(b){g.wVc(a,d,h),g.h5c(a,c,d,h),g.Nm(),g.Wq(i.Events.ItemUpdated,j),e&&e(b)},f)},a.prototype.updateItemValue=function(a,b,c,d,e){var f,g,h=this,j=this._getValueByField(b,a),k=this.fVc(a);k[b]=c,g={index:a,data:k,field:b,originalValue:j,newValue:c},this.Wq(i.Events.ItemUpdating,g),this._dataSource.updateItemValues(a,(f={},f[b]=c,f),function(e){h.wVc(a,j,c),h.h5c(a,b,j,c),h.Nm(),h.Wq(i.Events.ItemUpdated,g),d&&d(e)},e)},a.prototype.resetItem=function(a,b,c){var d,e,f,g,h,j,k=this,l=o(b,c);return this.y9c(a,l.suspend),this._dataSource.isUpdated(a)&&(e=l.suspend(),f=e.succeed,g=e.fail,h=this.fVc(a),j=this.j5c(a),this.Wq(i.Events.ItemResetting,{index:a}),d=this._dataSource.resetItem(a,function(b){k.w5c(a,h,j),k.Nm(),k.Wq(i.Events.ItemReset,{index:a,originalData:h,dataBeforeChanged:j}),f(b)},g)),l.execute(),d},a.prototype.w5c=function(a,b,c){var d,e,g,h=this,i=h.columns;if(!f.isNullOrUndefined(b)&&!f.isNullOrUndefined(c))for(d in i)i.hasOwnProperty(d)&&(e=i[d],g=e.value instanceof Function?e.value.name:e.value,h.h5c(a,g,b[g],c[g]))},a.prototype.y9c=function(a,b){var c,d,e=this,f=e.HL;for(e.u9c++,c=function(c){var d,g,h,i,j,k,l,m=f[c],n=m.targetTable,o=m.HUc;if(n&&v(n,e)&&o&&o[a]&&!n.u9c){for(d=[],g=0,h=o[a];g<h.length;g++)i=h[g],n.isInserted(i)?d.push(i):n.isUpdated(i)&&(j=b(),k=j.succeed,l=j.fail,n.resetItem(i,k,l));d.length>0&&d.sort(function(a,b){return b-a}).forEach(function(a){var c=b(),d=c.succeed,e=c.fail;n.Hzb(a,1,d,e)})}},d=0;d<f.length;d++)c(d);e.u9c--},a.prototype.saveItem=function(a,b,c){var d,e,f,g,h=this,j=o(b,c),k=j.suspend(),l=k.succeed,m=k.fail;return this.z9c(a,l,m),(this._dataSource.isUpdated(a)||this._dataSource.isInserted(a))&&(e=j.suspend(),f=e.succeed,g=e.fail,this.Wq(i.Events.ItemSaving,{index:a}),d=this._dataSource.saveItem(a,function(b){h.Nm(),h.Wq(i.Events.ItemSaved,{index:a}),f(b)},g)),j.execute(),d},a.prototype.z9c=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n=o(b,c),p=n.suspend,q=this,r=q.HL;for(q.u9c++,d=0;d<r.length;d++)if(e=r[d],f=e.targetTable,g=e.HUc,f&&v(f,q)&&g&&g[a]&&!f.u9c)for(h=0,i=g[a];h<i.length;h++)j=i[h],(f.isUpdated(j)||f.isInserted(j))&&(k=p(),l=k.succeed,m=k.fail,f.saveItem(j,l,m));n.execute(function(){return q.u9c--})},a.prototype.get=function(a){return this._dataSource.get(a)},a.prototype.remove=function(a,b,c,d){var e,f,g,h,i=this;void 0===b&&(b=1),e=o(function(){i.Hzb(a,b,c,d)},d),f=e.suspend(),g=f.succeed,h=f.fail,this.A9c(a,b,g,h),e.execute()},a.prototype.Hzb=function(a,b,c,d){var e=this,f={index:a,count:b};this.Wq(i.Events.ItemRemoving,f),this._dataSource.remove(a,b,function(d){e.rVc(),e.i5c(a,b),e.Wq(i.Events.ItemRemoved,f),c&&c(d)},d)},a.prototype.A9c=function(a,b,c,d){var e,f,g=o(c,d),h=g.suspend,i=this,j=i.HL;for(i.u9c++,e=function(c){var d,e,f,g,i,k,l,m=j[c],n=m.targetTable,o=m.eVc,p=m.HUc;if(n&&o.e9c(m.name)&&p&&p[a]&&!n.u9c){for(d=h(),e=d.succeed,f=d.fail,g=[],i=void 0,k=function(b){var c=p[a+b];g=g.concat(Object.keys(c).map(function(a){return c[a]}))},l=0;l<b;l++)k(l);i=g.sort(function(a,b){return b-a}).map(function(a){return function(b,c){n.remove(a,1,b,c)}}),s(i).then(e).catch(f)}},f=0;f<j.length;f++)e(f);g.execute(function(){return i.u9c--})},a.prototype.getChanges=function(){return this._dataSource.getChanges()},a.prototype.isDataLengthChanged=function(){return this._dataSource.isDataLengthChanged()},a.prototype.submitChanges=function(a,b,c){var d=this;return new Promise(function(e,f){d.B9c(a,function(a){e(a),b&&b(a)},function(a){f(a),c&&c(a)})})},a.prototype.B9c=function(a,b,c){var d=this,e=o(function(){d.rVc(),d.Wq(i.Events.ChangesSubmitting,m),d._dataSource.submitChanges(function(b,c,e){a?a(b,c,e):d.Wq(i.Events.ChangesSubmittedRowFailed,{index:b,reason:c,type:e})}).then(function(a){d.Wq(i.Events.ChangesSubmitted,a),b(a)}).catch(function(a){c(a)})}),f=e.suspend(),g=f.succeed,h=f.fail;this.C9c(g,h),e.execute()},a.prototype.C9c=function(a,b){var c,d,e,f,g,h,i,j=o(a,b),k=j.suspend,l=this,n=l.HL;for(l.u9c++,c=0;c<n.length;c++)d=n[c],e=d.targetTable,f=d.HUc,e&&f&&!e.u9c&&(g=k(),h=g.succeed,i=g.fail,e.submitChanges(m,h,i));j.execute(function(){return l.u9c--})},a.prototype.cancelChanges=function(a,b){var c=this,d=o(function(){var b={isDataLengthChanged:c.isDataLengthChanged()};c.Wq(i.Events.ChangesCancelling,m),c._dataSource.cancelChanges(),c.rVc(),c.d5c(),c.Wq(i.Events.ChangesCancelled,b),a&&a(m)});this.D9c(d.suspend),d.execute()},a.prototype.D9c=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.u9c++,b=0;b<j.length;b++)c=j[b],d=c.targetTable,e=c.HUc,d&&e&&!d.u9c&&(f=a(),g=f.succeed,h=f.fail,d.cancelChanges(g,h));i.u9c--;
},a.prototype.D4c=function(){var a,b;for(a in this.kVc)Object.prototype.hasOwnProperty.call(this.kVc,a)&&(b=this.kVc[a],b instanceof j.CalcField?b.QV():this.kVc[a]=m)},a.prototype.Nm=function(a,b){var c,d,e;if(a){for(c=this.kVc[a],c instanceof j.CalcField?c.QV():this.kVc[a]=m,d=0;d<this.HL.length;d++)if(e=this.HL[d],a===e.name||a===e.sourceField)return void(e.HUc&&e.eVc.Nm())}else for(this.D4c(),d=0;d<this.HL.length;d++)e=this.HL[d],e.eVc&&e.eVc.Nm()},a.prototype.primaryKey=function(a){if(0===arguments.length){if(0===this.lVc.length){for(var b in this.columns)this.columns[b].isPrimaryKey&&this.lVc.push(b);this.createIndexes(this.lVc)}return this.lVc.join(",")}f.isNullOrUndefined(a)||(this.lVc=this.lVc.concat(a.split(",")))},a.prototype.getIndexes=function(){return f.keys(this.jVc)},a.prototype.b5c=function(){return f.keys(this.$4c)},a.prototype.createIndexes=function(a){var b,c,d,e=this.jVc;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]||(e[d]=this.sVc(d))},a.prototype.t4c=function(a,b){var c,d,e,f=this.$4c;for(c=0,d=a;c<d.length;c++)e=d[c],f[e]&&!b||(f[e]=this.c5c(e))},a.prototype.dropIndexes=function(a){var b,c,d,e=this.jVc;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]&&delete e[d]},a.prototype.clearIndexes=function(){this.jVc={}},a.prototype.qgd=function(a,b){var c=this.jVc;f.isNullOrUndefined(c[a])||(c[b]=c[a],delete c[a])},a.prototype.d5c=function(){this.$4c={}},a.prototype.rgd=function(a,b){var c=this.$4c;f.isNullOrUndefined(c[a])||(c[b]=c[a],delete c[a])},a.prototype.rVc=function(){this.Nm();var a=this.getIndexes();this.clearIndexes(),this.createIndexes(a)},a.prototype.e5c=function(){var a=this.b5c();this.d5c(),this.t4c(a)},a.prototype.sVc=function(a){var b,c,d,e,f=this.length();for(c=0;c<f;c++)d=this.get(c),e=d[a],"string"!=typeof e&&(e+=""),b||(b={}),b[e]||(b[e]=[]),b[e]&&b[e].push(c);return b},a.prototype.c5c=function(a){var b=this;return w(a,this.length(),this.f5c(a),function(c){return b._getValueByField(a,c)})},a.prototype.tVc=function(a){return!!this.jVc[a]},a.prototype.search=function(a,b){if(!f.isNullOrUndefined(a)&&!f.isNullOrUndefined(b))return f.isString(a)||(a+=""),this.tVc(b)?this.uVc(a,b):this.vVc(a,b)},a.prototype.y4c=function(a){var b,c,d,e,f,g=this.primaryKey().split(",");if(0===g.length||!this.jVc[g[0]])return[];if(1===g.length)return this.jVc[g[0]][a];if(a=a.split("|"),a.length!==g.length)return[];for(b=0;b<a.length;b++)a[b]=a[b].trim();for(c={},d={},this.jVc[g[0]][a[0]].forEach(function(a){c[a]=1}),e=function(b){f.jVc[g[b]]&&f.jVc[g[b]][a[b]].forEach(function(a){c[a]===b&&(d[a]=b)}),c=d,d={}},f=this,b=1;b<a.length;b++)e(b);return Object.keys(c)},a.prototype.G4c=function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r;if(c){for(d={},e=0;e<b.length;e++)g=b[e],h=this._dataSource._data[g],d[g]=h&&h.data[a];for(i=this.nVc.relationships,j=0,k=i;j<k.length;j++)if(l=k[j],l.sourceTable===this&&l.targetTable!==this){for(m={},n=l.sourceRelationshipName+".",o=f.keys(l.targetTable.columns),p=0,q=o;p<q.length;p++)r=q[p],m[r]=l.sourceTable._getValueByField(n+r,a);d[l.sourceRelationshipName]=m}return d}for(d=[],e=0;e<b.length;e++)h=this._dataSource._data[b[e]],d.push(h&&h.data[a]);return d},a.prototype.fNb=function(a,b,c,d){var e,f,g=[],h=this.length();for(e=0;e<h;e++)f=b&&this._dataSource._data[b].data[e],b!==l&&f!==a&&f+""!==a||g.push(this.G4c(e,c||this._dataSource.U,d));return g},a.prototype.vVc=function(a,b){var c,d,e,f=[],g=this.length();for(c=0;c<g;c++)d=this.get(c),e=d[b],e!==a&&e+""!==a||f.push(d);return f},a.prototype.uVc=function(a,b){var c,d,e,f=this.jVc,g=f[b],h=g[a],i=[];if(h)for(c=0,d=h;c<d.length;c++)e=d[c],i.push(this.get(e));return i},a.prototype.qVc=function(a,b){var c,d,e,f=this.jVc;for(c in f)f.hasOwnProperty(c)&&(d=f[c],d&&(e=b[c],d[e]?d[e].push(a):d[e]=[a]))},a.prototype.g5c=function(a,b){var c=this._dataSource.options.schema;x(this.$4c,a,b,c&&c.columns)},a.prototype.wVc=function(a,b,c){var d,e,f,g=this.jVc;for(d in g)g.hasOwnProperty(d)&&(e=g[d],e&&c!==b&&(f=e[b],f&&f.length>1?f.splice(f.indexOf(a),1):delete e[b],e[c]?e[c].push(a):e[c]=[a]))},a.prototype.h5c=function(a,b,c,d){y(this.$4c,a,b,c,d,this.f5c(b))},a.prototype.i5c=function(a,b){z(this.$4c,a,b)},a.prototype.E9c=function(a,b){var c,d,e=this.$4c,g=e&&e[a];if(g)for(c in g)if(g.hasOwnProperty(c)&&(d=g[c],f.isArray(d)&&d.some(function(a){return a===b})))return c},a.prototype.yVc=function(a){return this.lVc.indexOf(a)>=0},a.prototype.i9c=function(){return this.lVc.length>1},a.prototype.h9c=function(){return this.lVc.length>0},a.prototype.defaultView=function(){var a=this;return a.zVc?Promise.resolve(a.zVc):new Promise(function(b,c){a.fetch().then(function(c){var d=a.get(0),e=f.keys(d),g=a.addView(h.DEFAULT_VIEW_NAME,e);a.zVc=g,b(g)})})},a.prototype.addView=function(a,b,c,d){var e=new g.View(a,b,c,d);return e.AVc(this),this.views[a]=e,e},a.prototype.U6c=function(a,b){var c=new g.View(a,b);return c.AVc(this),this.nVc.V6c[a]=c,c},a.prototype.removeView=function(a){var b=this.views;b[a].AVc(l),delete b[a],this.F9c(a)},a.prototype.F9c=function(a){var b,c,d=this.nVc.tables;for(b in d)d.hasOwnProperty(b)&&(c=d[b],delete c.t9c[a])},a.prototype.BVc=function(a){return this.views[a]},a.prototype.$Sb=function(a){var b,c;for(b=0;b<this.HL.length;b++)if(c=this.HL[b],c.name===a)return c;return null},a.prototype.hVc=function(a){var b,c=this.getDataSync(a),d=[];if(a)for(b=0;b<a.length;b++)d.push(c[a[b]]);else for(b=0;b<c.length;b++)d.push(c[b]);return d},a.prototype.fVc=function(a){return this.hVc([a])[0]},a.prototype.j5c=function(a){return this._dataSource.X4c(a)},a.prototype.iVc=function(a,b){var c,d=[];for(c=0;c<b.length;c++)d.push(this._getValueByField(a,b[c]));return d},a.prototype.C4c=function(a){return this.kVc[a]||(this.kVc[a]="="===a[0]?new j.CalcField(a,this):new k.TableField(a,this)),this.kVc[a]},a.prototype.DVc=function(a){var b=this.kVc[a];return b&&b.setValue},a.prototype.EVc=function(a,b,c){this.a5c(a);var d=this.kVc[a];return this.Bg(a),d&&d.setValue&&d.setValue(b,c)},a.prototype.p9c=function(a,b,c,d,e){this.a5c(a);var f=this.kVc[a];return this.Bg(a),f&&f.setItemValue&&f.setItemValue(b,c,d,e)},a.prototype.q9c=function(a,b){this.a5c(a);var c=this.kVc[a];return c&&c.hasItem&&c.hasItem(b)},a.prototype.r9c=function(a,b,c,d,e){this.a5c(a);var f=this.kVc[a];return this.Bg(a),f&&f.insertItem&&f.insertItem(b,c,d,e)},a.prototype._getValueByField=function(a,b){return this.a5c(a),this.kVc[a].getValue(b)},a.prototype.o9c=function(a,b){return this.a5c(a),this.kVc[a].getOriginalValue(b)},a.prototype.s9c=function(a){return this.a5c(a),this.kVc[a].getRelatedTable()},a.prototype.m9c=function(a){return this.a5c(a),this.kVc[a].getRelationMaps()},a.prototype.G9c=function(a){var b,c,d,e=this,f=e.nVc,g=f.relationships;for(b=0,c=g;b<c.length;b++){if(d=c[b],d.sourceTable===e&&d.sourceFieldName===a)return d.targetTable;if(d.targetTable===e&&d.targetFieldName===a)return d.sourceTable}},a.prototype.n9c=function(a,b){return this.a5c(a),this.kVc[a].getHostTableIndexes(b)},a.prototype.a5c=function(a){this.kVc[a]||this.C4c(a)},a.prototype.FUc=function(a,b,c,d,e){var f={name:b,sourceField:a,targetTable:c,targetField:d,eVc:e};return this.HL.push(f),f},a.prototype.QWc=function(a){for(var b=this.HL.length-1;b>=0;b--)this.HL[b].eVc===a&&this.HL.splice(b,1)},a.prototype.FVc=function(){var a,b,c=[this],d=this.HL;for(a=0;a<d.length;a++)b=d[a].targetTable,c.indexOf(b)===-1&&c.push(b);return c},a.prototype.GVc=function(a){var b=this,c=b.HL,d={};return c.forEach(function(c){var e=c.name;d[e]=b._getValueByField(e,a)}),d},a.prototype.RFc=function(a){var b=this.f5c(a);return b&&b.dataType},a.prototype.f5c=function(a){var b,c=this,d=c._dataSource.options.schema;return d&&d.columns&&d.columns[a]?b=d.columns[a]:f.isNullOrUndefined(c.columns)||(b=c.columns[a]),b},a.prototype.H9c=function(a){var b,c,d;return 0===a.length?[]:(b=this,c=b.$Sb(a[0]),d=c&&c.targetTable?c.targetTable.H9c(a.slice(1)):[],d.unshift(c),d.filter(function(a){return!f.isNullOrUndefined(a)}))},a.prototype.toJSON=function(){var a,b=this.views,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a].toJSON());return{name:this.name,dataSourceOption:A(this._dataSource.options),primaryKey:this.primaryKey(),views:c,columns:this.k5c(this.columns)}},a.prototype.fromJSON=function(a){var b,c,d,e,f=a.views;for(b=0,c=f;b<c.length;b++)d=c[b],e=this.addView(d.name,d.columns,!1,d.options),e.fromJSON(d);this.columns=a.columns,this.primaryKey(a.primaryKey)},a.prototype.bind=function(a,b){this._dataSource.bind(a,b)},a.prototype.unbind=function(a,b){this._dataSource.unbind(a,b)},a.prototype.Wq=function(a,b){return this._dataSource.Wq(a,b)},a.prototype.k9c=function(a){return this._dataSource.k9c(a)},a.prototype.k5c=function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&!f.isNullOrUndefined(a[b])&&(c=a[b],c.ny=c.dataType);return a},a}(),b.Table=n;function A(a){var b,c,d={data:a.data,remote:a.remote,autoSync:a.autoSync,batch:a.batch,schema:a.schema},e=a.remote;return e&&(b=d.remote={},c=e.read,c&&!f.isFunction(c)&&(b.read=c),c=e.create,c&&!f.isFunction(c)&&(b.create=c),c=e.update,c&&!f.isFunction(c)&&(b.update=c),c=e.delete,c&&!f.isFunction(c)&&(b.delete=c),c=e.batch,c&&!f.isFunction(c)&&(b.batch=c)),d}},"./dist/src/table/tableEvents.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Events=void 0;var d=function(){function a(){}return a.ItemInserting="ItemInserting",a.ItemInserted="ItemInserted",a.ItemUpdating="ItemUpdating",a.ItemUpdated="ItemUpdated",a.ItemResetting="ItemResetting",a.ItemReset="ItemReset",a.ItemSaving="ItemSaving",a.ItemSaved="ItemSaved",a.ItemRemoving="ItemRemoving",a.ItemRemoved="ItemRemoved",a.ChangesSubmitting="ChangesSubmitting",a.ChangesSubmittedRowFailed="ChangesSubmittedRowFailed",a.ChangesSubmitted="ChangesSubmitted",a.ChangesCancelling="ChangesCancelling",a.ChangesCancelled="ChangesCancelled",a}();b.Events=d},"./dist/src/table/tableField.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.TableField=void 0,d=c("./dist/src/dataSource/utils.js"),e=null,f=void 0,g=function(){function a(a,b){var c,f=this,g="string"==typeof a?a.split("."):a,h=g[0]&&b.$Sb(g[0]);h&&h.targetTable?(this.relatedTable=h.targetTable,this.map=h.HUc,this.setValue=null,this.map||(h.eVc.GUc(),this.map=h.HUc),this.getRelationMaps=function(){var a=[{name:h.name,relationshipMap:h.eVc.f9c(h.name)}];if(this.relatedTable)return this.subField?a.concat(this.relatedTable.m9c(this.subField)):a},this.getHostTableIndexes=function(a){var b,c,d,e,f=[a];return this.relatedTable?(this.subField&&(f=this.relatedTable.n9c(this.subField,a)),b=h.eVc,c=void 0,c=b.targetTable===this.relatedTable?b.targetRelationshipName:b.sourceRelationshipName,d=this.relatedTable.$Sb(c),e=d.HUc,f.reduce(function(a,b){return a.concat(e[b])},[])):f},"object"===h.type?1===g.length?(this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable.fVc(b[0])},this.setValue=function(a){var b=a[g[0]];return b?a[h.sourceField]=b[h.targetField]:a[h.sourceField]=null,a}):(this.subField=g.slice(1).join("."),this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable._getValueByField(f.subField,b[0])},this.getOriginalValue=function(a){var b=this.map[a];return d.isNullOrUndefined(b)?e:this.relatedTable.o9c(this.subField,b[0])},this.setItemValue=function(a,b,c,g){var h=f.map[a];return d.isNullOrUndefined(h)?e:f.relatedTable.p9c(f.subField,h[0],b,c,g)},this.hasItem=function(a){var b=f.map[a];return!d.isNullOrUndefined(b)&&f.relatedTable.q9c(f.subField,b[0])},this.insertItem=function(a,c,e,g){var i=f.map[a],j=i;return d.isNullOrUndefined(j)&&(i=f.map[a]=[]),c[h.targetField]=b._getValueByField(h.sourceField,a),f.relatedTable.r9c(f.subField,void 0,c,function(a){i.push(a.index),a.index=i.length-1,e&&e(a)},g)}):1===g.length?this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?[]:f.relatedTable.hVc(b)}:(c=g[1]-1,isNaN(c)?(this.subField=g.slice(1).join("."),this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable.iVc(f.subField,b)},this.getOriginalValue=function(a){var b=this.map[a];return d.isNullOrUndefined(b)?e:this.relatedTable.o9c(this.subField,b)},this.hasItem=function(a){var b=f.map[a];return b&&b.length>0},this.insertItem=function(a,c,e,g){var i=f.map[a],j=i;return d.isNullOrUndefined(j)&&(i=f.map[a]=[]),c[h.targetField]=b._getValueByField(h.sourceField,a),f.relatedTable.r9c(f.subField,void 0,c,function(a){i.push(a.index),a.index=i.length-1,e&&e(a)},g)}):2===g.length?(this.arrayFieldIndex=g[1]-1,this.getValue=function(a){var b=f.map[a],c=b&&b[f.arrayFieldIndex];return d.isNullOrUndefined(c)?e:f.relatedTable.fVc(c)}):(this.arrayFieldIndex=c,this.subField=g.slice(2).join("."),this.getValue=function(a){var b=f.map[a],c=b&&b[f.arrayFieldIndex];return d.isNullOrUndefined(c)?e:f.relatedTable._getValueByField(f.subField,c)},this.getOriginalValue=function(a){var b=this.map[a],c=b&&b[this.arrayFieldIndex];return d.isNullOrUndefined(c)?e:this.relatedTable.o9c(this.subField,c)},this.setItemValue=function(a,b,c,e){var g=f.map[a],h=g&&g[f.arrayFieldIndex];if(!d.isNullOrUndefined(h))return f.relatedTable.p9c(f.subField,h,b,c,e)}))):(0===g.length?this.getValue=function(a){return b._dataSource.get(a)}:1===g.length?(this.getValue=function(a){return b._dataSource.getFieldValue(g[0],a)},this.getOriginalValue=function(a){return b._dataSource.getFieldOriginalValue(g[0],a)},this.getRelatedTable=function(){return b},this.setItemValue=function(a,c,d,e){return b.updateItemValue(a,g[0],c,d,e)},this.hasItem=function(a){return b._dataSource.length()>a},this.insertItem=function(a,c,e,f){var g=d.isNullOrUndefined(a)?b.length():a;return b.insertItem(g,c,function(a){a.index=g,e&&e(a)},f)}):this.getValue=function(a){var c,d=b._dataSource.getFieldValue(g[0],a);for(c=1;d&&c<g.length;c++)d=d instanceof Array?d[g[c]-1]:d[g[c]];return d},this.setValue=function(a,b){var c,e=a,f=a,h=g.length;for(c=0;f&&c<h;c++)e=f instanceof Array?f[g[c]-1]:f[g[c]],c!==h-1&&(f=e);return f!==e&&(e!==b||d.isNullOrUndefined(e)&&d.isNullOrUndefined(b))&&(f[g[h-1]]=b),a})}return a.prototype.getValue=function(a){return null},a.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},a.prototype.setValue=function(a,b){return null},a.prototype.setItemValue=function(a,b,c,d){},a.prototype.hasItem=function(a){},a.prototype.insertItem=function(a,b){},a.prototype.getOriginalValue=function(a){return null},a.prototype.getRelatedTable=function(){if(this.relatedTable)return this.subField?this.relatedTable.s9c(this.subField):this.relatedTable},a.prototype.getRelationMaps=function(){return[]},a.prototype.getHostTableIndexes=function(a){return[a]},a}(),b.TableField=g},"./dist/src/view/view-cross.js":function(a,b,c){"use strict";var d,e,f,g,h,i;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/viewField/fieldManager.js"),h=d.Common.j.Ia,i=void 0,h(e.View.prototype,{ead:function(){var a=this;a.r5c.setCrossFieldValues(a.QVc)},fad:function(){var a=this;a.r5c&&(a.r5c.clearCrossFieldData(),a.ead())},gad:function(a,b){var c=this;c.r5c&&c.r5c.removeCrossFieldValues(a,b)},dad:function(a){var b=this;b.r5c&&b.r5c.resetCrossFieldRowValues(a)},nad:function(a,b){if("string"==typeof a){var c=!0,d=a;f.isNullOrUndefined(this.i6.cross)||(a=this.i6.cross[d],f.isNullOrUndefined(a)||(c=!1)),c&&(a={over:d,attributes:[""]})}return g.isValidCross(this.cUc,a,b)},Y9c:function(){return this.Z9c()&&f.isNullOrUndefined(this.r5c)},Z9c:function(){return this.LVc.some(function(a){return a.cross})},jad:function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this,n=[],o=function(a,b){n.push({newIndex:b,columnInfos:m.LVc.filter(function(b){return b.kad===a}),fields:m.r5c?m.r5c.getFields(function(b){return b.initialOptionIndex===a}):[]})};for(b=0,c=a;b<c.length;b++)d=c[b],e=d.oldIndex,f=d.newIndex,o(e,f);for(g=function(a,b,c){a.forEach(function(a){return a.kad=c}),b.forEach(function(a){return a.initialOptionIndex=c})},h=0,i=n;h<i.length;h++)j=i[h],k=j.columnInfos,l=j.fields,f=j.newIndex,g(k,l,f)},wed:function(){var a=this,b=a.JVc;return b.map(function(b){return a.eed(b)})},Hdd:function(a,b){var c,d,e,f,g,h,i,j=this,k=j.wed(),l=j._dd(k);if(l.length>0&&(a=l[a],b=l[b]),c=j.J9c[a],c&&"string"==typeof c.cross){if(d=j.J9c[a-1]||{},e=j.J9c[a+1]||{},d.cross===c.cross||e.cross===c.cross)return!0;if(f=j.J9c[b],g=j.J9c[a<b?b+1:b-1]||{},f.cross===c.cross||g.cross===c.cross)return!0}return h=function(a,b){return k.indexOf(a)>-1?h(a+b,b):a},i=function(a,b){var c=j.J9c[h(a,-1)]||{},d=j.J9c[h(b,1)]||{};if("string"==typeof c.cross&&c.cross===d.cross)return!0},i(a-1,a+1)||(a<b?i(b,b+1):i(b-1,b))},mad:function(a){for(var b=this,c=0,d=function(a){return a&&0===a.length?i:a},e=function(){var d=b.LVc[c];d.kad===a?(b.$Vc=b.$Vc&&b.$Vc.filter(function(a){return a.field!==d.value}),b.YVc=b.YVc&&b.YVc.filter(function(a){return a.field!==d.value}),b.H6c=b.H6c&&b.H6c.filter(function(a){return a.field!==d.value}),b.I6c=b.I6c&&b.I6c.filter(function(a){return a.field!==d.value}),b.LVc.splice(c,1),b.r5c&&b.r5c.removeFields(c)):c++};c<b.LVc.length;)e();b.$Vc=d(b.$Vc),b.YVc=d(b.YVc),b.H6c=d(b.H6c),b.I6c=d(b.I6c)},sgd:function(){var a=this;a.J9c.forEach(function(b,c){f.isNullOrUndefined(b.cross)||(f.isNullOrUndefined(b.$dd)&&(b.$dd=c),a.LVc[c].$dd=b.$dd)})}})},"./dist/src/view/view-event.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/table/tableEvents.js"),g=c("./dist/src/view/view.js"),h=c("./dist/src/view/view-util.js"),i=d.Common.j.Ia,j=null,k=void 0;function l(a){var b,c,d,g,h=[],i=[],j=Object.keys(f.Events);if(e.isArray(a))for(b=function(a){j.some(function(b){return b===a})?h.push(a):i.push(a)},c=0,d=a;c<d.length;c++)g=d[c],b(g);else j.some(function(b){return b===a})&&h.push(a);return[h,i]}i(g.View.prototype,{bind:function(a,b){var c=this,d=l(a),e=d[0],f=d[1];f.length>0&&(c.L9c(f,b),this.cUc.bind(f,b)),e.length>0&&this.Fu(e,this.M9c(b))},Fu:function(a,b){var c=this,d=c.N9c(b);c.L9c(a,d),c.cUc.bind(a,d)},unbind:function(a,b){this.cUc.unbind(a,b)},Wq:function(a,b){return this.cUc.Wq(a,b)},k9c:function(a){return this.cUc.k9c(a)},L9c:function(a,b,c){var d,f,g,h,i,j,k,l,m=this;if(b)for(d=(c||m.cUc).name,f=e.isArray(a)?a:[a],g=0,h=f;g<h.length;g++)i=h[g],j=e.isFunction(b)?b:b[i],j&&(k=m.I9c[d]=m.I9c[d]||{},l=k[i]=k[i]||[],l.push(j))},M9c:function(a){var b=this;return function(c,d){var f,g,h;if(b.O9c(d),e.isArray(a))for(f=0,g=a;f<g.length;f++)h=g[f],h.call(b,c,d);else a&&a.call(b,c,d)}},O9c:function(a){var b=this;a.hasOwnProperty("row")||Object.defineProperty(a,"row",{get:function(){return e.isNumber(a.cj)?a.cj:a.cj=b.VVc(a.index)}})},N9c:function(a){var b=this;return function(c,d){b.P9c()&&a.call(b,c,d)}},P9c:function(a){return e.isBoolean(a)&&(this.OG=!a),!this.OG},Q9c:function(a,b){var c=this;return c.P9c(!1),{success:function(b){c.P9c(!0),a&&a(b)},fail:function(a){c.P9c(!1),b&&b(a)}}},AJ:function(){var a=this;a.Fu(f.Events.ItemInserting,function(b,c){var d=c.index,e=c.data;a.M5c(e),d===a.length()&&a.AX()&&a.N5c(e)}),a.Fu(f.Events.ItemInserted,function(b,c){var d=c.index,e=c.data;a.R9c(d,e)}),a.Fu(f.Events.ItemUpdating,function(b,c){var d=c.data,e=c.originalValue;a.S9c(d,e)}),a.Fu(f.Events.ItemUpdated,function(b,c){var d=c.index,e=c.field,f=c.originalValue,g=c.newValue;a.T9c(d,e,f,g)}),a.Fu(f.Events.ItemReset,function(b,c){var d=c.index,e=c.originalData,f=c.dataBeforeChanged;a.U9c(d,e,f)}),a.Fu(f.Events.ItemRemoved,function(b,c){var d=c.index,e=c.count;a.V9c(d,e)}),a.Fu(f.Events.ChangesSubmitted,function(b,c){a.W9c()}),a.Fu(f.Events.ChangesCancelled,function(b,c){a.X9c(c.isDataLengthChanged)})},Lva:function(){var a,b,c,d,e,f,g,h,i=this,j=i.I9c;for(a in j)if(j.hasOwnProperty(a)){b=j[a];for(c in b)if(b.hasOwnProperty(c))for(d=b[c],e=0,f=d;e<f.length;e++)g=f[e],h=i.cUc.nVc.tables[a],h.unbind(c,g)}i.I9c={}},w9c:function(a){var b,c,d,e,f,g=this,h=g.I9c,i=a.name,j=h[i];for(b in j)if(j.hasOwnProperty(b))for(c=j[b],d=0,e=c;d<e.length;d++)f=e[d],a.unbind(b,f);h[i]=k},v9c:function(a,b){var c=this,d=c.I9c,e=d[a];delete d[a],d[b]=e},aad:function(){var a,b,c,d,f,g,i,j,k;if(this.$9c())for(a=this,b=a,c=a.name,d=a.LVc,f=a.cUc,g=0,i=d;g<i.length;g++)j=i[g],e.isFunction(j.value)||h.isFormula(j.value)||!h.isRelation(j.value)||(k=f.s9c(j.value),!e.isNullOrUndefined(k)&&e.isNullOrUndefined(k.t9c[c])&&(k.t9c[c]=b,a.cad(k)))},cad:function(a){var b=this,c=b.cUc,d=c.nVc.relationships.reduce(function(b,d){return d.sourceTable===c&&d.targetTable===a?{relationshipName:d.sourceRelationshipName,relationFieldName:d.sourceFieldName}:d.sourceTable===a&&d.targetTable===c?{relationshipName:d.targetRelationshipName,relationFieldName:d.targetFieldName}:b},{}),g=d.relationshipName,i=d.relationFieldName,j=function(d,j){var l=b.N9c(function(a,d){var l,m,n,o,p,q,r,s=function(a,b){var c=a.value.split(".");return c[c.length-1-b]},t=b.J9c.filter(function(a){return h.isRelation(a.value)&&s(a,1)===g}),u=t;if(d.eventName!==f.Events.ItemUpdating&&d.eventName!==f.Events.ItemUpdated||(u=u.filter(function(a){return s(a,0)===d.field})),l=[k],u.forEach(function(c){var f,g,h,i=!e.isNullOrUndefined(c.cross);i?(g="string"==typeof c.cross?b.i6.cross[c.cross].over:c.cross.over,e.isNullOrUndefined(b.$Vc)||(h=e.findIndex(b.$Vc,function(a){return a.field.indexOf(c.value)>-1&&a.field.indexOf(g)>-1}),h>-1&&(f=b.$Vc[h].field))):b.V5c(c.value)&&l.push(c.value),j.call(b,c.value,i,f)(a,d)}),d.eventName===f.Events.ItemInserted||d.eventName===f.Events.ItemRemoved||d.eventName===f.Events.ItemUpdated){if(d.eventName===f.Events.ItemUpdated&&(m=i===d.field,n=t.some(function(a){if(!e.isNullOrUndefined(a.cross)){var c=("string"==typeof a.cross?b.i6.cross[a.cross].over:a.cross.over).split(".").pop();if(c===d.field)return!0}return!1}),m||n))for(o=c.n9c(t[0].value,d.index),p=0,q=o;p<q.length;p++)r=q[p],b.dad(r);l.forEach(function(a){b.W5c(k,!0,a,k)})}});b.L9c(d,l,a),a.bind(d,l)},l=function(a,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(b.AX())for(j=f.relatedViewIndexes||c.n9c(a,f.index),k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,p=void 0,d?(b.dad(m),n=c.E9c(e,m),g={},g[e]=n,o=g,p=b.WVc(m,(h={},h[e]=!0,h))[e]):(n=c.E9c(a,m),i={},i[a]=n,o=i,p=c._getValueByField(a,m)),q=b.P5c(m,o).data,b.Q5c(q,n),b.h5c(m,a,n,p),c.h5c(m,a,n,p);else if(d)for(j=f.relatedViewIndexes||c.n9c(a,f.index),r=0,s=j;r<s.length;r++)m=s[r],b.dad(m)};j(f.Events.ItemRemoving,function(a,b){return function(d,e){b&&(e.relatedViewIndexes=c.n9c(a,e.index))}}),j(f.Events.ItemRemoved,function(a,b,c){return function(d,e){l(a,b,c,e)}}),j(f.Events.ItemInserted,function(a,b,c){return function(d,e){l(a,b,c,e)}}),j(f.Events.ItemUpdating,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n,o,p;if(b.AX())for(j=g.relatedViewIndexes=c.n9c(a,g.index),g.relatedViewValues=[],k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,d?(o=b.WVc(m,(h={},h[e]=!0,h)),n=o[e]):(n=c._getValueByField(a,m),i={},i[a]=n,o=i),p=b.P5c(m,o).data,g.relatedViewValues[m]=n,b.Q5c(p,n)}}),j(f.Events.ItemUpdated,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n;if(b.AX())for(i=g.relatedViewIndexes||c.n9c(a,g.index),j=0,k=i;j<k.length;j++)l=k[j],m=g.relatedViewValues[l],n=void 0,d?(n=b.WVc(l,(h={},h[e]=!0,h))[e],a=e):n=c._getValueByField(a,l),b.h5c(l,a,m,n),c.h5c(l,a,m,n)}})}})},"./dist/src/view/view-filter.js":function(a,b,c){"use strict";var d,e,f,g,h,i;Object.defineProperty(b,"__esModule",{value:!0}),d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/table/table.js"),f=c("./dist/src/view/view-util.js"),g=c("Common"),h=c("./dist/src/view/view.js"),(i=g.Common.j.Ia)(h.View.prototype,{buildInFilter:function(a){var b,c,d,e,g,h,i,j,k,l,m,n=this.cUc,o={};if(a.length>1){for(b=[],c=[],d=function(d){var g,h=a[d],i=h.field,j=h.operator,k=h.value,l=h.relation,m=o[i];m||(m=o[i]=n.f5c(i)),c.push(l),g=e.Tdd(i,a[d]),g=f.mapGetValueFunc(m,g),g=f.Udd(e,j,k,g),b.push(function(a,b,c){return g(a,c,b[d])})},e=this,g=0;g<a.length;g++)d(g);return f.Wdd(b,c)}return h=a[0],i=h.field,j=h.operator,k=h.value,l=n.f5c(i),m=this.Tdd(i,a[0]),m=f.mapGetValueFunc(l,m),m=f.Udd(this,j,k,m,i),function(a,b,c){return m(a,c,b[0])}},s4c:function(a){var b=this,c=b.$4c,d=b.cUc;return d.$4c[a]||c[a]},t4c:function(a,b){var c=this,d=c.cUc,e=c.LVc,g,h=[],i=[];a.forEach(function(a){g=e.filter(function(b){return b.value===a})[0],g&&(f.isViewColumn(g)?h.push(a):i.push(a))}),d.t4c(i,b),c.v5c(h)},v5c:function(a){var b,c,d,e=this,f=e.$4c;for(b=0,c=a;b<c.length;b++)d=c[b],f[d]||(f[d]=this.c5c(d))},Iid:function(){this.$4c={}},c5c:function(a){var b=this.r5c.getFieldByName(a);return e.generateFilterIndexCache(a,this.length(),this.f5c(a),function(a){return b.getValue(a)})},g5c:function(a,b){var c=this,d=c.cUc,f=d._dataSource.options.schema;e.updateFilterIndexesCacheOnInsert(this.$4c,a,b,f&&f.columns)},h5c:function(a,b,c,d){var f=this;e.updateFilterIndexesCacheOnUpdate(f.$4c,a,b,c,d,f.f5c(b))},w5c:function(a,b,c){var e,f,g,h,i=this,j=i.LVc;if(!d.isNullOrUndefined(b)&&!d.isNullOrUndefined(c))for(e=0,f=j;e<f.length;e++)g=f[e],h=g.value instanceof Function?g.value.name:g.value,i.h5c(a,h,b[h],c[h])},i5c:function(a,b){var c=this;e.updateFilterIndexesCacheOnRemove(c.$4c,a,b)},RVc:function(a){var b,c,e,g,h,i,j,k,l,m,n;if(a){if(b=this,c=b.QVc,e=[],g=b.IVc,h=g.length,g&&h>0&&(e=c.slice(0,h)),i=h,"function"==typeof a)for(k=h;k<c.length;k++)l=c[k],a(b.getRowData(l,!0))&&(e[i]=l,i++);else if(d.isArray(a)||(a=[a]),f.isFieldListFilter(a))m=a[0].field,n=b.s4c(m),n||(b.t4c([m]),n=b.s4c(m)),f.x5c(e,i,n,a,c);else for(j=this.buildInFilter(a),k=h;k<c.length;k++){l=c[k];try{j(b.cUc,a,l)&&(e[i]=l,i++)}catch(a){}}b.QVc=e}},tgd:function(){var a,b,c,d,e,f=this.QVc,g=this.IVc,h=g.length;for(g&&h>0&&(a=f.slice(0,h)),b=[],c=this.length(),d=0,e=0;e<c;e++)(!a||a.indexOf(e)<0)&&(b[d]=e,d++);a&&a.length>0?this.QVc=a.concat(b):this.QVc=b},N5c:function(a){var b=this,c=b.$Vc;b.AX()&&b.autoFilter&&f.addFilterInfoForFieldValue(c,a,b)},Q5c:function(a,b){var c=this,d=c.$Vc;c.AX()&&c.autoFilter&&f.addFilterInfoForFieldValue(d,a,c,b)},ZVc:function(){var a=this;a.U5c()&&a.filter(a.$Vc)},U5c:function(){return this.autoFilter&&this.$Vc},AX:function(){var a=this,b=a.$Vc;return d.isArray(b)&&b.length>0},filter:function(a){var b=this;return b.QVc||b.PVc(),a?b.RVc(a):this.tgd(),this.$Vc=a,this.QVc.length}})},"./dist/src/view/view-group.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/viewField/groupManager.js"),h=c("./dist/src/viewField/fields.js"),i=c("./dist/src/viewField/utils.js"),j=c("./dist/src/view/view-util.js"),k=d.Common.j.Ia,l=null,m=void 0,k(e.View.prototype,{groupBy:function(a){var b,c=this;return 0!==arguments.length&&f.isArray(a)?(b=c.LVc.filter(function(a){return a.isCross}),a=b.length>0?a.filter(function(a){return!b.some(function(b){return b.value===a.field})}):a,0===a.length?c.y3c:(c.QVc||c.PVc(),c.G5c(a),c.K5c(),c.I5c(a),void(this.y3c=a))):c.y3c},removeGroupBy:function(){var a=this;a.J5c(),a.X5c(),a.K5c(),a.y3c=l,a.Y5c(),a.XVc()},J5c:function(){var a=this;a.H5c()},X5c:function(){var a,b,c,d,e,f=this,g=f.cUc,h=f.$Vc,i=f.$4c,k=f.getColumnInfos();if(h){for(e=h.length-1;e>=0;e--)a=h[e],b=k.filter(function(b){return b.name===a.field})[0],b.W1c?(c=j.getColumnName(k[b.n4c]),d=i[a.field],d&&(g.$4c[c]=i[a.field],delete i[a.field]),a.field=c):b.isGroup&&(h.splice(e,1),delete i[a.field]);f.$Vc=0===h.length?m:h}},Y5c:function(){var a,b,c,d,e=this;if(e.YVc){for(a=[],b=0,c=e.YVc;b<c.length;b++)d=c[b],delete d.A5c,d.s3c?g.isGroupField(d.field)&&(delete d.s3c,delete d.U1c,d.field=g.getGroupFieldName(d.field),a.push(d)):a.push(d);e.YVc=0===a.length?m:a}e.I6c=m,e.H6c=e.YVc},G5c:function(a){var b,c,d,e,f,g,h,i;a&&(this.H5c(),b=this,c=b.QVc,d=b.r5c||b.E5c(),e=b.T3c||b.F5c(a),f=d.buildGroupFields(a,c),g=e.groupBy(f,c),h=g.rootNode,i=g.indexMap,b.S3c=h,b.QVc=i,d.transposeSliceFields(f))},H5c:function(){var a,b=this;b.T3c=null,null===(a=b.r5c)||void 0===a?void 0:a.reset(),b.S3c=null},Q3c:function(a){var b=this;b.autoGroup&&b.y3c&&(!f.isString(a)||b.V5c(a))&&b.G5c(b.y3c)},V5c:function(a){var b=this;return b.y3c&&b.y3c.some(function(b){return b.field===a||b.summaryFields&&b.summaryFields.some(function(b){return b.formula&&b.formula.indexOf(a)>-1||b.slice&&("string"==typeof b.slice?b.slice.indexOf(a)>-1:b.slice.field&&b.slice.field.indexOf(a)>-1)})})},F5c:function(a){var b=this,c=b.cUc,d=c.bSc;return b.T3c=new g.GroupManager(a,d.A4c.bind(d)),b.T3c},K5c:function(){var a,b,c=this,d=c.getColumnInfos();for(a=d.length-1;a>=0;a--)b=d[a],b.isGroup&&d.splice(a,1),b.X3c&&(b.X3c=m,b.n4c=m);c.setColumnInfos(d)},I5c:function(a){var b,c,d,e,g,k,l,m,n,o,p,q=this,r=[],s=-1,t=-1,u=j.GROUP_COLUMN_WIDTH,v={},w=function(b){var c,d,e,g=q.LVc[b];for(c=0,d=a;c<d.length;c++)e=d[c],g.value===e.field&&(g.X3c=!0,v[i.combineName(g.value,f.findIndex(a,function(a){return a.field===g.value}))]={colInfo:g,index:b})};for(b=0;b<q.LVc.length;b++)w(b);for(c=q.r5c,d=c.positionOfField,e=function(b,e){var g,k,l=c.getField(d[b]),m=l.name,n=l.extra.caption,o={caption:n,value:m,name:m,isGroup:!0};t=f.findIndex(a,function(a,b){return i.combineName(a.field,b)===m}),t>-1&&(u=j.getGroupColumnWidth(a[t].field,q.LVc),s=t,o.W1c=!0,g=v[m],f.isNullOrUndefined(g)||(g.colInfo.n4c=b,o.n4c=g.index+e)),o.U1c=s,o.width=u,k=l.extra,k&&h.setFieldExtraProperties(function(a){k[a]&&(o[a]=k[a])}),r.push(o)},g=0,k=d.length-c.keysOfBaseField.length;g<k;g++)e(g,k);for(l=q.m5c,m=q.getColumnInfos(),n=0,o=m;n<o.length;n++)p=o[n],l||(p.visible=!1),r.push(p);q.setColumnInfos(r)},B3c:function(a){var b,c,d,e,g,h,i,j,k,l;if(a){for(b=this,c=b.S3c,d=[],e=b.LVc,g=Array.isArray(a)?a:[a],h=[],i=[],j=function(a){var c=g[a],d=e.filter(function(a){return a.value===c.field})[0];d&&f.isNumber(d.U1c)?(c.s3c=!0,c.A5c=b.z5c([c]),c.U1c=d.U1c,h.push(c)):i.push(c)},k=0;k<g.length;k++)j(k);l=b.z5c(i),i.forEach(function(a){return a.A5c=l}),b.B5c(c,d,0,h,i),b.QVc=d}},B5c:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o=this,p=a.children;for(p.length>1&&d.length>0&&(h=d.filter(function(a){return a.U1c===c}),h.length>0&&(i=h[0].A5c,p.sort(function(a,b){return i(o.cUc,h,a.key,b.key)}))),j=0,k=p;j<k.length;j++)if(l=k[j],g=l.recordIndexes)for(g.length>1&&e.length>0&&(h=e,i=h[0].A5c,g.sort(function(a,b){return i(o.cUc,h,a,b)})),f=b.length,m=0,n=g.length;m<n;m++)b[f+m]=g[m];else o.B5c(l,b,c+1,d,e)},setGroupSliceColumnSettings:function(a,b){var c=this,d=a[b];a.isGroup&&c.isGroupSliceColumn(a)&&c.getGroupSliceColumns(a).forEach(function(a){return a[b]=d})},isGroupSliceColumn:function(a){return a.isGroup&&g.isGroupSlice(a.value)},getGroupSliceColumns:function(a){var b,c,d=this,e=[],f=a.U1c,h=d.LVc;if(a.isGroup)for(b=0;b<h.length;b++)c=h[b],c.U1c===f&&g.isGroupSlice(c.value)&&e.push(c);return e},updateColumnSettingToGroupOptions:function(a,b){var c,d,e,i=this,j=i.y3c;if(j&&a.isGroup)switch(c=g.getGroupOptionIndexesFrom(a.value),d=function(a,c){h.setFieldExtraProperties(function(d){(f.isNullOrUndefined(b)||b===d)&&(a[d]=c[d])})},c.length){case 1:d(j[c[0]],a);break;case 2:d(j[c[0]].summaryFields[c[1]],a);break;case 3:e=j[c[0]].summaryFields[c[1]].slice,"string"==typeof e&&(e=j[c[0]].summaryFields[c[1]].slice={field:e}),d(e,a)}},detailColumnsVisible:function(a){var b,c,d,e=this;if(0===arguments.length)return e.m5c;if(e.m5c!==a&&(e.m5c=a,e.T3c))for(b=e.getColumnInfos(),c=e.r5c,d=c.positionOfField.length-c.keysOfBaseField.length;d<b.length;d++)b[d].visible=a}})},"./dist/src/view/view-sort.js":function(a,b,c){"use strict";var d,e,f,g,h;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/view/view.js"),g=c("./dist/src/view/view-util.js"),(h=d.Common.j.Ia)(f.View.prototype,{y5c:function(a){var b,c,d={},f=this.Tdd(a,d);for(b=0;b<this.QVc.length;b++)if(c=f(d,b,d),!e.isNullOrUndefined(c))return c;return null},z5c:function(a,b){var c,d,f,h,i,j,k;if(1===a.length)return b=b||0,
c=a[0],d=this.Tdd(c.field,c),f=void 0,c.compare?f=function(a,c,e,f){var g=d(a,e,c[b]),h=d(a,f,c[b]);return c[b].compare(g,h,c[b].ascending)}:(h=this.y5c(c.field),null===h?f=function(){return 0}:(i=c.ascending,f=function(a,c,e,f){var j=d(a,e,c[b]),k=d(a,f,c[b]);return g.compareValue(i,h,j,k)})),f;for(j=0;j<a.length;j++)c=a[j],k=this.p5c(c.field),k.isGroup&&e.isNullOrUndefined(c.ascending)&&(c.compare=function(a,b){return a===b?0:1}),c.l5c=this.z5c([c],j);return g.multiSort},TVc:function(a){if(a){var b=this;if(b.y3c)return b.I6c=g.getSortInfos(a),void b.B3c(a);b.H6c=g.getSortInfos(a),b.A3c(a)}},A3c:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a&&(b=this,c=b.QVc,e=b.IVc,f=e.length,e&&f>0&&(d=c.slice(0,f),c=c.slice(f)),g=Array.isArray(a)?a:[a],h=b.z5c(g),i=g[0],j=i.startRow,k=void 0===j?0:j,l=i.endRow,m=void 0===l?b.length():l,n=c.slice(0,k),o=c.slice(k,m),o.sort(function(a,c){return h(b.cUc,g,a,c)}),p=c.slice(m),q=n.concat(o,p),d&&d.length>0?b.QVc=d.concat(q):b.QVc=q)},XVc:function(){var a=this;a.T5c()&&a.sort(a.YVc)},T5c:function(){return this.autoSort&&this.YVc},sort:function(a){var b=this;b.QVc||b.PVc(),b.TVc(a),this.YVc=a},J6c:function(a){var b=this,c=b.autoSort,d=b.H6c&&b.H6c.length>0,e=b.I6c&&b.I6c.length>0;c&&d&&b.A3c(b.H6c),b.Q3c(a),c&&e&&b.B3c(b.I6c)}})},"./dist/src/view/view-style.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),(f=d.Common.j.Ia)(e.View.prototype,{getStyleRules:function(){return this.i6.styleRules},getStyleRule:function(a){var b=this.getStyleRules();return b[a]},addStyleRule:function(a,b,c){var d,e;a&&(d={},b&&(d.style=b),c&&(d.rule=c),e=this.getStyleRules(),e[a]=d)},removeStyleRule:function(a){var b=this.getStyleRules();delete b[a]},clearStyleRules:function(){this.i6.styleRules={}}})},"./dist/src/view/view-util.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=this&&this.__assign||function(){return k=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},k.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.ugd=b.x5c=b.mapGetValueFunc=b.Wdd=b.removeExtraInfos=b.addFilterInfoForFieldValue=b.isRelation=b.isFormula=b.isFieldListFilter=b.isViewColumn=b.isTableDataReady=b.getColumnName=b.getGroupColumnWidth=b.applyDateTimePicker=b.array_find=b.generatePinnedColumnIndexMap=b.getSortInfos=b.multiSort=b.Udd=b.compareValue=b.GROUP_COLUMN_WIDTH=void 0,d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=["eq","neq","lt","lte","gt","gte"],g=["startswith","doesnotstartwith","endswith","contains"],h=["doesnotendwith","doesnotcontain"],i=null,j=void 0,b.GROUP_COLUMN_WIDTH=100;function l(a,b,c,d){var f=a?c:d,g=a?d:c;return e.isNullOrUndefined(f)&&e.isNullOrUndefined(g)?0:e.isNullOrUndefined(f)?-1:e.isNullOrUndefined(g)?1:"number"==typeof b||b instanceof Date?f-g:f>g?1:f<g?-1:0}b.compareValue=l;function m(a,b,c,d,e){var i,j;if(c instanceof Date)if(f.indexOf(b)>-1)c=c.getTime(),i=d,d=function(a,b,c){return i(a,b,c)&&i(a,b,c).getTime()};else{if(g.indexOf(b)>-1)return function(){return!1};if(h.indexOf(b)>-1)return function(){return!0}}return j=n(a,b,c,e),function(a,b,c){return j(d(a,b,c))}}b.Udd=m;function n(a,b,c,f){var g,h,k,l,m,n=c+"",r=n&&n.length;switch(e.isString(c)&&(g=d.Common.q.ub(c)),h=a.cUc,b){case"eq":return k=function(a){return a===c},e.isNullOrUndefined(c)&&(k=function(a){return a===i||a===j}),g?function(a){return RegExp("^"+g+"$").test(a)}:k;case"neq":return l=function(a){return a!==c},e.isNullOrUndefined(c)&&(l=function(a){return a!==i&&a!==j}),g?function(a){return!RegExp("^"+g+"$").test(a)}:l;case"lt":return function(a){return null!==a&&a<c};case"lte":return function(a){return null!==a&&a<=c};case"gt":return function(a){return a>c};case"gte":return function(a){return a>=c};case"startswith":return g?function(a){return RegExp("^"+g).test(a)}:function(a){return(a+"").substr(0,r)===c};case"doesnotstartwith":return g?function(a){return!RegExp("^"+g).test(a)}:function(a){return(a+"").substr(0,r)!==c};case"endswith":return g?function(a){return RegExp(g+"$").test(a)}:function(a){return(a+"").indexOf(c,(a+"").length-r)!==-1};case"doesnotendwith":return g?function(a){return!RegExp(g+"$").test(a)}:function(a){return(a+"").indexOf(c,(a+"").length-r)===-1};case"contains":return g?function(a){return RegExp(g).test(a)}:function(a){return(a+"").indexOf(c)>=0};case"doesnotcontain":return g?function(a){return!RegExp(g).test(a)}:function(a){return(a+"").indexOf(c)<0};case"top":case"bottom":return m=a.s4c(f),m||(a.t4c([f]),m=a.s4c(f)),c=o(Object.keys(m),b,c),function(a){return c.indexOf(a)>-1};case"above":return c=p(h._dataSource._data[f].data,h.f5c(f)),function(a){return a>c};case"below":return c=p(h._dataSource._data[f].data,h.f5c(f)),function(a){return a<c};case"quarter":return function(a){return q(c,a)};case"month":return function(a){return(a&&a.getMonth())===c};default:return function(){return!1}}}function o(a,b,c){var d,e,f,g=[];for(d=0,e=a;d<e.length;d++)f=e[d],isNaN(f)||g.push(parseFloat(f));return c>=g.length?g:("top"===b?g=u(g,c):"bottom"===b&&(g=x(g,c)),g)}function p(a,b){var c,d,e,f,g=0;if(!a||0===a.length)return g;for(c=b&&b.dataMap,d=0,e=a;d<e.length;d++)f=e[d],c&&"number"==typeof c[f]&&(f=c[f]),"number"==typeof f&&(g+=f);return g/a.length}function q(a,b){var c=b&&b.getMonth();switch(a){case 0:return c<=2;case 1:return c>=3&&c<=5;case 2:return c>=6&&c<=8;case 3:return c>=9;default:return!1}}function r(a,b,c,d){var e,f,g,h=0;for(e=0,f=b.length;e<f&&(g=b[e],h=g.l5c(a,b,c,d),0===h);e++);return h}b.multiSort=r;function s(a){return Array.isArray(a)?a:[a]}b.getSortInfos=s;function t(a,b){var c,d;if(0===a.length)return[];for(c=a.slice(0),d=0;d<b;d++)a.indexOf(d)===-1&&c.push(d);return c}b.generatePinnedColumnIndexMap=t;function u(a,b){var c,d,e=v(a.slice(0,b));for(c=b;c<a.length;c++)a[c]>e[0]&&(d=e[0],e[0]=a[c],a[c]=d,v(e));return e}function v(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)w(a,b,c);return a}function w(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]<a[g]&&(g=e),f<c&&a[f]<a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,w(a,g,c))}function x(a,b){var c,d,e=y(a.slice(0,b));for(c=b;c<a.length;c++)a[c]<e[0]&&(d=e[0],e[0]=a[c],a[c]=d,y(e));return e}function y(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)z(a,b,c);return a}function z(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]>a[g]&&(g=e),f<c&&a[f]>a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,z(a,g,c))}function A(a,b){var c,d,e,f;for(c=0,d=a;c<d.length;c++)if(e=d[c],f=b(e))return f}b.array_find=A;function B(a){var b,c,d,e=a.style;e||(e=a.style={}),b=e.cellButtons,b||(b=e.cellButtons=[]),c=e.dropDowns,c||(c=e.dropDowns=[]),d=A(b,function(a){return"openDateTimePicker"===a.command}),d||b.push({imageType:"dropdown",command:"openDateTimePicker",useButtonStyle:!1,buttonBackColor:"transparent"}),d=A(c,function(a){return"dateTimePicker"===a.type}),d||c.push({type:"dateTimePicker",option:{showTime:!1,calendarPage:"day",startDay:"sunday"}})}b.applyDateTimePicker=B;function C(a,c){var d,f=e.findIndex(c,function(b){return D(b)===a});return f>-1?(d=c[f],d.width||b.GROUP_COLUMN_WIDTH):b.GROUP_COLUMN_WIDTH}b.getGroupColumnWidth=C;function D(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}b.getColumnName=D;function E(a){return!a.mVc}function F(a){var b,c,d,e,f=E(a);if(f){for(a.u9c++,b=a.FVc(),c=0,d=b;c<d.length&&(e=d[c],!e||e.u9c||(f=F(e),f));c++);a.u9c--}return f}b.isTableDataReady=F;function G(a){return a.isGroup||a.isCross}b.isViewColumn=G;function H(a){return a[0].operator===j}b.isFieldListFilter=H;function I(a){return a[0].operator!==j&&a[0]._6c}function J(a){return"="===a[0]}b.isFormula=J;function K(a){return a.indexOf(".")>-1}b.isRelation=K;function L(a,b,c,d){var f,g,h,i={},j=function(f){var g,h,j,l,m,n,o,p,q,r;if(f&&!i[f.field]){if(i[f.field]=!0,g=c.s4c(f.field),g||(c.t4c([f.field]),g=c.s4c(f.field)),h=g&&Object.keys(g),j=b[f.field],l=void 0,j instanceof Date){for(m=new Date(j),m.setHours(0,0,0,0),n=m.toISOString().slice(0,10),l=!0,o=0,p=h;o<p.length;o++)if(q=p[o],q.startsWith(n)){l=!1;break}}else l=e.isNullOrUndefined(j)?h.indexOf("null")===-1&&h.indexOf("undefined")===-1:h.indexOf(j+"")===-1;if(!a.some(function(a){return a.field===f.field&&a.value===j})&&l&&(H(a)?a.push(k(k({},f),{value:j,isAdded:!0})):(I(a)||j===d&&void 0===d)&&a.push(k(k({},f),{value:j,operator:"eq",relation:"or",isAdded:!0}))),h.indexOf(d+"")>-1&&1===g[d].length&&d!==j)for(r=0;r<a.length;r++)if(a[r].value===d&&a[r].isAdded){a.splice(r,1);break}}};for(f=0,g=a;f<g.length;f++)h=g[f],j(h)}b.addFilterInfoForFieldValue=L;function M(a){var b,c,d,f,g;if(!e.isNullOrUndefined(a)){for(b=[],c=0,d=a;c<d.length;c++)f=d[c],g=k({},f),g.getValue&&delete g.getValue,b.push(g);return b}return a}b.removeExtraInfos=M;function N(a,b){var c=function(){var c,d=[],e=[a[0]];for(c=1;c<a.length;c++)"or"===b[c]?(d.push(e),e=[a[c]]):e.push(a[c]);return e.length>0&&d.push(e),d},d=function(a,b,c,d){return d.every(function(d){return d(a,b,c)})},e=c();return function(a,b,c){return e.some(function(e){return d(a,b,c,e)})}}b.Wdd=N;function O(a,b){if(a&&a.dataMap){var c=JSON.parse(JSON.stringify(a.dataMap));return function(a,d,e){var f=b(a,d,e);return void 0!==c[f]?c[f]:f}}return b}b.mapGetValueFunc=O;function P(a,b,c,d,e){var f,g,h,k,l,m,n,o,p,q,r,s,t=[],u=!1,v=!1,w=d.map(function(a){var b=a.value;return b===i&&(u=!0),b===j&&(v=!0),a.value});for(u&&!v&&w.push(j),v&&!u&&w.push(i),f=0,g=w;f<g.length;f++)for(h=g[f],k=c&&c[h]||[],l=0,m=k;l<m.length;l++)n=m[l],t[n]=!0;for(o=b,p=a.reduce(function(a,b){return a[b]=!0,a},{}),q=0,r=e;q<r.length;q++)s=r[q],t[s]&&(b>0?p[s]||(a[o]=s,o++):(a[o]=s,o++))}b.x5c=P;function Q(a,b,c,d,f,g,h){var i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=[],A=d.map(function(a,b){return b}),B=[];if(f&&f.length&&(A=[],i=!1,d.forEach(function(a,b){g.indexOf(b)>-1?(z.push(b),A.push(j)):(z.push(j),A.push(b)),a.isCross&&(i=!0)}),a=f[a],b=f[b],i)){for(k=[],l=[],m=0;m<d.length;m++)d[m].isCross?(k[d[m].kad]||(k[d[m].kad]=[],B.push(k[d[m].kad])),n=k[d[m].kad],n.push(m)):B.push(m),a===m&&(a=B.length-1),b===m&&(b=B.length-1);for(o=0,p=g;o<p.length;o++)q=p[o],l.push(B.indexOf(q));z=[],A=[],B.forEach(function(a,b){l.indexOf(b)>-1?(z.push(b),A.push(j)):(z.push(j),A.push(b))}),c=1}if(e.swapArrayItems(A,a,b,c),A=A.filter(function(a){return!e.isNullOrUndefined(a)}),f&&f.length){for(m=0;m<z.length;m++)void 0===z[m]&&(z[m]=A.shift());if(B&&B.length){for(r=[],s=0;s<z.length;s++)if(t=z[s],Array.isArray(B[t])){if(u=h[s].cross,"string"==typeof u){for(v=[z[s]];s+1<h.length&&u===h[s+1].cross;)v=v.concat(z[s+1]),s++;for(w=B[v[0]].length,x=[],y=0;y<w;y++)for(m=0;m<v.length;m++)x.push(B[v[m]][y]);r=r.concat(x);continue}r=r.concat(B[t])}else r.push(B[t]);z=r}}else z=A;return z}b.ugd=Q},"./dist/src/view/view.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/view/view.js"),b),e(c("./dist/src/view/view-style.js"),b),e(c("./dist/src/view/view-event.js"),b),e(c("./dist/src/view/view-group.js"),b),e(c("./dist/src/view/view-sort.js"),b),e(c("./dist/src/view/view-filter.js"),b),e(c("./dist/src/view/view-cross.js"),b)},"./dist/src/view/view.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l=this&&this.__assign||function(){return l=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},l.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.View=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/interfaces/interface.js"),f=c("./dist/src/view/view-util.js"),g=c("./dist/src/viewField/fieldManager.js"),h=c("Common"),i=null,j=void 0;function m(a){return a instanceof Date&&!isNaN(a.valueOf())}function n(a){return h.Common.l.Daa(a)}function o(a){var b=h.Common.l.Rka(a);return m(b)||(b=h.Common.l.Yb(a)),m(b)?b:null}k=function(){function a(a,b,c,e){void 0===c&&(c=!0),void 0===e&&(e={}),this.HVc=10,this.IVc=[],this.JVc=[],this.KVc=[],this.$4c={},this.OG=!1,this.I9c={};var f=this;f.name=a,Object.defineProperty(f,"tableName",{get:function(){var a;return null===(a=f.cUc)||void 0===a?void 0:a.name}}),b||(b=[]),f.J9c=d.clone(b),f.LVc=b.map(function(a){return"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),a.value&&"="===a.value[0]&&(a.readonly=!0),a}),f.MVc=c,f.autoSort=!0,f.autoFilter=!1,f.autoGroup=!0,f.m5c=!0,f.i6=e,e.styleRules||f.clearStyleRules()}return a.prototype.$9c=function(){var a=this,b=a.cUc;return f.isTableDataReady(b)},a.prototype.Ofd=function(a,b,c){var d=this.cUc;return d&&d.Ofd(a,b,c)},a.prototype.Pfd=function(a,b,c){var d=this.UVc(b),e=this.ged(c);return this.Rid(a,d,e)},a.prototype.Rid=function(a,b,c){var d=this.cUc;return d&&d.Pfd(a,b,c)},a.prototype._9c=function(){var a,b,c,e,f=this,g=f.cUc;if(g){if(f.MVc&&(a=g.columns,b=f.LVc,a&&b.length<=0))for(c in a)a.hasOwnProperty(c)&&(e=a[c],b.push(d.clone(e)));f.n5c(),f.o5c()}},a.prototype.AVc=function(a){var b=this;return a?(b.cUc=a,b.aad(),b.Z9c()?b.$9c()&&(b.E5c(),b._9c()):b._9c(),b.$9c()&&(b.vgd(),b.wgd=!0),void b.AJ()):(b.Lva(),void(b.cUc=a))},a.prototype.n5c=function(){var a,b,c,e,g,h,i,j,k,l,m,n=null===(b=null===(a=this.cUc._dataSource.options)||void 0===a?void 0:a.schema)||void 0===b?void 0:b.columns;if(n)for(c=this.LVc,e=["caption","width","style","conditionalFormats","validator","isPrimaryKey","readonly","required","defaultValue","headerStyle","visible","headerFit","indexed","allowSort","allowFilterByValue","allowFilterByList","dataMap","lookup"],g=0,h=c;g<h.length;g++)if(i=h[g],"string"==typeof i.value&&(j=n[i.value])){for(k=0,l=e;k<l.length;k++)m=l[k],d.isNullOrUndefined(i[m])&&(i[m]=j[m]);i.dataType=j.dataType,"date"===j.dataType&&f.applyDateTimePicker(i)}},a.prototype.o5c=function(){var a,b,c,e=this.i6.defaultColumnWidth||60,f=this.LVc;for(a=0,b=f;a<b.length;a++)c=b[a],d.isNullOrUndefined(c.width)&&(c.width=e)},a.prototype.PVc=function(a){var b,c,d=[],e=a||this.length(),f=this.IVc,g=f.length;for(g>0&&(d=f.slice(0)),b=g,c=0;c<e;c++)f.indexOf(c)===-1&&(d[b++]=c);this.QVc=d},a.prototype.p5c=function(a){var b,c,d=this.LVc;for(b=0;b<d.length;b++)if(c=d[b],c.value===a||c.caption===a)return this.cUc.columns[c.value]?c.value:f.isViewColumn(c)?{value:c.value,isGroup:c.isGroup,isCross:c.isCross}:{value:c.value};return i},a.prototype.Tdd=function(a,b){var c,e,g=this,h=this.p5c(a),i=this.cUc,j=this.r5c;return b?f.isViewColumn(h)?(b.getValue=j.getFieldByName(h.value),function(a,b,c){return c.getValue.getValue(b)}):h.value?(b.getValue=i.kVc[h.value],d.isNullOrUndefined(b.getValue)&&(b.getValue={getValue:function(a){return g.cUc._getValueByField(h.value,a)}}),function(a,b,c){return c.getValue.getValue(b)}):(b.getValue=i._dataSource._data[h].data,function(a,b,c){return c.getValue[b]}):(c=h.value+"",e=h+"",h.value?function(a,b){return a._getValueByField(c,b)}:function(a,b){return a._dataSource._data[e].data[b]})},a.prototype.f5c=function(a){return j},a.prototype.E5c=function(){var a=this,b=a.cUc;return a.QVc||a.PVc(),a.r5c=new g.FieldManager(a.i6,b),a.sgd(),a.LVc=a.r5c.prepareFields(a.LVc),a.ead(),a.r5c},a.prototype.getLookup=function(a){return g.getLookupBy(this.cUc,a)},a.prototype.isLookupField=function(a){return g.isLookupField(this.cUc,a)},a.prototype.isLookupListField=function(a){return g.isLookupListField(this.cUc,a)},a.prototype.isLookupRelationField=function(a){return g.isLookupRelationField(this.cUc,a)},a.prototype.UVc=function(a){this.QVc||this.PVc();var b=this.QVc[a];return b},a.prototype.VVc=function(a){return this.QVc||this.PVc(),this.QVc.indexOf(a)},a.prototype.length=function(){return this.cUc.length()},a.prototype.visibleLength=function(){return this.QVc||this.PVc(),this.QVc.length},a.prototype.getDirtyIndexes=function(){var a=this;return a.cUc.getDirtyIndexes().map(function(b){return a.VVc(b)})},a.prototype.isInserted=function(a){var b=this,c=b.UVc(a);return b.had(c)},a.prototype.had=function(a){return this.cUc.isInserted(a)},a.prototype.isUpdated=function(a){var b,c=this,d=c.UVc(a);return c.OG=!0,b=c.cUc.isUpdated(d),c.OG=!1,b},a.prototype.getErrorInfo=function(a){var b=this,c=b.UVc(a);return this.cUc.getErrorInfo(c)},a.prototype.insertItem=function(a,b,c,e){var f=this,g=f.Q9c(c,e),h=g.success,i=g.fail,j=f.UVc(a),k=f.L5c(b);return f.M5c(k),d.isNullOrUndefined(j)&&(f.AX()?(j=f.length(),f.N5c(k)):j=a),f.cUc.insertItem(j,k,function(a){f.R9c(j,k),h&&h(a)},i)},a.prototype.R9c=function(a,b){var c,d,e=this;e.g5c(a,b),c=e.length(),d=!e.autoFilter&&!!e.QVc,d&&e.QVc.push(c-1),e.W5c(c,d)},a.prototype.L5c=function(a){var b,c,e,f,g,h,i={},j=this.LVc;for(b=0,c=j;b<c.length;b++)e=c[b],f=e.value instanceof Function?e.value.name:e.value,g=a[f],d.isUndefined(g)||(h=e.value,"string"==typeof h?i[h]=g:h(i,g));return i},a.prototype.iad=function(a,b,c){var e,f,g,h,i,j=this,k=j.r5c,l=j.cUc,m=k.getFieldByPosition(b),n=l.q9c(m.valueRelation,a);if(m.isOneToMany){if(n=n&&d.isNumber(m.getValueIndex(a)),!n&&(g=!1,l.r9c(m.valueRelation,a,(e={},e[m.dimRelationKey]=m.getDimValue(),e),function(b){k.setCrossFieldInsertedIndex(m,a,b.index),g=!0},c),!g))return}else if(n){if(i=!1,l.p9c(m.dimRelationPath,a,m.getDimValue(),function(){i=!0},c),!i)return}else if(h=!1,l.r9c(m.valueRelation,a,(f={},f[m.dimRelationKey]=m.getDimValue(),f),function(){h=!0},c),!h)return;return m.getRelationField(a)},a.prototype.updateItem=function(a,b,c,e,f){var g,h,j,k,l,m=f&&f.hasAddNewRowData,n=f&&f.currentModelIndex,o=this,p=m?n:o.UVc(a),q=o.P5c(p,b),r=q.colIndex,s=q.isCross;return s&&(h=o.r5c,j=h.getFieldByPosition(r),j.isOneToMany||(k=h.getFields(function(a){return a.initialOptionIndex===j.initialOptionIndex&&a.name!==j.name&&!d.isNullOrUndefined(a.getValueIndex(p))}),k.length>0&&(l=k[0].name,o.Skc(a,(g={},g[l]=i,g),i,i,f)))),o.Skc(a,b,c,e,f)},a.prototype.Skc=function(a,b,c,e,f){var g=f&&f.hasAddNewRowData,h=f&&f.currentModelIndex,i=this,j=i.Q9c(c,e),k=j.success,l=j.fail,m=g?h:i.UVc(a),n=i.P5c(m,b),o=n.data,p=n.originValueOfField,q=n.field,r=n.colIndex,s=n.isCross,t=n.isValueFunction,u=o[q],v=q;if(s){if(i.had(m))return void l();if(v=i.iad(m,r,l),d.isNullOrUndefined(v))return void l()}return t?(i.S9c(o,p),i.cUc.Skc(m,o,q,p,function(a){i.T9c(m,q,p,o[q]),k(a)},l)):(i.S9c(o,p),i.cUc.p9c(v,m,u,function(a){i.T9c(m,q,p,o[q]),k(a)},l))},a.prototype.S9c=function(a,b){var c=this;c.M5c(a),c.Q5c(a,b)},a.prototype.T9c=function(a,b,c,d){var e=this;e.h5c(a,b,c,d),e.W5c(j,!0,b,j)},a.prototype.P5c=function(a,b){var c,e,f,g,h,i,j,k,m,n,o=this.getRowData(a,!0),p=l({},o),q=this.LVc,r=0,s=0,t=!1,u=!1;for(f=0,g=q;f<g.length;f++){if(h=g[f],i=h.value instanceof Function?h.value.name:h.value,j=b[i],!d.isUndefined(j))if(k=h.value,"string"==typeof k){if(m=h.dataMap)for(n in m)j===m[n]&&(j=isNaN(n)?n:+n);c=p[k],p[k]=j,e=k,s=r,t=h.isCross}else u=!0,k(p,j);r++}return{data:p,originValueOfField:c,field:e,colIndex:s,isCross:t,isValueFunction:u}},a.prototype.resetItem=function(a,b,c){var e=this,f=e.Q9c(b,c),g=f.success,h=f.fail,i=e.UVc(a),j=this.getRowData(i,!0),k=e.S5c(i);return d.isNullOrUndefined(a)||d.isNullOrUndefined(i)?void h():e.cUc.resetItem(i,function(a){e.U9c(i,j,k),g(a)},h)},a.prototype.U9c=function(a,b,c){var d=this;d.dad(a),d.w5c(a,b,c),d.W5c(j,!0,j,j)},a.prototype.saveItem=function(a,b,c){var d=this,e=d.Q9c(b,c),f=e.success,g=e.fail,h=d.UVc(a);return d.cUc.saveItem(h,function(a){f(a)},g)},a.prototype.getRowData=function(a,b,c){var d=this,e=b?a:d.UVc(a);return d.WVc(e,c)},a.prototype.fetch=function(a){var b,c=this,d=c.cUc.nVc.tables,e=Object.keys(d);if(e.length>0)return b=e.map(function(b){var c=d[b];return c&&c.fetch(a)}),Promise.all(b).then(function(a){c.aad(),c.Y9c()&&(c.E5c(),c._9c()),c.wgd||c.vgd();var b=c;return(b.nid||b.oid)&&(b.nid&&b.nid(),b.oid&&b.oid()),a})},a.prototype.vgd=function(){var a,b,c,e,f,g=this.LVc;for(a=0,b=g;a<b.length;a++)c=b[a],c.cross||(e=c.lookup,d.isArray(e)?"string"==typeof c.value&&c.value.indexOf(".")===-1&&(e=d.getUniqueArray(e),e.length>0&&(f=c.style,f||(f=c.style={}),f.cellType||(f.cellType={type:"combobox",items:e}))):d.isString(e)&&e?this.xgd(c,e):d.isObject(e)&&this.xgd(c,e.name,e.columns))},a.prototype.xgd=function(a,b,c){var d,g,h,i,j,k,l,m,n=a.style;n||(n=a.style={}),d=n.cellButtons,d||(d=n.cellButtons=[]),g=n.dropDowns,g||(g=n.dropDowns=[]),h=f.array_find(d,function(a){return"openMultiColumn"===a.command}),i=f.array_find(g,function(a){return"multiColumn"===a.type}),h||i||(j=this.ygd(b),k=j.table,l=j.field,k&&l&&k!==this.cUc&&(m=k.columns,m&&(d.push({imageType:"ellipsis",command:"openMultiColumn",useButtonStyle:!0}),g.push({type:"multiColumn",option:{dataSource:k.views[e.DEFAULT_VIEW_NAME]||k.addView(e.DEFAULT_VIEW_NAME),bindingInfos:this.zgd(m,c),key:l}}))))},a.prototype.ygd=function(a){var b,c,d,e,f,g=this.cUc.nVc.relationships;for(d=0,e=g;d<e.length;d++)if(f=e[d],f.sourceRelationshipName===a){b=f.targetTable,c=f.targetFieldName;break}return{table:b,field:c}},a.prototype.zgd=function(a,b){return b?b.map(function(a){return d.isString(a)?{name:a,width:"*"}:(a=a,{name:a.value,width:d.isNullOrUndefined(a.width)?"*":a.width,displayName:a.caption,visible:a.visible})}):Object.keys(a).map(function(b){var c=a[b];return{name:c.value,width:d.isNullOrUndefined(c.width)?"*":c.width,displayName:c.caption,visible:c.visible}})},a.prototype.W6c=function(){var a,b=this,c=b.cUc.length(),d=[];for(a=0;a<c;a++)d.push(b.WVc(a));return d},a.prototype.M5c=function(a){var b,c,d,e,f,g,h,i=this.LVc;for(b=0,c=i;b<c.length;b++)if(d=c[b],e=d.dataMap,f=d.value,"string"==typeof f){if(e)for(g in e)a[f]===e[g]&&(a[f]=isNaN(g)?g:+g);a.hasOwnProperty(f)&&(h=this.cUc.C4c(f),h&&h.relatedTable&&h.setValue&&h.setValue(a))}},a.prototype.bWc=function(a,b){var c,d,e=this.IVc;if(e&&e.length>0){for(c=0;c<b;c++)d=e.indexOf(a+c),d>-1&&e.splice(d,1);for(c=0;c<e.length;c++)e[c]>a&&(e[c]-=b)}},a.prototype.removeRowData=function(a,b,c,e){var f=this,g=f.Q9c(c,e),h=g.success,i=g.fail,j=f.cUc,k=f.UVc(a);return d.isNullOrUndefined(a)||d.isNullOrUndefined(k)||d.isNullOrUndefined(b)?void i():void j.remove(k,b,function(a){f.V9c(k,b),h(a)},i)},a.prototype.V9c=function(a,b){var c,d,e,f,g=this;for(g.bWc(a,b),d=0,e=g.QVc.length;d<e;d++)f=g.QVc[d],a===f?c=d:a<f&&(g.QVc[d]-=b);g.QVc.splice(c,b),g.gad(a,b),g.i5c(a,b),g.W5c(void 0,!0)},a.prototype.getChanges=function(){var a,b,c,d=this.cUc,e=d.getChanges();for(a=0,b=e;a<b.length;a++)c=b[a],c.index=this.VVc(c.index);return e},a.prototype.isDataLengthChanged=function(){return this.cUc.isDataLengthChanged()},a.prototype.submitChanges=function(a){var b=this,c=b.Q9c(),d=c.success,e=c.fail,f=b.cUc;return f.submitChanges(function(c,d,e){if(a){var f=b.VVc(c);a(f,d,e)}}).then(function(){b.W9c(),d()}).catch(e)},a.prototype.W9c=function(){},a.prototype.cancelChanges=function(){var a=this,b=a.Q9c(),c=b.success,d=b.fail,e=a.isDataLengthChanged();a.cUc.cancelChanges(function(){a.X9c(e),c()},d)},a.prototype.X9c=function(a){var b=this;b.Iid(),a&&b.PVc(),b.fad(),b.W5c(j,!0)},a.prototype.zcd=function(a,b){var c,e=this,f=e.Hdd(a,b),g=e.J9c.map(function(a,b){return{index:b,option:a}}),h=e.Agd(a,b);return g=h.map(function(a){return g[a]}),e.J9c=g.map(function(a){return a.option}),f?f:(c=[],g.forEach(function(a,b){d.isNullOrUndefined(a.option.cross)||a.index===b||c.push({oldIndex:a.index,newIndex:b})}),void e.jad(c))},a.prototype.bed=function(){var a,b=this,c=b.JVc;return c&&c.length>0?(a=[],c.forEach(function(c,d){a.push(b.LVc[c].value)}),a):[]},a.prototype.ced=function(a){var b,c=this,e=c.LVc;return d.isNullOrUndefined(a)?[]:b=a.map(function(a){return d.findIndex(e,function(b){return b.value===a})})},a.prototype.h7c=function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q=this;if(q.LVc.forEach(function(a,b){a.lkc=b}),d=q.KVc,e=f.ugd(a,b,c,q.LVc,q.KVc,q.JVc,q.J9c),g=q.JVc.map(function(a){return q.LVc[a]}),q.LVc=e.map(function(a){return q.LVc[a]}),g&&g.length){for(h=[],i=q.LVc.length,j=-1,k=0,l=g;k<l.length;k++)m=l[k],n=q.LVc.indexOf(m),j=Math.max(n,j),h.push(n);for(o=0;o<i;o++)h.indexOf(o)===-1&&h.push(o);q.KVc=h,q.JVc=h.slice(0,g.length)}return p=q.LVc.reduce(function(a,b,c){return b.lkc!==c&&a.push({oldIndex:b.lkc,newIndex:c}),delete b.lkc,a},[]),q.LVc.forEach(function(a){var b,c,d,e,f;for(b=0,c=p;b<c.length;b++)if(d=c[b],e=d.oldIndex,f=d.newIndex,a.n4c===e){a.n4c=f;break}}),q.r5c&&q.r5c.moveFieldsByIndexes(p),p.map(function(a){return a.oldIndex=q.ded(a.oldIndex,d),a.newIndex=q.ded(a.newIndex),a})},a.prototype.eed=function(a){var b=this,c=b.LVc,e=b.J9c,f=c[a];return f.isCross?f.kad:d.findIndex(e,function(a){return a.value===f.value})},a.prototype._dd=function(a){var b,c=this,d=c.JVc,e=c.J9c;return a=a||d.map(function(a){return c.eed(a)}),b=f.generatePinnedColumnIndexMap(a,e.length)},a.prototype.Agd=function(a,b){var c,e,g,h,i,j,k;if(a!==b)return c=this,e=c.JVc,g=c.J9c.map(function(a,b){return{index:b}}),h=e.map(function(a){return c.eed(a)}),i=f.generatePinnedColumnIndexMap(h,g.length),i.length>0&&(a=i[a],b=i[b]),j=h.map(function(a){var b=g[a];return b.fed=!0,b}),d.swapArrayItems(g,a,b,1),k=g.filter(function(a){return!a.fed}),j.forEach(function(a,b){k.splice(h[b],0,a)}),k.map(function(a){return a.index})},a.prototype.getColumnInfos=function(a,b){var c,e=[],f=this.LVc,g=this.KVc,h=this.cUc,i=function(c){var i,k=g.length>0?d.isNullOrUndefined(g[c])?c:g[c]:c,l=f[k];if(h.yVc(l.value)&&(l.isPrimaryKey=!0),!a||!l.isGroup){if(b&&l.isCross&&(i=l.kad,l=j.J9c[i],l.kad=i,e.some(function(a){return a===l})))return"continue";e.push(l)}},j=this;for(c=0;c<f.length;c++)i(c);return e},a.prototype.oad=function(a){if(a.indexOf(".")>=0)return!0;var b=this.cUc.s9c(a);return!d.isNullOrUndefined(b)&&b!==this.cUc},a.prototype.setColumnInfos=function(a){this.LVc=a},a.prototype.Qid=function(){var a,b,c,d,e,f,g,h=this.J9c;for(a=h.length-1;a>=0;a--)b=h[a].value,"string"==typeof b&&"="===b[0]&&h.splice(a,1);for(c=this.LVc,a=0,d=0;a<c.length;)e=c[a],f=h[d],e.isGroup||e.isCross?a++:f&&f.cross?d++:(g=e.value,b=f&&f.value,g===b?(a++,d++):"string"==typeof g&&"="===g[0]?(h.splice(d,0,e),a++,d++):a++)},a.prototype.bUc=function(a){var b=this.cUc;return!!b.DVc(a)},a.prototype.togglePinnedRows=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(d.isNullOrUndefined(a))return this.IVc&&this.IVc.length;for(b=this.IVc,c=this.QVc,e=a.length,f=[],g=[],h=b.length,i=0;i<e;i++)j=c[a[i]],j>-1&&(k=b.indexOf(j),k>-1?g.push(k):f.push(j));if(l=f.length,m=g.length,b.length-m+l>this.HVc)return-1;if(m>0)for(g.sort(),i=m-1;i>=0;i--)b.splice(g[i],1);for(i=0;i<l;i++)b.push(f[i]);if(m>0||l>0){for(n=[],o=c.length,p=b.length,p>0&&(n=b.slice(0)),j=p,i=0;i<o;i++)b.indexOf(c[i])===-1&&(n[j++]=c[i]);if(!this.U5c()&&!this.T5c())for(i=0;i<m;i++)q=c[g[i]],r=n.indexOf(q),s=this.d7c(q,h,n),n.splice(r,1),s=s>r?s-1:s,n.splice(s,0,q),h>p&&h--;this.QVc=n,this.XVc(),this.ZVc()}return b.length},a.prototype.togglePinnedColumns=function(a){var b,c,e,g,h,i,j,k,l,m,n,o=this;if(d.isNullOrUndefined(a))return this.JVc&&this.JVc.length;for(b=this.KVc,c=b.length>0,a=a.filter(function(a){var d=c?b[a]:a;return!o.LVc[d].isCross}),e=this.JVc,g=a.length,h=[],i=[],j=0;j<g;j++)k=c?b[a[j]]:a[j],k>-1&&(l=e.indexOf(k),l>-1?i.push(l):h.push(k));if(m=h.length,n=i.length,e.length-n+m>this.HVc)return-1;if(n>0)for(i.sort(),j=n-1;j>=0;j--)e.splice(i[j],1);for(j=0;j<m;j++)e.push(h[j]);return(m>0||n>0)&&(this.KVc=f.generatePinnedColumnIndexMap(e,this.LVc.length)),e.length},a.prototype.ged=function(a){var b=this,c=b.KVc;return c&&c.length>0?c[a]:a},a.prototype.ded=function(a,b){var c=this;return b=b||c.KVc,b&&b.length>0?b.indexOf(+a):+a},a.prototype.getRowDataAsync=function(a){var b=this;return b.fetch().then(function(c){var d=b.UVc(a);return b.WVc(d)})},a.prototype.d7c=function(a,b,c){for(var d=b;d<c.length;d++)if(c[d]>a)return d;return c.length},a.prototype.WVc=function(a,b){var c,e,f,g=this,h=g.LVc,i={},j=[],k=!!g.T3c,l=g.cUc;if(h.forEach(function(c,e){var f,h,m,n,o,p,q=c.value;b&&!b[q]||(c.isCross?i[c.value]=g.r5c.getFieldByPosition(e).getValue(a):q&&!c.isGroup&&("string"==typeof q?(f=q.indexOf(".")>=0,h="="===q[0],m=l.kVc&&d.isNullOrUndefined(l.kVc[q]),(!k||k&&(f||h||m))&&(n=q,o=l._getValueByField(q,a),p=c.dataMap,p&&(o=p[o]||o),i[n]=o)):"function"==typeof q&&j.push({name:q.name,caption:c.caption,value:q})))}),j.length>0&&(c=g.cUc.GVc(a),j.forEach(function(a){i[a.name]=a.value(c)})),k){e=this.r5c.getFieldValues(a);for(f in e)e.hasOwnProperty(f)&&(i[f]=e[f])}return i},a.prototype.S5c=function(a){var b,c,e,f=this,g=f.LVc,h={},i=[],j=!!f.T3c,k=f.cUc;if(g.forEach(function(b,c){var e,g,l,m,n,o,p=b.value;b.isCross?h[b.value]=f.r5c.getFieldByPosition(c).getOriginalValue(a):p&&!b.isGroup&&("string"==typeof p?(e=p.indexOf(".")>=0,g="="===p[0],l=k.kVc&&d.isNullOrUndefined(k.kVc[p]),(!j||j&&(e||g||l))&&(m=p,n=g?k._getValueByField(p,a):k.o9c(p,a),o=b.dataMap,o&&(n=o[n]||n),h[m]=n)):"function"==typeof p&&i.push({name:p.name,caption:b.caption,value:p}))}),i.length>0&&(b=f.cUc.GVc(a),i.forEach(function(a){h[a.name]=a.value(b)})),j){c=this.r5c.qad(a);for(e in c)c.hasOwnProperty(e)&&(h[e]=c[e])}return h},a.prototype.addColumn=function(a){"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),"="===a.value[0]&&(a.readonly=!0),this.LVc.push(a)},a.prototype.getColumn=function(a){var b=this.getColumnInfos();return d.isNullOrUndefined(a)?b:b[a]},a.prototype.removeColumn=function(a){var b,c,d=this.LVc;for(b=0;b<d.length;b++)if(c=d[b],c.value===a){d.splice(b,1);break}},a.prototype.W5c=function(a,b,c,d){b||this.PVc(a);var e=this.$Vc;e&&this.autoFilter&&this.filter(),this.$Vc=e,this.ZVc(),this.J6c(c)},a.prototype.excludeInsertedPinnedRows=function(){var a,b=this,c=b.IVc,d=[];for(a=0;a<c.length;a++)b.isInserted(a)||d.push(c[a]);return d},a.prototype.toJSON=function(){var a,b,c,e=this,g={};if(e.I6c&&(g={sortBefore:f.removeExtraInfos(e.H6c),sortAfter:f.removeExtraInfos(e.I6c)}),a=e.J9c,0===a.length)0===e.LVc.length&&e._9c(),a=e.J9c=e.LVc;else for(b=function(b){var c,f,g=a[b].cross;d.isNullOrUndefined(g)&&(c=e.LVc.filter(function(c){return c.value===a[b].value})[0],c&&(a[b]=c)),f=a[b].validator,f&&"date"===f.type&&(m(f.value1)&&(f.value1=n(f.value1)),m(f.value2)&&(f.value2=n(f.value2)))},c=0;c<a.length;c++)b(c);return l(l({},g),{name:e.name,options:e.i6,columns:e.J9c,indexMap:e.QVc,columnIndexMap:e.KVc,autoSort:e.autoSort,sortInfo:f.removeExtraInfos(e.YVc),autoFilter:e.autoFilter,filterInfo:f.removeExtraInfos(e.$Vc),autoGroup:e.autoGroup,groupInfo:e.y3c,detailColumnsVisible:e.m5c,pinnedRows:e.excludeInsertedPinnedRows(),pinnedColumns:e.JVc})},a.prototype.fromJSON=function(a){var b,c,d,e,f,g=this;if(g.QVc=a.indexMap,b=a.columnIndexMap,c=g.LVc,b&&c&&b.length>0&&b.length<c.length)for(d=b.length;d<c.length;d++)b[d]=d;for(d=0;d<c.length;d++)e=c[d].validator,e&&"date"===e.type&&("string"==typeof e.value1&&(f=o(e.value1),f&&(e.value1=f)),"string"==typeof e.value2&&(f=o(e.value2),f&&(e.value2=f)));g.KVc=b,g.autoSort=a.autoSort,g.YVc=a.sortInfo,g.H6c=a.sortInfo,a.sortAfter&&(g.H6c=a.sortBefore,g.I6c=a.sortAfter),g.autoFilter=a.autoFilter,g.$Vc=a.filterInfo,g.autoGroup=a.autoGroup,g.y3c=a.groupInfo,g.m5c=a.detailColumnsVisible,g.IVc=a.pinnedRows,g.JVc=a.pinnedColumns},a}(),b.View=k},"./dist/src/viewField/fieldManager.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.isValidCross=b.isLookupRelationField=b.isLookupListField=b.isLookupField=b.getLookupBy=b.FieldManager=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/interfaces/interface.js"),g=c("./dist/src/viewField/utils.js"),
h=c("./dist/src/viewField/fields.js"),i=function(){function a(a,b){this.HL=[],this.positionOfField=[],this.keysOfBaseField=[],this.tad=a,this.d6c={},this.sj=b}return a.prototype.e6c=function(a,b){return this.sj._getValueByField(a,b)},a.prototype.uad=function(a,b){return this.sj.o9c(a,b)},a.prototype.vad=function(a){return this.sj.GVc(a)},a.prototype.wad=function(a){return F(this.sj,a)},a.prototype.xad=function(a){return E(this.sj,a)},a.prototype.yad=function(a){return this.sj._dataSource._data[a].data},a.prototype.zad=function(a){return!e.isNullOrUndefined(this.sj._dataSource._data[a])},a.prototype.H9c=function(a){return this.sj.H9c(a.split("."))},a.prototype.Aad=function(){return this.sj.bSc},a.prototype.Bad=function(a){return x(this.sj,a)},a.prototype.Cad=function(a){return y(this.sj,a)},a.prototype.Dad=function(a){return z(this.sj,a)},a.prototype.Ead=function(a){return A(this.sj,a)},a.prototype.getField=function(a){return this.HL[a]},a.prototype.getFieldByPosition=function(a){return this.getField(this.positionOfField[a])},a.prototype.getFieldByName=function(a){return this.HL.filter(function(b){return b.name===a})[0]},a.prototype.getFields=function(a){return this.HL.filter(a)},a.prototype.getFieldValues=function(a){var b=this,c,d;return b.positionOfField.reduce(function(e,f){return c=b.getField(f),d=c.name,e[d]=c.getValue(a),e},{})},a.prototype.qad=function(a){var b=this,c,d;return b.positionOfField.filter(function(a){return b.keysOfBaseField.indexOf(a)===-1}).reduce(function(e,f){return c=b.getField(f),d=c.name,e[d]=c.getValue(a),e},{})},a.prototype.moveFields=function(a,b,c){e.swapArrayItems(this.HL,a,b,c)},a.prototype.moveFieldsByIndexes=function(a){var b=this;a.forEach(function(a){a.field=b.HL[a.oldIndex]}),a.forEach(function(a){b.HL[a.newIndex]=a.field})},a.prototype.removeFields=function(a,b){this.HL.splice(a,b||1)},a.prototype.reset=function(){var a=this;a.positionOfField=a.keysOfBaseField.slice(),a.HL=a.HL.reduce(function(b,c){return a.keysOfBaseField.indexOf(c.key)>-1?b.concat(c):b},[])},a.prototype.f6c=function(a){var b=this,c=b.d6c,d=c[a],e=b.Aad(),f=e.getCalcService();return d||(d=c[a]=b.fixExpression(f.parse(e,a,0,0))),function(a,b){return e.L$a(a,b),f.evaluateExpression(e,d,{row:0,col:0})}},a.prototype.Fad=function(a,b){var c=this,d=c.d6c,f=d[a],g=b||c.Aad(),h=g.getCalcService();return f||(f=d[a]=c.fixExpression(h.parse(g,a,0,0))),function(a,b){g.L$a(a,b);var c=h.lh.evaluateExpression(f,g.getEvaluatorContext({row:0,col:0},!1),!1,!0);return e.isNullOrUndefined(c.toArray)?[]:c.toArray()}},a.prototype.fixExpression=function(a){var b,c,e,f,g,h,i=this;if(a.function)for(a.function.isReverseArgs&&a.function.isReverseArgs()&&a.arguments.reverse(),b=0,c=a.arguments;b<c.length;b++)e=c[b],i.fixExpression(e);else for(f=0,g=Object.getOwnPropertyNames(a);f<g.length;f++)h=g[f],a[h]instanceof d.Expression&&i.fixExpression(a[h]);return a},a.prototype.C5c=function(a){var b=this;return a.key=b.HL.length,b.HL.push(a),a},a.prototype.addDataBaseField=function(a,b,c){var d=this,e=d.addColumnDataField(a,b,c);return d.g6c(e)},a.prototype.addReaderBaseField=function(a,b,c){var d=this,e=d.addColumnDataReaderField(a,"function"==typeof b?b:function(a){return d.e6c(b,a)},c);return d.g6c(e)},a.prototype.g6c=function(a){var b=this,c=a.key;return b.keysOfBaseField.push(c),b.positionOfField.push(c),a},a.prototype.addColumnDataField=function(a,b,c){return this.C5c(new h.ColumnDataField(a,b,c))},a.prototype.addColumnDataReaderField=function(a,b,c){return this.C5c(new h.ColumnDataReaderField(a,b,c))},a.prototype.addDataField=function(a,b){return this.C5c(new h.DataField(a,b))},a.prototype.addFormulaField=function(a,b){return this.C5c(this.h6c(a,b))},a.prototype.h6c=function(a,b){return new h.FormulaField(a,b,this.f6c(b))},a.prototype.addCategoryFormulaField=function(a,b){return this.C5c(this.i6c(a,b))},a.prototype.i6c=function(a,b){return new h.CategoryFormulaField(a,b,this.f6c(b))},a.prototype.addCategoryField=function(a,b){return this.C5c(this.dNa(a,b))},a.prototype.dNa=function(a,b){return new h.CategoryField(a,b)},a.prototype.addSliceCategoryField=function(a){return this.C5c(new h.SliceCategoryField(a))},a.prototype.j6c=function(a,b,c,d,f){var h,i,j,k,l,m,n,o=this,p=a.fieldExtra,q=a.field;for(m=0,n=c.length;m<n;m++)j=c[m],i=j.result,k=j.key,l=a.sliceFields[k],e.isUndefined(l)&&(h=q.getValueByKey(k),l=o.addSliceCategoryField(g.combineName(h,a.sliceKeys.length,b.name)),l.setFieldExtra(p),a.sliceFields[k]=l,a.sliceKeys.push(l.key)),l.setData(i,d,f)},a.prototype.k6c=function(a,b,c,d){var e=this;return g.isField(a)?e.getFieldByName(a):g.isFormula(a)?e.l6c(d+"_formula_source",b,a,c):g.isRelated(a)?new h.ColumnDataReaderField(d+"_related_source",function(b){return e.e6c(a,b)},null):e.getFieldByName(a)},a.prototype.l6c=function(a,b,c,d){var e=this,f=e.h6c(g.combineName(a,b),c);return f.evaluateFormulaBy(d),f},a.prototype.buildGroupFields=function(a,b){var c=this,d,f,h=[];return a.forEach(function(a,i){if(!e.isNullOrEmpty(a.field)){f=e.isNullOrUndefined(f)?d={}:f.group={};var j=g.combineName(a.field,i),k=c.k6c(a.field,j,b,"group_field"),l=c.addCategoryField(j,k);l.setFieldExtra(a),h.push(l.key),f.field=l,e.isNullOrUndefined(a.summaryFields)||a.summaryFields.forEach(function(a,d){var i,k,l,m,n,o,p,q,r;e.isNullOrEmpty(a.formula)||(i=g.combineName(a.formula,d,j),k=c.addCategoryFormulaField(i,a.formula),k.setFieldExtra(a),e.isNullOrUndefined(f.formulas)&&(f.formulas=[]),l=f.formulas.push(k)-1,h.push(k.key),e.isNullOrUndefined(a.slice)||(m=a.slice,n=e.isString(m),o=n?m:m.field,p=g.combineName(o,i),q=c.k6c(o,p,b,"slice"),q=c.dNa(g.combineName("slice_category",p),q),e.isNullOrUndefined(f.slices)&&(f.slices=[]),r=c.i6c(g.combineName("slice_formula_result",p),a.formula),f.slices.push({field:q,formula:r,formulaIndex:l,sliceKeys:[],fieldExtra:n?{}:m,sliceFields:{},addSliceField:c.j6c.bind(c)})))})}}),c.positionOfField=h.concat(c.keysOfBaseField),d},a.prototype.transposeSliceFields=function(a){var b=this,c,d;a.slices&&a.slices.forEach(function(f){var g;c=b.positionOfField.indexOf(a.formulas[f.formulaIndex].key),d=f.sliceKeys,e.isNullOrUndefined(f.fieldExtra.sort)||(d=d.map(function(a){return b.getField(a)}).sort(G(f.fieldExtra.sort)).map(function(a){return a.key})),(g=b.positionOfField).splice.apply(g,j([c+1,0],d))}),a.group&&b.transposeSliceFields(a.group)},a.prototype.prepareFields=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,q,r=this,s=[];for(b=0,c=0;b<a.length;b++,c++)if(d=a[b],e=p(d),f=d.value,g=d.cross,g){if(i=r.Gad(a,b),j=i.crossColumnOptions,k=i.endColIndex,l=j.columns.length,m=r.Had(j),0===m)continue;for(n=function(d,e){var f,g,i=c+d,j=b+e,k=r.getField(i);k.setFieldExtra(a[j]),f={value:k.name,name:k.name,isCross:!0,kad:j},k.isReadonly()&&(f.readonly=!0),g=k.extra,g&&h.setFieldExtraProperties(function(a){g[a]&&(f[a]=g[a])}),s.push(f)},o=0,q=0;o<m;o++,q++,q>=l&&(q=0))n(o,q);b=k,c+=m-1}else r.zad(e)?(r.addDataBaseField(e,r.yad(e),d),s.push(a[b])):(r.addReaderBaseField(e,f,d),s.push(a[b]));return w(s),s},a.prototype.Gad=function(a,b){var c,d,e=this,f=b,g=a[b],h=g.cross,i=e.Iad(h,[g],f);if("string"==typeof h){for(c=b,d=b;b<a.length&&(d++,!(d<a.length&&h!==a[d].cross));)b++;i=e.Iad(h,a.slice(c,d),f)}return{crossColumnOptions:i,endColIndex:b}},a.prototype.Iad=function(a,b,c){var d="string"==typeof a?this.tad.cross[a]:a;return{initialOptionIndex:c,crossKeys:b.map(function(a){return a.$dd}),cross:d,columns:b,lookup:this.Jad(d,b)}},a.prototype.Jad=function(a,b){var c=this;return b.every(function(b){return c.isValidCross(a,b.value)})&&this.Bad(a.over)},a.prototype.isValidCross=function(a,b){return C(this.sj,a,b)},a.prototype.Had=function(a){var b=this,c=a.lookup,d=0;return e.isArray(c)?d=b.Kad(a):e.isString(c)?d=b.Lad(a):e.isObject(c)&&(d=b.Lad(a)),d},a.prototype.Lad=function(a){var b,c,d,f,h,i,j,k,l,o,p,q,w,x,y,z,A,B=this,C=a.cross,D=B.tad.showCrossValueHeader,E=v(C.caption),F=0,G=m(a),H=C.over,I=r(H),J=H,K=C.attributes||[],L=K.length,M=u(K[0],!0),N=B.Mad(B.xad(J),J),O=N.relationTableName||t(K[0]),P=N.relationTable||B.Nad(O),Q=P.length(),R=N.relationPrimaryKey||B.Oad(O,I),S=C.filter?B.Fad(n(C.filter,M),P.bSc):null;for(e.isNullOrUndefined(S)||(c=S(null),c.length>0&&(b=c.reduce(function(a,b){var c="object"==typeof b?b[R]:b;return a[c]=!0,a},{}))),d=[],f=0;f<L;f++)h=r(K[f]),i=s(K[f]),d.push({fieldName:h,formatter:i});for(j=0;j<Q;j++)if(k=P._getValueByField(R,j),e.isNullOrUndefined(b)||b[k]){for(l=E.slice(),f=0;f<L;f++)h=d[f].fieldName,o=P._getValueByField(h,j),i=d[f].formatter,e.isNullOrUndefined(i)||(o=e.format(o,i)),l.push(o);for(p=0;p<G.length;p++)q=G[p],w=q.valueRelation,x=q.valueCaption,y=q.valueIndex,z=q.valueCrossKey,A=D?l.concat(x):l,B.Pad({path:A,value:g.combineName(w,k,H,z),valueRelation:w,dimRelationPath:J,dimRelationKey:I,dimTableName:O,dimTableKeyFieldValue:k,initialOptionIndex:y}),F++}return F},a.prototype.Kad=function(a){var b,c,d,e,f,h,i,j,k,l,n=this,o=a.cross,p=a.lookup,q=n.tad.showCrossValueHeader,s=v(o.caption),t=0,u=m(a),w=o.over,x=r(w),y=w,z=p.length;for(b=0;b<z;b++)for(c=s.slice(),d=p[b],c.push(d),e=0;e<u.length;e++)f=u[e],h=f.valueRelation,i=f.valueCaption,j=f.valueIndex,k=f.valueCrossKey,l=q?c.concat(i):c,n.Pad({path:l,value:g.combineName(h,d,w,k),valueRelation:h,dimRelationPath:y,dimRelationKey:x,dimTableKeyFieldValue:d,initialOptionIndex:j}),t++;return t},a.prototype.setCrossFieldValues=function(a){var b,c,d,e,f,g=this,i=g.HL,j=a.length,k=i.filter(function(a){return a instanceof h.CrossField});if(k.length>0)for(b=0;b<j;b++)for(c=a[b],d={},e=0;e<k.length;e++)f=k[e],g.ead(f,c,d)},a.prototype.ead=function(a,b,c){var d,f=this,g=a.dimRelationPath,h=c[g];if(e.isNullOrUndefined(h)&&a.isOneToMany&&(h=c[g]=f.e6c(g,b)),e.isArray(h))for(d=0;d<h.length;d++)if(a.sed(h[d],a.dimTableKeyFieldValue)&&e.isNullOrUndefined(a.getValueIndex(b))){a.setValueIndex(b,d);break}},a.prototype.Oad=function(a,b){var c=this,d=c.wad(function(c){return c.sourceFieldName===b&&c.sourceRelationshipName===a});return d?d.targetFieldName:(d=c.wad(function(c){return c.targetFieldName===b&&c.targetRelationshipName===a}),d?d.sourceFieldName:void 0)},a.prototype.Nad=function(a){var b=this,c=b.wad(function(b){return b.sourceRelationshipName===a||b.targetRelationshipName===a})||{},d=c.sourceRelationshipName===a?c.sourceField:c.targetField;return d?d.targetTable:{length:function(){return 0}}},a.prototype.Mad=function(a,b){return B(this.sj,a,b)},a.prototype.Qad=function(a){var b=this,c=new h.CrossField(a,b.e6c.bind(b),b.uad.bind(b),b.vad.bind(b));return b.C5c(c),b.g6c(c),c},a.prototype.Pad=function(a){var b,c,d,e=this,f=e.Qad(a);f.isReadonly()||(b=k(e.H9c.bind(e),f),c=b.isOneToMany,d=b.relationTemplate,c&&(f.isOneToMany=c,f.valueArrayRelation=d))},a.prototype.isCrossField=function(a){return a instanceof h.CrossField},a.prototype.clearCrossFieldData=function(){var a,b,c=this,d=c.HL;for(a=0;a<d.length;a++)b=d[a],b instanceof h.CrossField&&b.clearData()},a.prototype.resetCrossFieldRowValues=function(a){var b,c,d=this,e=d.HL,f={};for(b=0;b<e.length;b++)c=e[b],c instanceof h.CrossField&&(c.clearValue(a),d.ead(c,a,f))},a.prototype.removeCrossFieldValues=function(a,b){var c,d,e=this,f=e.HL;for(c=0;c<f.length;c++)d=f[c],d instanceof h.CrossField&&d.removeData(a,b)},a.prototype.setCrossFieldInsertedIndex=function(a,b,c){var d,f,g=this,i=g.HL,j=u(a.valueRelation,!0);for(d=0;d<i.length;d++)f=i[d],f instanceof h.CrossField&&f.isOneToMany&&a.dimTableKeyFieldValue===f.dimTableKeyFieldValue&&e.isNullOrUndefined(f.getValueIndex(b))&&j===u(f.valueRelation,!0)&&f.setValueIndex(b,c)},a}(),b.FieldManager=i;function k(a,b){var c,d,f=b.valueRelation,h=f.split("."),i=a(f),j="",k=!1,l=!1;for(c=0;c<h.length;c++)d=i[c],e.isNullOrEmpty(h[c])||(j+="."+h[c]),!l&&d&&"array"===d.type&&d.name===h[c]&&(l=!0,k=!0,j+="."+g.RelationTemplateToken);return{isOneToMany:k,relationTemplate:j.slice(1)}}function l(a,b,c,d){var e=r(a),f=b||e;return{valueRelation:a,valueCaption:f,valueIndex:c,valueCrossKey:d}}function m(a){var b,c=a.columns,d=a.crossKeys,e=a.initialOptionIndex,f=[];for(b=0;b<c.length;b++)f.push(l(c[b].value,c[b].caption,e+b,d[b]));return f}function n(a,b){return o(a,b,"")}function o(a,b,c){return!e.isNullOrEmpty(b)&&a.indexOf(b)>=0?(a=a.replace(b,c),o(a,b,c)):a}function p(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}function q(a){var b,c;return b="string"==typeof a||e.isNullOrUndefined(a)?a:"function"==typeof a?a.name:a.value,c=(b||"").split(".")}function r(a){var b=q(a);return b[b.length-1]}function s(a){if(!e.isNullOrEmpty(a.formatter))return a.formatter}function t(a){var b=q(a);return b[b.length-2]}function u(a,b){var c=q(a);return b&&c.splice(c.length-1,0,""),c.slice(0,c.length-1).join(".")}function v(a){return"string"==typeof a?[a]:a||[]}function w(a){var b,c,d,f=0,g={};for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)?(a[b].caption=c.map(function(a){return null===a||void 0===a?void 0:""+a}),g[b]=c.length,g[b]>f&&(f=g[b])):a[b].caption=null===c||void 0===c?void 0:""+c;for(b in g)if(g[b]<f)for(d=f-g[b],c=a[b].caption;d>0;)c.unshift(),d--;for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)&&1===c.length&&(a[b].caption=c[0])}function x(a,b){var c,d,f,g=a.s9c(b);if(!(e.isNullOrUndefined(g)||(c=g._dataSource.options.schema,e.isNullOrUndefined(c)||(d=c.columns,e.isNullOrUndefined(d)||(f=d[r(b)],e.isNullOrUndefined(f))))))return f.lookup}b.getLookupBy=x;function y(a,b){return z(a,b)||A(a,b)}b.isLookupField=y;function z(a,b){return e.isArray(x(a,b))}b.isLookupListField=z;function A(a,b){var c,d,f,g,h=x(a,b);if(e.isObject(h)&&(h=h.name),e.isString(h))return c=a.s9c(b),d=r(b),f=r(h),g=a.nVc.relationships.find(function(a){return a.sourceTable===c&&a.sourceFieldName===d&&a.sourceRelationshipName===f}),!e.isNullOrUndefined(g)}b.isLookupRelationField=A;function B(a,b,c){var d=r(c),e=F(a,function(a){return a.sourceFieldName===d&&a.sourceTable===b});return e?{relationTable:e.targetTable,relationPrimaryKey:e.targetFieldName,relationTableName:e.sourceRelationshipName}:{}}function C(a,b,c){var d,g,h,i,j,k,l,m,n=b.over,o=b.attributes;return!(e.isNullOrEmpty(n)||e.isNullOrEmpty(c)||c===n||D(a,c))&&(d=q(c),g=z(a,n),h=!g&&(A(a,n)&&o&&o.length>0),!(!g&&!h)&&(i=B(a,E(a,n),n),!(d.indexOf(i.relationTableName)>-1)&&(j=a.m9c(n),k=a.m9c(c),!(!j.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})||!k.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}))||(l=e.findIndex(j,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),m=e.findIndex(k,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),l>-1&&l===m&&j[l].name===k[m].name?j.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})&&k.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}):void 0))))}b.isValidCross=C;function D(a,b){var c=E(a,b),d=r(b);return c.yVc(d)||F(a,function(a){return a.sourceTable===c&&a.sourceFieldName===d||a.targetTable===c&&a.targetFieldName===d})}function E(a,b){return a.s9c(b)}function F(a,b){return a.nVc.relationships.find(b)}function G(a){var b=a.ascending,c=a.compare;return c?function(a,d){return c(a.extra.caption,d.extra.caption,b)}:function(a,c){var d=a.extra.caption,e=c.extra.caption,f=b?d:e,g=b?e:d;return f>g?1:f<g?-1:0}}},"./dist/src/viewField/fields.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CrossField=b.SliceCategoryField=b.CategoryFormulaField=b.CategoryField=b.FormulaField=b.ColumnDataReaderField=b.ColumnDataField=b.DataField=b.Field=b.setFieldExtraProperties=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/viewField/utils.js");function p(a){["caption","width","style","headerStyle","conditionalFormats","validator","headerFit"].forEach(a)}b.setFieldExtraProperties=p,f=function(){function a(a){this.name=a}return a.prototype.setFieldExtra=function(a){var b,c=this;d.isUndefined(c.extra)&&(c.extra={}),p(function(b){c.Z5c(b,a)}),d.isNullOrUndefined(a.caption)&&(b=c.name.indexOf(e.FieldNameDelimiter),b>=0&&(c.extra.caption=c.name.substring(0,b)))},a.prototype.Z5c=function(a,b){var c=this,d=b[a];d&&(c.extra[a]=d)},a.prototype.getValue=function(a){return this.data[a]},a.prototype.getOriginalValue=function(a){return this.getValue(a)},a.prototype.$5c=function(a,b,c){var d,e,f,g=this;for(g.data||(g.data=[]),c=c||0,e=c,f=a.length;e<f;e++)d=a[e],g.data[d]=b;return g.data},a.prototype._5c=function(a,b){var c,d,e,f=this;for(f.data||(f.data=[]),d=0,e=a.length;d<e;d++)c=a[d],f.data[c]=b(c);return f.data},a}(),b.Field=f,g=function(a){o(b,a);function b(b,c){var d=a.call(this,b)||this;return d.data=c||[],d}return b}(f),b.DataField=g,h=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b,c)||this;return e.column=d,e}return b}(g),b.ColumnDataField=h,i=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.column=d,e.getValue=c,e}return b}(f),b.ColumnDataReaderField=i,j=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.formula=c,e.Ik=d,e}return b.prototype.evaluateFormulaBy=function(a){var b=this,c=b.formula,d=b.Ik;return b._5c(a,function(a){return q(d(a),c)})[a[0]]},b}(g),b.FormulaField=j;function q(a,b){return a._error||a._code?"Calc Error "+b+":"+a._error+","+a._code:a}k=function(a){o(b,a);function b(b,c){var d=a.call(this,b)||this;return d.a6c=c,d.b6c={},d.Ey=[],d}return b.prototype.getKey=function(a){return this.b6c[a]},b.prototype.getMap=function(){return this.b6c},b.prototype.getValueByKey=function(a){return this.Ey[a]},b.prototype.c6c=function(a,b){this.b6c[b]=a,this.Ey[a]=b},b.prototype.getValue=function(a){var b=this;return b.data&&b.data.length>0?b.ge(a):b.a6c?b.a6c.getValue(a):void 0},b.prototype.ge=function(a){var b=this;return b.Ey[b.data[a]]},b.prototype.addKey=function(a,b){var c=this,e=c.getKey(a);return d.isUndefined(e)&&(e=b,c.c6c(e,a)),e},b}(f),b.CategoryField=k,l=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.Ik=d,e.formula=c,e}return b.prototype.evaluateFormulaBy=function(a,b){var c,d=this;return b=b||0,c=d.Ik(a,b),d.$5c(a,d.addKey(c,a[b]),b),c},b}(k),b.CategoryFormulaField=l,m=function(a){o(b,a);function b(b){return a.call(this,b)||this}return b.prototype.setData=function(a,b,c){var d=this,e=d.addKey(a,b[c]);d.$5c(b,e,c)},b}(k),b.SliceCategoryField=m,n=function(a){o(b,a);function b(b,c,d,e){var f=a.call(this,b.value)||this;return f.path=b.path,f.valueRelation=b.valueRelation,f.dimRelationPath=b.dimRelationPath,f.dimRelationKey=b.dimRelationKey,f.dimTableName=b.dimTableName,f.isDateDimValue=b.dimTableKeyFieldValue instanceof Date,f.dimTableKeyFieldValue=f.isDateDimValue?b.dimTableKeyFieldValue.getTime():b.dimTableKeyFieldValue,f.initialOptionIndex=b.initialOptionIndex,f.getValueByField=r(b,e,c),f.getOriginalValueByField=r(b,e,d),f.data=[],f}return b.prototype.setFieldExtra=function(b){a.prototype.setFieldExtra.call(this,b),this.extra.caption=this.path},b.prototype.sed=function(a,b){var c=this,d=c.isDateDimValue;return d&&a instanceof Date?a.getTime()===b:a===b},b.prototype.sad=function(a,b){var c=this,d=c.isOneToMany,e=c.dimRelationPath,f=c.dimTableKeyFieldValue;return!d&&c.sed(b(e,a),f)?a:this.data[a]},b.prototype.getDimValue=function(){var a=this,b=a.isDateDimValue,c=a.dimTableKeyFieldValue;return b?new Date(c):c},b.prototype.getValueIndex=function(a){return this.sad(a,this.getValueByField)},b.prototype.setValueIndex=function(a,b){this.data[a]=b},b.prototype.clearData=function(){this.data=[]},b.prototype.clearValue=function(a){this.data[a]=void 0},b.prototype.removeData=function(a,b){this.data.splice(a,b)},b.prototype.isReadonly=function(){return e.isFormula(this.valueRelation)||d.isFunction(this.valueRelation)},b.prototype.ge=function(a,b){var c,f=this,g=f.isOneToMany,h=f.valueArrayRelation,i=f.valueRelation,j=f.sad(a,b);if(d.isNumber(j))return c=void 0,c=g?h.replace(e.RelationTemplateToken,j+1):i,b(c,a)},b.prototype.getValue=function(a){return this.ge(a,this.getValueByField)},b.prototype.getOriginalValue=function(a){return this.ge(a,this.getOriginalValueByField)},b.prototype.getRelationField=function(a){var b=this,c=b.isOneToMany,f=b.valueArrayRelation,g=b.valueRelation,h=b.getValueIndex(a);return c?d.isNumber(h)?f.replace(e.RelationTemplateToken,h+1):void 0:g},b}(f),b.CrossField=n;function r(a,b,c){return d.isFunction(a.valueRelation)?function(a,e){return d.isFunction(a)?a(b(e)):c(a,e)}:c}},"./dist/src/viewField/groupManager.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.GroupManager=b.getGroupFieldName=b.isGroupField=b.isGroupSlice=b.isGroupSummary=b.isGroupCategory=b.getGroupOptionIndexesFrom=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/viewField/utils.js");function g(a,b){var c,e,f,g,h;if(d.isNullOrUndefined(a)||d.isNullOrUndefined(b))return a===b;if(c=Object.keys(a),e=Object.keys(b),c.length!==e.length)return!1;for(f=0,g=c;f<g.length;f++)if(h=g[f],a[h]!==b[h])return!1;return!0}function h(a){var b,c=[],d=a.split(e.FieldNameDelimiter).reverse();for(b=0;b<d.length;b+=2)c.push(d[b]);return c}b.getGroupOptionIndexesFrom=h;function i(a){return 1===h(a).length}b.isGroupCategory=i;function j(a){return 2===h(a).length}b.isGroupSummary=j;function k(a){return 3===h(a).length}b.isGroupSlice=k;function l(a){return 2===a.split(e.FieldNameDelimiter).length}b.isGroupField=l;function m(a){var b=a.split(e.FieldNameDelimiter);return b[b.length-2]}b.getGroupFieldName=m,f=function(){function a(a,b){this.i6=a,this.A4c=b}return a.prototype.isGrouped=function(a){return g(a,this.i6)},a.prototype.groupBy=function(a,b){var c=this,d=c.m6c(a,b);return{rootNode:d,indexMap:c.n6c(b,function(){return c.o6c(a,d)})}},a.prototype.n6c=function(a,b){var c,d=this,e=d.i6;return d.xc={path:[],groupOptions:e,entireScope:a},d.A4c(d.xc),c=b(),d.xc=null,d.A4c(d.xc),c},a.prototype.m6c=function(a,b){var c,d,e,f,g={};for(e=0,f=b.length;e<f;e++)d=b[e],c=g,this.p6c(c,a,d);return g},a.prototype.p6c=function(a,b,c){var e=this,f=b.field,g=f.getValue(c),h=f.addKey(g,c),i=e.q6c(a,h);b.slices&&b.slices.forEach(function(a,b){d.isUndefined(i.slices)&&(i.slices=[]),d.isUndefined(i.slices[b])&&(i.slices[b]={});var f=i.slices[b];e.p6c(f,a,c)}),b.group?e.p6c(i,b.group,c):(d.isUndefined(i.recordIndexes)&&(i.recordIndexes=[]),i.recordIndexes.push(c))},a.prototype.q6c=function(a,b){d.isUndefined(a.children)&&(a.childrenMap={},a.children=[]);var c=a.childrenMap[b];return d.isUndefined(c)&&(a.childrenMap[b]=c=a.children.length,a.children.push({key:b})),a.children[c]},a.prototype.o6c=function(a,b){var c,d=this,e=b.children,f=[];for(c in e)e.hasOwnProperty(c)&&d.r6c(e[c],a,f);return f},a.prototype.r6c=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=this,r=c.length,s=a.recordIndexes;if(q.s6c(a),s){for(d=0,e=s.length;d<e;d++)c[r+d]=s[d];q.t6c(b.formulas,c,r)}else{for(f=a.children,g=0,h=f;g<h.length;g++)i=h[g],q.r6c(i,b.group,c);q.t6c(b.formulas,c,r)}if(a.slices)for(d=0,j=a.slices,k=j.length;d<k;d++){for(l=j[d],m=b.slices[d],n=m.formula,f=l.children,o=0,p=f;o<p.length;o++)i=p[o],i.result=q.u6c(n,i.recordIndexes);m.addSliceField(m,b.formulas[m.formulaIndex],f,c,r)}q.v6c()},a.prototype.t6c=function(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++)a[d].evaluateFormulaBy(b,c)},a.prototype.u6c=function(a,b){if(a)return a.evaluateFormulaBy(b)},a.prototype.s6c=function(a){this.xc.path.push(a)},a.prototype.v6c=function(){this.xc.path.pop()},a}(),b.GroupManager=f},"./dist/src/viewField/utils.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isField=b.isRelated=b.isFormula=b.combineName=b.RelationTemplateToken=b.CaptionDelimiter=b.FieldNameDelimiter=void 0,b.FieldNameDelimiter="__",b.CaptionDelimiter="\\",b.RelationTemplateToken="{{}}";function d(){var a,c=[];for(a=0;a<arguments.length;a++)c[a]=arguments[a];return c.join(b.FieldNameDelimiter)}b.combineName=d;function e(a){return"="===a[0]}b.isFormula=e;function f(a){return a.indexOf(".")>-1}b.isRelated=f;function g(a){return a.indexOf(b.FieldNameDelimiter)>-1}b.isField=g},"./dist/src/viewField/viewField.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/viewField/groupManager.js"),b),e(c("./dist/src/viewField/fieldManager.js"),b),e(c("./dist/src/viewField/fields.js"),b),e(c("./dist/src/viewField/utils.js"),b)},"./node_modules/fetch-jsonp/build/fetch-jsonp.js":function(a,b,c){var d,e,f;!function(c,g){var h;e=[b,a],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a,b){"use strict";var c={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function d(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function e(a){try{delete window[a]}catch(b){window[a]=void 0}}function f(a){var b=document.getElementById(a);b&&document.getElementsByTagName("head")[0].removeChild(b)}function g(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=a,h=b.timeout||c.timeout,i=b.jsonpCallback||c.jsonpCallback,j=void 0;return new Promise(function(c,k){var l,m=b.jsonpCallbackFunction||d(),n=i+"_"+m;window[m]=function(a){c({ok:!0,json:function b(){return Promise.resolve(a)}}),j&&clearTimeout(j),f(n),e(m)},g+=g.indexOf("?")===-1?"?":"&",l=document.createElement("script"),l.setAttribute("src",""+g+i+"="+m),b.charset&&l.setAttribute("charset",b.charset),b.nonce&&l.setAttribute("nonce",b.nonce),b.referrerPolicy&&l.setAttribute("referrerPolicy",b.referrerPolicy),l.id=n,document.getElementsByTagName("head")[0].appendChild(l),j=setTimeout(function(){k(Error("JSONP request to "+a+" timed out")),e(m),f(n),window[m]=function(){e(m)}},h),l.onerror=function(){k(Error("JSONP request to "+a+" failed")),e(m),f(n),j&&clearTimeout(j)}})}b.exports=g})},"./node_modules/whatwg-fetch/fetch.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j;c.r(b),c.d(b,"Headers",function(){return o}),c.d(b,"Request",function(){return x}),c.d(b,"Response",function(){return A}),c.d(b,"DOMException",function(){return j}),c.d(b,"fetch",function(){return B}),d="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==d&&d,e={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};function k(a){return a&&DataView.prototype.isPrototypeOf(a)}e.arrayBuffer&&(f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(a){return a&&f.indexOf(Object.prototype.toString.call(a))>-1});function l(a){if("string"!=typeof a&&(a+=""),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(a)||""===a)throw new TypeError('Invalid character in header field name: "'+a+'"');return a.toLowerCase()}function m(a){return"string"!=typeof a&&(a+=""),a}function n(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return e.iterable&&(b[Symbol.iterator]=function(){return b}),b}function o(a){this.map={},a instanceof o?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}o.prototype.append=function(a,b){a=l(a),b=m(b);var c=this.map[a];this.map[a]=c?c+", "+b:b},o.prototype.delete=function(a){delete this.map[l(a)]},o.prototype.get=function(a){return a=l(a),this.has(a)?this.map[a]:null},o.prototype.has=function(a){return this.map.hasOwnProperty(l(a))},o.prototype.set=function(a,b){this.map[l(a)]=m(b)},o.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},o.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),n(a)},o.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),n(a)},o.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),n(a)},e.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);function p(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function q(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function r(a){var b=new FileReader,c=q(b);return b.readAsArrayBuffer(a),c}function s(a){var b=new FileReader,c=q(b);return b.readAsText(a),c}function t(a){var b,c=new Uint8Array(a),d=Array(c.length);for(b=0;b<c.length;b++)d[b]=String.fromCharCode(c[b]);return d.join("")}function u(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function v(){return this.bodyUsed=!1,this.cWc=function(a){this.bodyUsed=this.bodyUsed,this.dWc=a,a?"string"==typeof a?this.eWc=a:e.blob&&Blob.prototype.isPrototypeOf(a)?this.fWc=a:e.formData&&FormData.prototype.isPrototypeOf(a)?this.gWc=a:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this.eWc=""+a:e.arrayBuffer&&e.blob&&k(a)?(this.hWc=u(a.buffer),this.dWc=new Blob([this.hWc])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||g(a))?this.hWc=u(a):this.eWc=a=Object.prototype.toString.call(a):this.eWc="",this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this.fWc&&this.fWc.type?this.headers.set("content-type",this.fWc.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var a=p(this);if(a)return a;if(this.fWc)return Promise.resolve(this.fWc);if(this.hWc)return Promise.resolve(new Blob([this.hWc]));if(this.gWc)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.eWc]))},this.arrayBuffer=function(){if(this.hWc){var a=p(this);return a?a:ArrayBuffer.isView(this.hWc)?Promise.resolve(this.hWc.buffer.slice(this.hWc.byteOffset,this.hWc.byteOffset+this.hWc.byteLength)):Promise.resolve(this.hWc)}return this.blob().then(r)}),this.text=function(){var a=p(this);if(a)return a;if(this.fWc)return s(this.fWc);if(this.hWc)return Promise.resolve(t(this.hWc));if(this.gWc)throw Error("could not read FormData body as text");return Promise.resolve(this.eWc)},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(a){var b=a.toUpperCase();return h.indexOf(b)>-1?b:a}function x(a,b){var c,d,e;if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b=b||{},c=b.body,a instanceof x){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new o(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,c||null==a.dWc||(c=a.dWc,a.bodyUsed=!0)}else this.url=a+"";if(this.credentials=b.credentials||this.credentials||"same-origin",!b.headers&&this.headers||(this.headers=new o(b.headers)),this.method=w(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");
this.cWc(c),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==b.cache&&"no-cache"!==b.cache||(d=/([?&])_=[^&]*/,d.test(this.url)?this.url=this.url.replace(d,"$1_="+(new Date).getTime()):(e=/\?/,this.url+=(e.test(this.url)?"&":"?")+"_="+(new Date).getTime()))}x.prototype.clone=function(){return new x(this,{body:this.dWc})};function y(a){var b=new FormData;return a.trim().split("&").forEach(function(a){var c,d,e;a&&(c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," "),b.append(decodeURIComponent(d),decodeURIComponent(e)))}),b}function z(a){var b=new o,c=a.replace(/\r?\n[\t ]+/g," ");return c.split("\r").map(function(a){return 0===a.indexOf("\n")?a.substr(1,a.length):a}).forEach(function(a){var c,d=a.split(":"),e=d.shift().trim();e&&(c=d.join(":").trim(),b.append(e,c))}),b}v.call(x.prototype);function A(a,b){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b||(b={}),this.type="default",this.status=void 0===b.status?200:b.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===b.statusText?"":""+b.statusText,this.headers=new o(b.headers),this.url=b.url||"",this.cWc(a)}v.call(A.prototype),A.prototype.clone=function(){return new A(this.dWc,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},A.error=function(){var a=new A(null,{status:0,statusText:""});return a.type="error",a},i=[301,302,303,307,308],A.redirect=function(a,b){if(i.indexOf(b)===-1)throw new RangeError("Invalid status code");return new A(null,{status:b,headers:{location:a}})},j=d.DOMException;try{new j}catch(a){j=function(a,b){this.message=a,this.name=b;var c=Error(a);this.stack=c.stack},j.prototype=Object.create(Error.prototype),j.prototype.constructor=j}function B(a,b){return new Promise(function(c,f){var g,h=new x(a,b);if(h.signal&&h.signal.aborted)return f(new j("Aborted","AbortError"));g=new XMLHttpRequest;function i(){g.abort()}g.onload=function(){var a,b={status:g.status,statusText:g.statusText,headers:z(g.getAllResponseHeaders()||"")};b.url="responseURL"in g?g.responseURL:b.headers.get("X-Request-URL"),a="response"in g?g.response:g.responseText,setTimeout(function(){c(new A(a,b))},0)},g.onerror=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)},g.ontimeout=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)},g.onabort=function(){setTimeout(function(){f(new j("Aborted","AbortError"))},0)};function k(a){try{return""===a&&d.location.href?d.location.href:a}catch(b){return a}}g.open(h.method,k(h.url),!0),"include"===h.credentials?g.withCredentials=!0:"omit"===h.credentials&&(g.withCredentials=!1),"responseType"in g&&(e.blob?g.responseType="blob":e.arrayBuffer&&h.headers.get("Content-Type")&&h.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(g.responseType="arraybuffer")),!b||"object"!=typeof b.headers||b.headers instanceof o?h.headers.forEach(function(a,b){g.setRequestHeader(b,a)}):Object.getOwnPropertyNames(b.headers).forEach(function(a){g.setRequestHeader(a,m(b.headers[a]))}),h.signal&&(h.signal.addEventListener("abort",i),g.onreadystatechange=function(){4===g.readyState&&h.signal.removeEventListener("abort",i)}),g.send(void 0===h.dWc?null:h.dWc)})}B.polyfill=!0,d.fetch||(d.fetch=B,d.Headers=o,d.Request=x,d.Response=A)},CalcEngine:function(a,b){a.exports=c("@grapecity/js-calc")},Common:function(a,b){a.exports=c("@grapecity/js-sheets-common")}}),a.exports=d.Data},"./node_modules_local/@grapecity/js-data-manager/index.js":function(a,b,c){a.exports=c("./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js")},"@grapecity/js-calc":function(a,b){a.exports=GC.Spread.CalcEngine},"@grapecity/js-sheets-common":function(a,b){a.exports=GC.Spread}});