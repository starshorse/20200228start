<!DOCTYPE html>
<html lang="en" ng-app='myApp'>
<head>
	<meta charset="UTF-8">
	<title>T03</title>
</head>
<body>
	<dir>
    <a-t>content of a</a-t>
    <b-t>content of b</b-t>
    </dir>
	<lnk>
	<a-t>Hello</a-t>  
	<go-company2>Hello2</go-company2>  
	<go-company></go-company>  
	</lnk>
	<script src="/lib/angular/angular.min.js"></script>
	<script>
	     angular.module('myApp',[])
         .directive('dir', function () {
			return {
			  transclude: {
				a: 'aT',
				b: 'bT'
			  },
			  link: function (scope, elem, attrs, ctrl, transclude) {
				transclude(function (content) {
				  elem.append('<div>a</div>');
				  elem.append(content);
				}, null, 'a');
				
				transclude(function (content) {
				  elem.append('<div>b</div>');
				  elem.append(content);
				}, null, 'b');
			  }
			};
		  })
         .directive('lnk', function(){
			 return{
//				 restrict:'EA',
				 transclude: {
					 a: 'goCompany2',
		//		     b: 'bT'
				 }, 
				 controller: function($http, $element,  $transclude ){
					 let company_list =[
						 {'name':'ezchemtech', 'href':'http://ezchemtech.co.kr' },
						 {'name':'ezparts', 'href':'http://ezchemtech.co.kr' }
					 ] 
					 $transclude( function( clone ){
						 console.log( clone )
						 for( company of company_list){
							 let cl1 = clone.clone()
							 cl1.find('span').text( company.name )
							 cl1.find('a').attr('href', company.href )
							 $element.append( cl1 );
						 }
					 })
				 },
				 template:`<div><h3>SELECT COMPANY to GO</h3>
				                <div ng-transclude>
				 </div><span ng-transclude="a"></span> 
				           </div>
				          `,
				 link: function( scope, elem , attrs , ctrl , transclude ){
					 transclude( function( clone ){
						 console.log( clone )
						 elem.append( clone );
					 }, null, 'a')
				 }
			 }
		 })
	.directive('goCompany', function(){
		return {
	     	restrict:'EA',
			template:'<div><span>company</span><a href="https://ezoffice365.com">ezoffice</a></div>'
		}	
	})
	</script>
</body>
</html>
